<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—]]></title>
    <url>%2F2019%2F04%2F18%2F%E7%94%A8%E4%B8%A4%E4%B8%AA%E6%A0%88%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®æè¿°ç”¨ä¸¤ä¸ªæ ˆæ¥å®ç°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå®Œæˆé˜Ÿåˆ—çš„ Push å’Œ Pop æ“ä½œã€‚ æ€è·¯in æ ˆç”¨æ¥å¤„ç†å…¥æ ˆï¼ˆpushï¼‰æ“ä½œï¼Œout æ ˆç”¨æ¥å¤„ç†å‡ºæ ˆï¼ˆpopï¼‰æ“ä½œã€‚ä¸€ä¸ªå…ƒç´ è¿›å…¥ in æ ˆä¹‹åï¼Œå‡ºæ ˆçš„é¡ºåºè¢«åè½¬ã€‚å½“å…ƒç´ è¦å‡ºæ ˆæ—¶ï¼Œéœ€è¦å…ˆè¿›å…¥ out æ ˆï¼Œæ­¤æ—¶å…ƒç´ å‡ºæ ˆé¡ºåºå†ä¸€æ¬¡è¢«åè½¬ï¼Œå› æ­¤å‡ºæ ˆé¡ºåºå°±å’Œæœ€å¼€å§‹å…¥æ ˆé¡ºåºæ˜¯ç›¸åŒçš„ï¼Œå…ˆè¿›å…¥çš„å…ƒç´ å…ˆé€€å‡ºï¼Œè¿™å°±æ˜¯é˜Ÿåˆ—çš„é¡ºåºã€‚ 1234567891011121314151617Stack&lt;Integer&gt; in = new Stack&lt;&gt;();Stack&lt;Integer&gt; out = new Stack&lt;&gt;();public void push(int node)&#123; in.push(node);&#125;public int pop() throws Exception&#123; if(out.isEmpty())&#123; while(!in.isEmpty())&#123; out.push(in.pop()); &#125; &#125; if(out.isEmpty()) throw new Exception("queue is empty!"); return out.pop();&#125;]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
      <tags>
        <tag>æ ˆ</tag>
        <tag>é˜Ÿåˆ—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[äºŒå‰æ ‘çš„ä¸‹ä¸€ä¸ªç»“ç‚¹]]></title>
    <url>%2F2019%2F04%2F18%2F%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E4%B8%8B%E4%B8%80%E4%B8%AA%E7%BB%93%E7%82%B9%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®æè¿°ç»™å®šä¸€ä¸ªäºŒå‰æ ‘å’Œå…¶ä¸­çš„ä¸€ä¸ªç»“ç‚¹ï¼Œè¯·æ‰¾å‡ºä¸­åºéå†é¡ºåºçš„ä¸‹ä¸€ä¸ªç»“ç‚¹å¹¶ä¸”è¿”å›ã€‚æ³¨æ„ï¼Œæ ‘ä¸­çš„ç»“ç‚¹ä¸ä»…åŒ…å«å·¦å³å­ç»“ç‚¹ï¼ŒåŒæ—¶åŒ…å«æŒ‡å‘çˆ¶ç»“ç‚¹çš„æŒ‡é’ˆã€‚ æ€è·¯ è¯¥èŠ‚ç‚¹çš„å³å­æ ‘ä¸ä¸ºç©ºï¼Œåˆ™ä¸‹ä¸€èŠ‚ç‚¹æ˜¯è¯¥èŠ‚ç‚¹å³å­æ ‘ä¸­æœ€å·¦èŠ‚ç‚¹ï¼› è¯¥èŠ‚ç‚¹çš„å³å­æ ‘ä¸ºç©ºï¼Œåˆ™ä¸‹ä¸€èŠ‚ç‚¹æ˜¯åŒ…å«è¯¥èŠ‚ç‚¹çš„æœ€å°å·¦å­æ ‘çš„å­æ ‘æ ¹èŠ‚ç‚¹ã€‚ 1234567891011121314151617181920212223242526//äºŒå‰æ ‘ç»“ç‚¹ç»“æ„class TreeNode&#123; int val; TreeNode left; TreeNode right; TreeNode parent;&#125;public TreeNode getNext(TreeNode node)&#123; if(node.right!=null)&#123; TreeNode temp = node.right; while(temp.left!=null)&#123; temp = temp.left; &#125; return temp; &#125; else&#123; while(node.parent!=null)&#123; TreeNode parent = node.parent; if(parent.left==node) return parent; node = parent; &#125; &#125; return null;&#125;]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
      <tags>
        <tag>äºŒå‰æ ‘</tag>
        <tag>ä¸­åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é‡å»ºäºŒå‰æ ‘]]></title>
    <url>%2F2019%2F04%2F18%2F%E9%87%8D%E5%BB%BA%E4%BA%8C%E5%8F%89%E6%A0%91%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®æè¿°æ ¹æ®äºŒå‰æ ‘çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœï¼Œé‡å»ºå‡ºè¯¥äºŒå‰æ ‘ã€‚å‡è®¾è¾“å…¥çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœä¸­éƒ½ä¸å«é‡å¤çš„æ•°å­—ã€‚ 12preorder = [3,9,20,15,7]inorder = [9,3,15,20,7] æ€è·¯å‰åºéå†çš„ç¬¬ä¸€ä¸ªå€¼ä¸ºæ ¹èŠ‚ç‚¹çš„å€¼ï¼Œä½¿ç”¨è¿™ä¸ªå€¼å°†ä¸­åºéå†ç»“æœåˆ†æˆä¸¤éƒ¨åˆ†ï¼Œå·¦éƒ¨åˆ†ä¸ºæ ‘çš„å·¦å­æ ‘ä¸­åºéå†ç»“æœï¼Œå³éƒ¨åˆ†ä¸ºæ ‘çš„å³å­æ ‘ä¸­åºéå†çš„ç»“æœã€‚ 1234567891011121314151617181920212223242526272829//äºŒå‰æ ‘ç»“æ„class TreeNode&#123; int val; TreeNode left; TreeNode right; TreeNode(int val)&#123;this.val = val; left = null; right = null&#125;;&#125;//ç¼“å­˜ä¸­åºéå†æ•°ç»„æ¯ä¸ªå€¼å¯¹åº”çš„ç´¢å¼•public Map&lt;Integer, Integer&gt; indexForInOrder = new HashMap&lt;&gt;();public TreeNode reConstructBinaryTree(int[] pre, int[] in)&#123; for(int i=0; i&lt;in.length; i++)&#123; indexForInOrder.put(in[i], i); &#125; return reConstructBianryTree(pre, 0, pre.length-1, 0);&#125;//å‚æ•°ï¼šå‰åºéå†æ•°ç»„ã€å‰åºéƒ¨åˆ†æ•°ç»„å·¦è¾¹ç•Œï¼Œå‰åºéƒ¨åˆ†æ•°ç»„å³è¾¹ç•Œã€ä¸­åºéƒ¨åˆ†æ•°ç»„å·¦è¾¹ç•Œprivate TreeNode reConstructBinaryTree(int[] pre, int preL, int preR, int inL)&#123; if(preL &gt; preR) return null; TreeNode root = new TreeNode(pre[preL]); int leftTreeSize = indexForInOrder(root.val) - inL; //å¯¹äºpreLå’ŒpreRçš„è®¡ç®—ï¼šDLR //å¯¹äºinLçš„è®¡ç®—ï¼šLDR root.left = reConstructBinaryTree(pre, preL+1, preL+leftTreeSize, inL);//D(L)R root.right = reConstructBinaryTree(pre, preL+leftSize+1, preR, inL+leftTreeSize+1);//DL(R) return root;&#125; æ‹“å±•é‡å»ºä¸€æ£µäºŒå‰æ ‘ï¼š å‰åº+ä¸­åº ååº+ä¸­åº 1234567891011121314151617181920212223242526272829//äºŒå‰æ ‘ç»“æ„class TreeNode&#123; int val; TreeNode left; TreeNode right; TreeNode(int val)&#123;this.val = val; left = null; right = null&#125;;&#125;//ç¼“å­˜ä¸­åºéå†æ•°ç»„æ¯ä¸ªå€¼å¯¹åº”çš„ç´¢å¼•public Map&lt;Integer, Integer&gt; indexForInOrder = new HashMap&lt;&gt;();public TreeNode reConstructBinaryTree(int[] next, int[] in)&#123; for(int i=0; i&lt;in.length; i++)&#123; indexForInOrder.put(in[i], i); &#125; return reConstructBianryTree(next, next.length-1, 0, 0);&#125;//å‚æ•°ï¼šååºéå†æ•°ç»„ã€ååºéƒ¨åˆ†æ•°ç»„å³è¾¹ç•Œï¼Œååºéƒ¨åˆ†æ•°ç»„å·¦è¾¹ç•Œã€ä¸­åºéƒ¨åˆ†æ•°ç»„å·¦è¾¹ç•Œprivate TreeNode reConstructBinaryTree(int[] next, int nextR, int nextL, int inL)&#123; if(nextL &gt; nextR) return null; TreeNode root = new TreeNode(next[nextR]); int rightTreeSize = indexForInOrder(root.val) - inL; //å¯¹äºnextRå’ŒnextLçš„è®¡ç®—ï¼šLRD //å¯¹äºinLçš„è®¡ç®—ï¼šLDR root.right = reConstructBinaryTree(next, nextR-1, nextR-rightTreeSize, inL);//L(R)D root.left = reConstructBinaryTree(pre, nextR-rightTreeSize-1, nextL, inL+leftTreeSize+1);//(L)RD return root;&#125;]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
      <tags>
        <tag>äºŒå‰æ ‘</tag>
        <tag>å‰åº</tag>
        <tag>ååº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨]]></title>
    <url>%2F2019%2F04%2F18%2F%E4%BB%8E%E5%B0%BE%E5%88%B0%E5%A4%B4%E6%89%93%E5%8D%B0%E9%93%BE%E8%A1%A8%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®æè¿°åè½¬é“¾è¡¨ï¼Œè¿”å›åè½¬åé“¾è¡¨å¤´éƒ¨ Input: 1-&gt;2-&gt;3 Output: 3-&gt;2-&gt;1 æ€è·¯1234class Node&#123; int val; Node next;&#125; é€’å½’ 12345678910public Node reverseList(Node head)&#123; if(head==null || head.next==null)//å¦‚æœæ²¡æœ‰èŠ‚ç‚¹æˆ–è€…åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ç›´æ¥è¿”å› return head; Node cur = head.next;//ä¿å­˜å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ head.next = null;//æ‰“æ–­å½“å‰èŠ‚ç‚¹çš„æŒ‡é’ˆåŸŸï¼Œä½¿ä¹‹èƒ½å¤Ÿæˆä¸ºæœ«å°¾èŠ‚ç‚¹ Node newHead = reverseList(cur); //è¿”å›ä»¥pNextä¸ºå¤´çš„åè½¬é“¾è¡¨ï¼Œ //è¿”å›ä¹‹ånewHeadä¸ºæ–°å¤´ï¼ŒpNextä¸ºæœ«èŠ‚ç‚¹ cur.next = head;//åœ¨ä»¥newHeadä¸ºå¤´ã€ä»¥pNextä¸ºæœ«çš„æ–°é“¾è¡¨ä¸­æ¥ä¸Šåº”è¯¥ä¸ºæœ«èŠ‚ç‚¹çš„head return newHead;&#125; æ ˆ 1234567891011121314151617public Node reverseList(Node head)&#123; if(head==null || head.next==null) return head; Stack&lt;Node&gt; s = new Stack&lt;&gt;(); Node newHead = null;//è®°å½•æœ€åä¸€ä¸ªæŒ‡é’ˆ,å³åè½¬åå¤´èŠ‚ç‚¹ while(head.next!=null)&#123;//æœ€åä¸€ä¸ªæŒ‡é’ˆä¸å…¥æ ˆï¼Œæ–¹ä¾¿å‡ºæ ˆå®¹æ˜“å®ç° s.push(head); head = head.next; &#125; newHead = head; while(!s.isEmpty())&#123; head.next = s.pop(); head = head.next; &#125; head.next = null; return newHead;&#125; éå† 12345678910111213public Node reverseList(Node head)&#123; Node newHead = null;//åè½¬åçš„æ–°å¤´èŠ‚ç‚¹ Node cur = head; //å½“å‰èŠ‚ç‚¹ Node pre = null; //å½“å‰èŠ‚ç‚¹å‰ä¸€èŠ‚ç‚¹ while(node!=null)&#123; Node next = cur.next; //å½“å‰èŠ‚ç‚¹åä¸€èŠ‚ç‚¹ if(next==null) newHead = cur; cur.next = pre;//å½“å‰èŠ‚ç‚¹ä¸‹ä¸€èŠ‚ç‚¹æŒ‡å‘å‰èŠ‚ç‚¹ï¼Œèµ·åˆ°åè½¬ä½œç”¨ pre = cur; cur = next;//ä¸‰ä¸ªæŒ‡é’ˆæ•´ä½“å‘åç§»åŠ¨ï¼Œèµ·åˆ°éå†æ•ˆæœ &#125;&#125; æ‹“å±•åè½¬éƒ¨åˆ†é“¾è¡¨ï¼Œåè½¬[m,n]ä¹‹é—´çš„é“¾è¡¨ Input: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;6 [2,5] Output: 1-&gt;5-&gt;4-&gt;3-&gt;2-&gt;6 ä¸ªäººæ„Ÿè§‰é€’å½’å®ç°å›°éš¾ï¼Œé‡‡ç”¨æ ˆå’Œéå†çš„æ–¹å¼åº”è¯¥ç®€å•ï¼ˆåªè¦è®°å½•ä»¥ä¸‹å…¥æ ˆèŠ‚ç‚¹ä¸ªæ•°æˆ–è€…éå†ä¸ªæ•°å³å¯ï¼‰]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
      <tags>
        <tag>é“¾è¡¨</tag>
        <tag>åè½¬</tag>
        <tag>é€’å½’</tag>
        <tag>éå†</tag>
        <tag>æ ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ›¿æ¢ç©ºæ ¼]]></title>
    <url>%2F2019%2F04%2F18%2F%E6%9B%BF%E6%8D%A2%E7%A9%BA%E6%A0%BC%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®æè¿°å°†ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼æ›¿æ¢æˆ â€œ%20â€ã€‚ 12345Input:&quot;A B&quot;Output:&quot;A%20B&quot; è§£é¢˜æ€è·¯åœ¨å­—ç¬¦ä¸²å°¾éƒ¨å¡«å……ä»»æ„å­—ç¬¦ï¼Œä½¿å¾—å­—ç¬¦ä¸²çš„é•¿åº¦ç­‰äºæ›¿æ¢ä¹‹åçš„é•¿åº¦ã€‚å› ä¸ºä¸€ä¸ªç©ºæ ¼è¦æ›¿æ¢æˆä¸‰ä¸ªå­—ç¬¦ï¼ˆ%20ï¼‰ï¼Œå› æ­¤å½“éå†åˆ°ä¸€ä¸ªç©ºæ ¼æ—¶ï¼Œéœ€è¦åœ¨å°¾éƒ¨å¡«å……ä¸¤ä¸ªä»»æ„å­—ç¬¦ã€‚ ä»¤ P1 æŒ‡å‘å­—ç¬¦ä¸²åŸæ¥çš„æœ«å°¾ä½ç½®ï¼ŒP2 æŒ‡å‘å­—ç¬¦ä¸²ç°åœ¨çš„æœ«å°¾ä½ç½®ã€‚P1 å’Œ P2 ä»åå‘å‰éå†ï¼Œå½“ P1 éå†åˆ°ä¸€ä¸ªç©ºæ ¼æ—¶ï¼Œå°±éœ€è¦ä»¤ P2 æŒ‡å‘çš„ä½ç½®ä¾æ¬¡å¡«å…… 02%ï¼ˆæ³¨æ„æ˜¯é€†åºçš„ï¼‰ï¼Œå¦åˆ™å°±å¡«å……ä¸Š P1 æŒ‡å‘å­—ç¬¦çš„å€¼ã€‚ ä»åå‘å‰éæ˜¯ä¸ºäº†åœ¨æ”¹å˜ P2 æ‰€æŒ‡å‘çš„å†…å®¹æ—¶ï¼Œä¸ä¼šå½±å“åˆ° P1 éå†åŸæ¥å­—ç¬¦ä¸²çš„å†…å®¹ã€‚ 12345678910111213141516171819public String replaceSpace(StringBuffer str) &#123; int P1 = str.length() - 1; for (int i = 0; i &lt;= P1; i++) if (str.charAt(i) == ' ') str.append(" "); int P2 = str.length() - 1; while (P1 &gt;= 0 &amp;&amp; P2 &gt; P1) &#123; char c = str.charAt(P1--); if (c == ' ') &#123; str.setCharAt(P2--, '0'); str.setCharAt(P2--, '2'); str.setCharAt(P2--, '%'); &#125; else &#123; str.setCharAt(P2--, c); &#125; &#125; return str.toString();&#125;]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
      <tags>
        <tag>å­—ç¬¦ä¸²</tag>
        <tag>æ›¿æ¢</tag>
        <tag>åŒæŒ‡é’ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾]]></title>
    <url>%2F2019%2F04%2F18%2F%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9F%A5%E6%89%BE%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®æè¿°ç»™å®šä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œå…¶æ¯ä¸€è¡Œä»å·¦åˆ°å³é€’å¢æ’åºï¼Œä»ä¸Šåˆ°ä¸‹ä¹Ÿæ˜¯é€’å¢æ’åºã€‚ç»™å®šä¸€ä¸ªæ•°ï¼Œåˆ¤æ–­è¿™ä¸ªæ•°æ˜¯å¦åœ¨è¯¥äºŒç»´æ•°ç»„ä¸­ã€‚ 1234567891011Consider the following matrix:[ [1, 4, 7, 11, 15], [2, 5, 8, 12, 19], [3, 6, 9, 16, 22], [10, 13, 14, 17, 24], [18, 21, 23, 26, 30]]Given target = 5, return true.Given target = 20, return false. æ€è·¯è¦æ±‚æ—¶é—´å¤æ‚åº¦ O(M + N)ï¼Œç©ºé—´å¤æ‚åº¦ O(1)ã€‚ è¯¥äºŒç»´æ•°ç»„ä¸­çš„ä¸€ä¸ªæ•°ï¼Œå®ƒå·¦è¾¹çš„æ•°éƒ½æ¯”å®ƒå°ï¼Œä¸‹è¾¹çš„æ•°éƒ½æ¯”å®ƒå¤§ã€‚å› æ­¤ï¼Œä»å³ä¸Šè§’å¼€å§‹æŸ¥æ‰¾ï¼Œå°±å¯ä»¥æ ¹æ® target å’Œå½“å‰å…ƒç´ çš„å¤§å°å…³ç³»æ¥ç¼©å°æŸ¥æ‰¾åŒºé—´ï¼Œå½“å‰å…ƒç´ çš„æŸ¥æ‰¾åŒºé—´ä¸ºå·¦ä¸‹è§’çš„æ‰€æœ‰å…ƒç´ ã€‚ 12345678910111213141516public boolean Find(int target, int[][] matrix) &#123; if(matrix==null || matrix.length==0 || matrix[0].length==0) return false; int row = matrix.length; int col = matrix[0].length; int r = 0, c = col-1;//ä»å³ä¸Šè§’å¼€å§‹ while(r&lt;=row-1 &amp;&amp; c&gt;=0)&#123; if(target == matrix[r][c]) return true; else if(target &gt; matrix[r][c]) r++; else c--; &#125; return false;&#125;]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
      <tags>
        <tag>æ•°ç»„ï¼ŒæŸ¥æ‰¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ•°ç»„ä¸­é‡å¤çš„æ•°å­—]]></title>
    <url>%2F2019%2F04%2F18%2F%E6%95%B0%E7%BB%84%E4%B8%AD%E9%87%8D%E5%A4%8D%E7%9A%84%E6%95%B0%E5%AD%97%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®æè¿°åœ¨ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 0 åˆ° n-1 çš„èŒƒå›´å†…ã€‚æ•°ç»„ä¸­æŸäº›æ•°å­—æ˜¯é‡å¤çš„ï¼Œä½†ä¸çŸ¥é“æœ‰å‡ ä¸ªæ•°å­—æ˜¯é‡å¤çš„ï¼Œä¹Ÿä¸çŸ¥é“æ¯ä¸ªæ•°å­—é‡å¤å‡ æ¬¡ã€‚è¯·æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ã€‚ Input:{2, 3, 1, 0, 2, 5} Output:2 æ€è·¯è¦æ±‚æ˜¯æ—¶é—´å¤æ‚åº¦ O(N)ï¼Œç©ºé—´å¤æ‚åº¦ O(1)ã€‚å› æ­¤ä¸èƒ½ä½¿ç”¨æ’åºçš„æ–¹æ³•ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨é¢å¤–çš„æ ‡è®°æ•°ç»„ã€‚ å¯¹äºè¿™ç§æ•°ç»„å…ƒç´ åœ¨ [0, n-1] èŒƒå›´å†…çš„é—®é¢˜ï¼Œå¯ä»¥å°†å€¼ä¸º i çš„å…ƒç´ è°ƒæ•´åˆ°ç¬¬ i ä¸ªä½ç½®ä¸Šè¿›è¡Œæ±‚è§£ã€‚ ä»¥ (2, 3, 1, 0, 2, 5) ä¸ºä¾‹ï¼Œéå†åˆ°ä½ç½® 4 æ—¶ï¼Œè¯¥ä½ç½®ä¸Šçš„æ•°ä¸º 2ï¼Œä½†æ˜¯ç¬¬ 2 ä¸ªä½ç½®ä¸Šå·²ç»æœ‰ä¸€ä¸ª 2 çš„å€¼äº†ï¼Œå› æ­¤å¯ä»¥çŸ¥é“ 2 é‡å¤ï¼š 12345678910111213141516171819public boolean duplicate(int[] nums, int length, int[] duplicatin)&#123; if(nums==null || length==0) return false; for(int i=0; i&lt;length; i++)&#123; while(nums[i]!=i)&#123; if(nums[i]==nums[nums[i]])&#123; duplication[0] = nums[i]; return true; &#125; swap(nums, i, nums[i]); &#125; &#125;&#125;private void swap(int[] nums, int i, int j)&#123; int temp = nums[i]; nums[j] = nums[i]; nums[i] = temp;&#125;]]></content>
      <categories>
        <category>å‰‘æŒ‡offer</category>
      </categories>
      <tags>
        <tag>æ•°ç»„</tag>
        <tag>é‡å¤</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸ºè¿ç®—è¡¨è¾¾å¼è®¾è®¡ä¼˜å…ˆçº§]]></title>
    <url>%2F2019%2F03%2F22%2F%E4%B8%BA%E8%BF%90%E7%AE%97%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AE%BE%E8%AE%A1%E4%BC%98%E5%85%88%E7%BA%A7%2F</url>
    <content type="text"><![CDATA[å›æº¯æœç´¢ã€‚è¯¥é—®é¢˜ç‰µæ¶‰åˆ°æ‹¬å·çš„ç»„åˆé—®é¢˜ï¼Œä¸€èˆ¬ä½¿ç”¨é€’å½’+å›æº¯çš„æ€æƒ³ã€‚ä¸»è¦æƒ³æ³•ï¼š é€’å½’å›æº¯ã€‚å¯ä»¥äº§ç”Ÿæ‰€æœ‰çš„ç»„åˆæ–¹å¼ã€‚ æ¯ä¸ªå°ç»„åˆæ–¹å¼ç›¸å½“äºä¸€ä¸ªå­é›†ï¼Œä¸æ–­çš„å°†è®¡ç®—ç»“æœè¿”å›ç»™ä¸Šä¸€å±‚ã€‚ ä¸¾ä¾‹ï¼ša + (b - (c d))ä¼šä¸æ–­çš„å˜æˆa + (b - (res1 res2))-&gt; a + (res1 - res2) -&gt; res1 res2 è®¡ç®—ç»“æœéœ€è¦forå¾ªç¯ï¼ï¼ï¼å…¶å®æœ‰è¿™ç§æƒ…å†µï¼Œa + (b - (c d))å’Œa + (b - c) d))ï¼Œè¿™é‡Œ a +res2ï¼Œres2å°±å¯èƒ½æœ‰å¤šç§æƒ…å†µã€‚ â€‹123456789101112131415161718192021222324252627282930class Solution &#123; public List&lt;Integer&gt; diffWaysToCompute(String input) &#123; List&lt;Integer&gt; ways = new ArrayList&lt;&gt;(); for(int i=0; i&lt;input.length(); i++)&#123; char c = input.charAt(i); if(c=='+' || c=='-' || c=='*')&#123; List&lt;Integer&gt; left = diffWaysToCompute(input.substring(0, i)); List&lt;Integer&gt; right = diffWaysToCompute(input.substring(i+1)); for(Integer l : left)&#123; for(Integer r : right)&#123; switch(c)&#123; case '+': ways.add(l+r); break; case '-': ways.add(l-r); break; case '*': ways.add(l*r); break; &#125; &#125; &#125; &#125; &#125; if(ways.size()==0) ways.add(Integer.valueOf(input)); return ways; &#125;&#125;]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>æ‹¬å·</tag>
        <tag>ç»„åˆ</tag>
        <tag>å›æº¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[leetcode---äºŒåˆ†æŸ¥æ‰¾]]></title>
    <url>%2F2019%2F03%2F22%2F%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%2F</url>
    <content type="text"><![CDATA[äºŒåˆ†æŸ¥æ‰¾åŸºæœ¬å®ç°12345678910111213public int binarySearch(int[] nums, int key)&#123; int l = 0, h = nums.length-1; while(l&lt;=h)&#123; int mid = l+(h-l)/2; //é˜²æ­¢(h+l)/2åŠ æ³•æº¢å‡º if(nums[mid]==key) return mid; else if(nums[mid]&gt;key) h = mid-1; else l = mid+1; &#125; return -1;&#125; å˜ç§äºŒåˆ†æŸ¥æ‰¾ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­keyé‡å¤å…ƒç´ æœ€å·¦ä½ç½®(æ³¨æ„è¾¹ç•Œ)1234567891011121314public int binarySearch(int[] nums, int key)&#123; int l=0, h=nums.length-1; while(l&lt;h)&#123; int mid = l+(h-l)/2; if(nums[mid]&gt;=key) h = mid; else l = mid+1; &#125; if(nums[l]==key) return l; else return -1;&#125; leetcodeä¸ŠäºŒåˆ†æŸ¥æ‰¾é¢˜1234567891011121314151617//æ±‚å¼€æ–¹ 69. Sqrt(x) (Easy)public int mySqrt(int x)&#123; if(x&lt;=1) return x; int l=1,h=x; while(l&lt;=h)&#123; int mid = l+(h-l)/2; int sqrt = x/mid; if(sqrt==mid) return mid; else if(mid&gt;sqrt) h = mid-1; else l = mid+1; &#125; return h;&#125; 12345678910111213//ç»™å®šä¸€ä¸ªæœ‰åºçš„å­—ç¬¦æ•°ç»„ letters å’Œä¸€ä¸ªå­—ç¬¦ targetï¼Œè¦æ±‚æ‰¾å‡º letters ä¸­å¤§äº target çš„æœ€å°å­—ç¬¦ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±è¿”å›ç¬¬ 1 ä¸ªå­—ç¬¦//744. Find Smallest Letter Greater Than Target (Easy)public char nextGreatestLetter(char[] letters, char target)&#123; int l=0, h=letters.length-1; while(l&lt;=h)&#123; int mid = l+(h-l)/2; if(letters[mid]&lt;=target) l = mid+1; else h = mid-1; &#125; return l&lt;letters.length ? letters[l] : letters[0];&#125; 123456789101112131415161718//ä»¥O(logN)æ—¶é—´å¤æ‚åº¦æ‰¾å‡ºæœ‰åºæ•°ç»„ä¸­å”¯ä¸€ä¸å‡ºç°2æ¬¡çš„å…ƒç´ //540. Single Element in a Sorted Array (Medium)//å‡è®¾indexæ˜¯è¯¥å…ƒç´ æ‰€åœ¨ä½ç½®ï¼Œmidæ˜¯å¶æ•°ï¼Œåˆ™å½“(mid+1&lt;index)æ—¶ï¼Œnums[m]==nums[m+1];//å½“(mid+1&gt;=index),nums[m]!=nums[m+1]//å› æ­¤ï¼Œmä¸ºå¶æ•°çš„æƒ…å†µä¸‹ï¼Œå½“nums[m]==nums[m+1],indexæ‰€åœ¨åŒºé—´åº”è¯¥ä¸º[m+2,h];å¦åˆ™ï¼Œindexåœ¨[l,m];public int singleNonDuplicate(int[] nums)&#123; int l=0, h=nums.length-1; while(l&lt;h)&#123; int mid = l+(h-l)/2; if(mid%2==1) mid--; //ä¿è¯midæ˜¯å¶æ•° if(nums[mid]==nums[mid+1) l = m+2; else h = m; &#125; return h;&#125; 123456789101112//æ—‹è½¬æ•°ç»„ä¸­çš„æœ€å°æ•°å­— 153. Find Minimum in Rotated Sorted Array (Medium)public int findMin(int[] nums)&#123; int l=0, h=nums.length-1; while(l&lt;h)&#123; int mid = l+(h-l)/2; if(nums[mid]&lt;=nums[h]) h = mid; else l = mid+1; &#125; return nums[l];&#125; 123456789101112131415161718192021222324252627282930//æŸ¥æ‰¾åŒºé—´ï¼Œæ‰¾åˆ°æœ€å·¦ä½ç½®ï¼Œæ‰¾åˆ°æœ€å³ä½ç½®//34. Search for a Range (Medium)public int findRange(int[] nums, int target)&#123; int first=0, last=0; int l=0, h=nums.length-1; //æ‰¾æœ€å·¦ä½ç½® while(l&lt;h)&#123; int mid = l+(h-l)/2; if(nums[mid]&gt;=target) h = mid; else l = mid+1; &#125; if(nums[l]!=target) return new int&#123;-1,-1&#125;; else&#123; first = l; //æ‰¾æœ€å³ä½ç½® l=0, h=nums.length-1; while(l&lt;h)&#123; int mid = l+(h-l+1)/2;//è¿™é‡Œmidé€‰æ‹©å‘ä¸Šå–æ•´ï¼Œå¦åˆ™ä¼šæ­»å¾ªç¯ if(nums[mid]&lt;=target) l = mid; else h = mid-1; &#125; last = h; return new int&#123;first, last&#125;; &#125;&#125; â€‹]]></content>
      <categories>
        <category>leetcode</category>
        <category>æŸ¥æ‰¾</category>
      </categories>
      <tags>
        <tag>äºŒåˆ†æŸ¥æ‰¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çº¿ç¨‹åŒæ­¥]]></title>
    <url>%2F2019%2F03%2F21%2F%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%2F</url>
    <content type="text"><![CDATA[è¿›ç¨‹ä¸­çº¿ç¨‹åŒæ­¥çš„å››ç§å¸¸ç”¨æ–¹å¼ï¼šä¸´ç•ŒåŒºï¼ˆCCriticalSection)å½“å¤šä¸ªçº¿ç¨‹è®¿é—®ä¸€ä¸ªç‹¬å æ€§å…±äº«èµ„æºæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸´ç•ŒåŒºå¯¹è±¡ã€‚æ‹¥æœ‰ä¸´ç•ŒåŒºå¯¹è±¡çš„çº¿ç¨‹å¯ä»¥è®¿é—®è¢«ä¿æŠ¤çš„èµ„æºæˆ–ä»£ç æ®µï¼Œå…¶ä»–çº¿ç¨‹è‹¥æƒ³è®¿é—®ï¼Œåˆ™è¢«æŒ‚èµ·ï¼Œç›´åˆ°æ‹¥æœ‰ä¸´ç•ŒåŒºçš„çº¿ç¨‹é‡Šæ”¾ä¸´ç•ŒåŒºä¸ºæ­¢ã€‚ å®šä¹‰ä¸´ç•ŒåŒºå¯¹è±¡CCriticalSection g_CriticalSectionï¼› åœ¨è®¿é—®å…±äº«èµ„æºä¹‹å‰ï¼Œå…ˆè·å–ä¸´ç•ŒåŒºå¯¹è±¡ï¼Œg_CriticalSectionï¼› è®¿é—®èµ„æºç»“æŸåï¼Œé‡Šæ”¾ä¸´ç•ŒåŒºå¯¹è±¡ï¼Œg_CriticalSection.unLock(); äº‹ä»¶ï¼ˆCEventï¼‰äº‹ä»¶æœºåˆ¶ï¼Œåˆ™å…è®¸ä¸€ä¸ªçº¿ç¨‹åœ¨å¤„ç†å®Œä¸€ä¸ªä»»åŠ¡åï¼Œä¸»åŠ¨å”¤é†’å¦å¤–ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ã€‚æ¯”å¦‚åœ¨æŸäº›ç½‘ç»œåº”ç”¨ç¨‹åºä¸­ï¼Œä¸€ä¸ªçº¿ç¨‹Aè´Ÿè´£ä¾¦å¬é€šä¿¡ç«¯å£ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹Bè´Ÿè´£æ›´æ–°ç”¨æˆ·æ•°æ®ï¼Œåˆ©ç”¨äº‹ä»¶æœºåˆ¶ï¼Œåˆ™çº¿ç¨‹Aå¯ä»¥é€šçŸ¥çº¿ç¨‹Bä½•æ—¶æ›´æ–°ç”¨æˆ·æ•°æ®ã€‚æ¯ä¸ªCeventå¯¹è±¡å¯ä»¥æœ‰ä¸¤ç§çŠ¶æ€ï¼š ä¿¡å·çŠ¶æ€å’Œæ— ä¿¡å·çŠ¶æ€ã€‚Ceventç±»å¯¹è±¡æœ‰ä¸¤ç§ç±»å‹ï¼š è‡ªåŠ¨äº‹ä»¶å¯¹è±¡ï¼šåœ¨è¢«è‡³å°‘ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾åè‡ªåŠ¨è¿”å›åˆ°æ— ä¿¡å·çŠ¶æ€ï¼› äººå·¥äº‹ä»¶å¯¹è±¡ï¼šè·å¾—ä¿¡å·åï¼Œé‡Šæ”¾å¯åˆ©ç”¨çº¿ç¨‹ï¼Œä½†ç›´åˆ°è°ƒç”¨æˆå‘˜å‡½æ•°ReSet()æ‰å°†å…¶è®¾ç½®ä¸ºæ— ä¿¡å·çŠ¶æ€ã€‚åœ¨åˆ› å»ºCeventå¯¹è±¡æ—¶ï¼Œé»˜è®¤åˆ›å»ºçš„æ˜¯è‡ªåŠ¨äº‹ä»¶ã€‚ äº’æ–¥é‡ï¼ˆCMutexï¼‰äº’æ–¥å¯¹è±¡å’Œä¸´ç•ŒåŒºå¯¹è±¡éå¸¸ç›¸ä¼¼ï¼Œåªæ˜¯äº’æ–¥é‡å…è®¸åœ¨è¿›ç¨‹é—´ä½¿ç”¨ï¼Œè€Œä¸´ç•ŒåŒºåªé™åˆ¶ä¸åŒä¸€è¿›ç¨‹çš„å„ä¸ªçº¿ç¨‹ä¹‹é—´ä½¿ç”¨ï¼Œä½†æ˜¯æ›´èŠ‚çœèµ„æºï¼Œæ›´æœ‰æ•ˆç‡ã€‚ äº’æ–¥é‡æ˜¯å¯ä»¥å‘½åçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒå¯ä»¥è·¨è¶Šè¿›ç¨‹ä½¿ç”¨ã€‚æ‰€ä»¥åˆ›å»ºäº’æ–¥é‡éœ€è¦çš„èµ„æºæ›´å¤šï¼Œæ‰€ä»¥å¦‚æœåªä¸ºäº†åœ¨è¿›ç¨‹å†…éƒ¨æ˜¯ç”¨çš„è¯ä½¿ç”¨ä¸´ç•ŒåŒºä¼šå¸¦æ¥é€Ÿåº¦ä¸Šçš„ä¼˜åŠ¿å¹¶èƒ½å¤Ÿå‡å°‘èµ„æºå ç”¨é‡ ã€‚å› ä¸ºäº’æ–¥é‡æ˜¯è·¨è¿›ç¨‹çš„äº’æ–¥é‡ä¸€æ—¦è¢«åˆ›å»ºï¼Œå°±å¯ä»¥é€šè¿‡åå­—æ‰“å¼€å®ƒã€‚ ä¿¡å·é‡ï¼ˆCSemphoreï¼‰å½“éœ€è¦ä¸€ä¸ªè®¡æ•°å™¨æ¥é™åˆ¶å¯ä»¥ä½¿ç”¨æŸå…±äº«èµ„æºçš„çº¿ç¨‹æ•°ç›®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨â€œä¿¡å·é‡â€å¯¹è±¡ã€‚CSemaphoreç±»å¯¹è±¡ä¿å­˜äº†å¯¹å½“å‰è®¿é—®æŸä¸€ä¸ªæŒ‡å®šèµ„æºçš„çº¿ç¨‹çš„è®¡æ•°å€¼ï¼Œè¯¥è®¡æ•°å€¼æ˜¯å½“å‰è¿˜å¯ä»¥ä½¿ç”¨è¯¥èµ„æºçš„çº¿ç¨‹æ•°ç›®ã€‚å¦‚æœè¿™ä¸ªè®¡æ•°è¾¾åˆ°äº†é›¶ï¼Œåˆ™æ‰€æœ‰å¯¹è¿™ä¸ªCSemaphoreç±»å¯¹è±¡æ‰€æ§åˆ¶çš„èµ„æºçš„è®¿é—®å°è¯•éƒ½è¢«æ”¾å…¥åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç­‰å¾…ï¼Œç›´åˆ°è¶…æ—¶æˆ–è®¡æ•°å€¼ä¸ä¸ºé›¶ä¸ºæ­¢ã€‚]]></content>
      <categories>
        <category>æ“ä½œç³»ç»Ÿ</category>
        <category>è¿›ç¨‹ç®¡ç†</category>
      </categories>
      <tags>
        <tag>çº¿ç¨‹</tag>
        <tag>åŒæ­¥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaå®ç°LRUç­–ç•¥ç¼“å†²]]></title>
    <url>%2F2019%2F03%2F08%2FJava%E5%AE%9E%E7%8E%B0LRU%E7%AD%96%E7%95%A5%E7%BC%93%E5%86%B2%2F</url>
    <content type="text"><![CDATA[1.åŸºäºåŒå‘é“¾è¡¨+HashMapå®ç°ï¼š è®¿é—®æŸä¸ªèŠ‚ç‚¹æ—¶ï¼Œå°†è¯¥èŠ‚ç‚¹ä»åŒå‘é“¾è¡¨ä¸­åŸä½ç½®åˆ é™¤ï¼Œå¹¶é‡æ–°æ’å…¥é“¾è¡¨å¤´ã€‚è¿™æ ·å¯ä»¥ä¿è¯é“¾è¡¨å°¾éƒ¨èŠ‚ç‚¹å°±æ˜¯æœ€è¿‘æœ€ä¹…æœªè¢«ä½¿ç”¨çš„ï¼Œå½“èŠ‚ç‚¹æ•°é‡å¤§äºç¼“å­˜ç©ºé—´å°±æ·˜æ±°é“¾è¡¨å°¾éƒ¨èŠ‚ç‚¹ï¼› ä¸ºäº†èƒ½åœ¨O(1)æ—¶é—´å†…ä»é“¾è¡¨åˆ é™¤æŸä¸ªèŠ‚ç‚¹ï¼Œä¸èƒ½é€šè¿‡éå†é“¾è¡¨æŸ¥æ‰¾è¯¥èŠ‚ç‚¹ã€‚éœ€è¦å€ŸåŠ©HashMapå­˜å‚¨keyä¸èŠ‚ç‚¹çš„æ˜ å°„ï¼Œé€šè¿‡keyåœ¨O(1)æ—¶é—´å†…æ‰¾åˆ°èŠ‚ç‚¹ï¼Œå¹¶åœ¨O(1)æ—¶é—´å†…åˆ é™¤è¯¥èŠ‚ç‚¹ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394public class LRU&lt;K, V&gt; implements Iterable&lt;K&gt; &#123; private Node head; private Node tail; private HashMap&lt;K, Node&gt; map; private int maxSize; private class Node &#123; Node pre; Node next; K k; V v; public Node(K k, V v) &#123; this.k = k; this.v = v; &#125; &#125; public LRU(int maxSize) &#123; this.maxSize = maxSize; this.map = new HashMap&lt;&gt;(maxSize * 4 / 3); head = new Node(null, null); tail = new Node(null, null); head.next = tail; tail.pre = head; &#125; public V get(K key) &#123; if (!map.containsKey(key)) &#123; return null; &#125; Node node = map.get(key); unlink(node); appendHead(node); return node.v; &#125; public void put(K key, V value) &#123; if (map.containsKey(key)) &#123; Node node = map.get(key); unlink(node); &#125; Node node = new Node(key, value); map.put(key, node); appendHead(node); if (map.size() &gt; maxSize) &#123; Node toRemove = removeTail(); map.remove(toRemove.k); &#125; &#125; private void unlink(Node node) &#123; Node pre = node.pre; Node next = node.next; pre.next = next; next.pre = pre; node.pre = null; node.next = null; &#125; private void appendHead(Node node) &#123; Node next = head.next; node.next = next; next.pre = node; node.pre = head; head.next = node; &#125; private Node removeTail() &#123; Node node = tail.pre; Node pre = node.pre; tail.pre = pre; pre.next = tail; node.pre = null; node.next = null; return node; &#125; @Override public Iterator&lt;K&gt; iterator() &#123; return new Iterator&lt;K&gt;() &#123; private Node cur = head.next; @Override public boolean hasNext() &#123; return cur != tail; &#125; @Override public K next() &#123; Node node = cur; cur = cur.next; return node.k; &#125; &#125;; &#125;&#125; 2.ä½¿ç”¨Javaå®¹å™¨ä¸­çš„LinkedHashMap LinkedHashMapç»§æ‰¿è‡ªHashMapï¼Œå› æ­¤å…·æœ‰å’ŒHashMapä¸€æ ·çš„å¿«é€ŸæŸ¥æ‰¾ç‰¹æ€§ï¼› å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œç”¨æ¥ç»´æŠ¤æ’å…¥é¡ºåºæˆ–è€…LRUé¡ºåºï¼›accessOrderå­—æ®µå†³å®šäº†é¡ºåºï¼Œé»˜è®¤ä¸ºfalseï¼ˆæ’å…¥é¡ºåºï¼‰ï¼› å› æ­¤ï¼ŒLinkedHashMap = åŒå‘é“¾è¡¨+HashMap. ä½†æ˜¯LinkedHashMapå®ç°çš„LRUç¼“å­˜ä¸ç¬¬1ä¸ªå®ç°æ–¹å¼æœ‰ä¸€ç‚¹ åŒºåˆ«ï¼Œå³LinkedHashMapçš„é“¾è¡¨é¦–éƒ¨æ‰æ˜¯æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨èŠ‚ç‚¹ ï¼›å½“ç„¶ï¼Œè¿™ä¸ªåŒºåˆ«å¯¹äºåŒå‘é“¾è¡¨æ¥è¯´ä¸æ˜¯äº‹å„¿ï¼Œåªæ˜¯å¯“æ„ä¸Šçš„åŒºåˆ«è€Œå·²ï¼ˆåœ¨æˆ‘çœ‹æ¥ï¼‰ã€‚ è®¿é—®ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œè°ƒç”¨get()æ–¹æ³•ï¼Œget()ä¸­æœ‰ä¸€ä¸ªå‡½æ•°afterNodeAccess()ï¼›è¯¥æ–¹æ³•ç”¨äºå°†è¯¥èŠ‚ç‚¹ç§»åˆ°é“¾è¡¨å°¾éƒ¨ï¼ˆæœ€è¿‘è®¿é—®èŠ‚ç‚¹ï¼‰ â€‹123456789101112131415161718192021222324void afterNodeAccess(Node&lt;K,V&gt; e) &#123; // move node to last LinkedHashMap.Entry&lt;K,V&gt; last; if (accessOrder &amp;&amp; (last = tail) != e) &#123; LinkedHashMap.Entry&lt;K,V&gt; p = (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after; p.after = null; if (b == null) head = a; else b.after = a; if (a != null) a.before = b; else last = b; if (last == null) head = p; else &#123; p.before = last; last.after = p; &#125; tail = p; ++modCount; &#125;&#125; åœ¨putç­‰æ“ä½œä¹‹åæ‰§è¡ŒafterNodeInsertion()ï¼Œå½“removeEldestEntry()æ–¹æ³•è¿”å›trueæ—¶ä¼šç§»é™¤æœ€æ™šçš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯é“¾è¡¨é¦–éƒ¨èŠ‚ç‚¹ï¼›evictåªæœ‰åœ¨æ„å»ºMapæ—¶æ‰ä¸ºfalseï¼Œåœ¨è¿™é‡Œä¸ºtrue. â€‹1234567void afterNodeInsertion(boolean evict) &#123; // possibly remove eldest LinkedHashMap.Entry&lt;K,V&gt; first; if (evict &amp;&amp; (first = head) != null &amp;&amp; removeEldestEntry(first)) &#123; K key = first.key; removeNode(hash(key), key, null, false, true); &#125;&#125; removeEldestEntry()é»˜è®¤ä¸ºfalseï¼Œä¹Ÿå°±æ˜¯è¯´putæ“ä½œåæ‰§è¡Œçš„afterNodeInsertion()å¹¶æ²¡æœ‰ç§»é™¤é¦–éƒ¨èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ²¡æœ‰LRUç¼“å­˜æ·˜æ±°çš„è¯´æ³•äº†ï¼›å¦‚æœéœ€è¦è®©å®ƒä¸ºtrueï¼Œéœ€è¦ç»§æ‰¿LinkedHashMapå¹¶ä¸”è¦†ç›–è¯¥æ–¹æ³•ï¼› â€‹123protected boolean removeEldestEntry(Map.Entry&lt;K,V&gt; eldest) &#123; return false;&#125; å› æ­¤ï¼Œè¦ç”¨LinkedHashMapæ¥å®ç°ä¸€ä¸ªLRUç¼“å­˜ï¼Œéœ€è¦ï¼š1.è®¾å®šæœ€å¤§ç¼“å­˜ç©ºé—´MAX_ENTRIES2.ä½¿ç”¨LinkedHashMapçš„æ„é€ æ–¹æ³•å°†accessOrderè®¾ç½®ä¸ºtrueï¼Œå¼€å¯LRUé¡ºåºï¼›3.è¦†ç›–removeEldestEntryï¼ˆï¼‰æ–¹æ³•å®ç°ï¼Œåœ¨èŠ‚ç‚¹å¤šäºMAX_ENTRIESå°±ä¼šå°†æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„èŠ‚ç‚¹åˆ é™¤ã€‚ 1234567891011121314151617181920212223class LRUCache&lt;K, V&gt; extends LinkedHashMap&lt;K, V&gt; &#123; private static final int MAX_ENTRIES = 3; protected boolean removeEldestEntry(Map.Entry eldest) &#123; return size() &gt; MAX_ENTRIES; &#125; LRUCache() &#123; super(MAX_ENTRIES, 0.75f, true); &#125;&#125;public class LRUTest&#123; - public static void main(String[] args) &#123; LRUCache&lt;Integer, String&gt; cache = new LRUCache&lt;&gt;(); cache.put(1, "a"); cache.put(2, "b"); cache.put(3, "c"); cache.get(1); cache.put(4, "d"); System.out.println(cache.keySet()); &#125;&#125; â€‹]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>javaå®¹å™¨</tag>
        <tag>LRU</tag>
        <tag>ç¼“å­˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaå¤šçº¿ç¨‹çš„ä¸­æ–­æ“ä½œ]]></title>
    <url>%2F2019%2F03%2F06%2FJava%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%B8%AD%E6%96%AD%E6%93%8D%E4%BD%9C%2F</url>
    <content type="text"><![CDATA[InterruptedExceptionå¦‚æœä¸€ä¸ªçº¿ç¨‹å¤„äºé˜»å¡ã€é™æœŸç­‰å¾…æˆ–æ— é™æœŸç­‰å¾…çŠ¶æ€æ—¶ï¼Œè°ƒç”¨è¯¥çº¿ç¨‹çš„interrupt()æ–¹æ³•ä¸­æ–­çº¿ç¨‹ï¼Œå°±ä¼šæŠ›å‡ºInterruptedExceptionï¼Œä»è€Œæå‰ç»“æŸè¯¥çº¿ç¨‹ï¼›ï¼ˆæ³¨æ„ï¼šä¸èƒ½ä¸­æ–­IOé˜»å¡å’ŒSynchronizedé”é˜»å¡ï¼‰ Interupted å¦‚æœä¸€ä¸ªçº¿ç¨‹çš„run()æ–¹æ³•æ‰§è¡Œä¸€ä¸ªå¾ªç¯ä½“ï¼Œå¹¶ä¸”å¾ªç¯ä½“ä¸­æ²¡æœ‰ä¼šæŠ›å‡ºInterruptedExceptionçš„æ“ä½œï¼ˆå¦‚sleep())ï¼Œé‚£ä¹ˆè¯¥çº¿ç¨‹è°ƒç”¨interrupted()å°±æ— æ³•ä¸­æ–­çº¿ç¨‹ï¼› ç”±äºä¸€ä¸ªçº¿ç¨‹è°ƒç”¨interrupt()ä¼šè®¾ç½®çº¿ç¨‹ä¸­æ–­æ ‡å¿—ï¼Œè¯¥æ ‡å¿—å¯ä»¥é€šè¿‡interrupted()æ¥è·å–ï¼›å› æ­¤å¯ä»¥åœ¨run()æ–¹æ³•çš„å¾ªç¯ä½“ä¸­ä»¥è¯¥æ ‡å¿—æ¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦å¤„äºä¸­æ–­çŠ¶æ€ï¼Œä»¥ç»“æŸçº¿ç¨‹ã€‚ Executorä¸­æ–­æ“ä½œ Executorçš„shutDown()ä¼šç­‰å¾…æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åå†å…³é—­ï¼›è€Œè°ƒç”¨shutDownNow()ï¼Œç›¸å½“äºè°ƒç”¨æ¯ä¸ªçº¿ç¨‹çš„interrupt()æ–¹æ³•ï¼Œä¸­æ–­æ‰€æœ‰çº¿ç¨‹ï¼› å¦‚æœåªæƒ³ä¸­æ–­Executorä¸­çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨submit()æäº¤ä¸€ä¸ªçº¿ç¨‹ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªFuture&lt;?&gt;å¯¹è±¡ï¼Œé€šè¿‡è°ƒç”¨è¯¥å¯¹è±¡çš„cancel(true)æ–¹æ³•ä¸­æ–­çº¿ç¨‹ã€‚]]></content>
      <categories>
        <category>java</category>
        <category>å¤šçº¿ç¨‹</category>
      </categories>
      <tags>
        <tag>çº¿ç¨‹</tag>
        <tag>ä¸­æ–­</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Webé¡µé¢è¯·æ±‚è¿‡ç¨‹]]></title>
    <url>%2F2019%2F03%2F06%2FWeb%E9%A1%B5%E9%9D%A2%E8%AF%B7%E6%B1%82%E8%BF%87%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[è½¬è‡ªï¼š https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/è®¡ç®—æœºç½‘ç»œ.md#web-é¡µé¢è¯·æ±‚è¿‡ç¨‹ DHCPé…ç½®ä¸»æœºä¿¡æ¯ å‡è®¾ä¸»æœºæœ€å¼€å§‹æ²¡æœ‰IPåœ°å€ä»¥åŠå…¶ä»–ä¿¡æ¯ï¼Œé‚£ä¹ˆå°±éœ€è¦å…ˆä½¿ç”¨DHCPæ¥è·å–ï¼› ä¸»æœºç”Ÿæˆä¸€ä¸ªDHCPè¯·æ±‚æŠ¥æ–‡ï¼Œå¹¶å°†è¿™ä¸ªæŠ¥æ–‡æ”¾å…¥å…·æœ‰ç›®çš„ç«¯å£67å’Œæºç«¯å£68çš„UDPæŠ¥æ–‡æ®µä¸­ï¼› è¯¥æŠ¥æ–‡æ®µåˆ™è¢«æ”¾å…¥åœ¨ä¸€ä¸ªå…·æœ‰å¹¿æ’­IPç›®çš„åœ°å€ï¼ˆ255.255.255.255ï¼‰å’ŒæºIPåœ°å€ï¼ˆ0.0.0.0ï¼‰çš„IPæ•°æ®æŠ¥ä¸­ï¼› è¯¥æ•°æ®æŠ¥åˆ™è¢«æ”¾ç½®åœ¨MACå¸§ä¸­ï¼Œè¯¥å¸§å…·æœ‰ç›®çš„åœ°å€FF:FF:FF:FF:FF:FFï¼Œå°†å¹¿æ’­åˆ°ä¸äº¤æ¢æœºè¿æ¥çš„æ‰€æœ‰è®¾å¤‡ï¼› è¿æ¥åœ¨äº¤æ¢æœºçš„DHCPæœåŠ¡å™¨æ”¶åˆ°å¹¿æ’­å¸§ä¹‹åï¼Œä¸æ–­å‘ä¸Šåˆ†è§£å¾—åˆ°IPæ•°æ®æŠ¥ã€UDPæŠ¥æ–‡æ®µã€DHCPè¯·æ±‚æŠ¥æ–‡ï¼Œä¹‹åç”ŸæˆDHCP ACKæŠ¥æ–‡ï¼Œè¯¥æŠ¥æ–‡åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼šIPåœ°å€ã€DNSæœåŠ¡å™¨IPåœ°å€ã€é»˜è®¤ç½‘å…³è·¯ç”±å™¨çš„IPåœ°å€å’Œå­ç½‘æ©ç ã€‚è¯¥æŠ¥æ–‡è¢«æ”¾å…¥UDPæŠ¥æ–‡æ®µä¸­ï¼ŒUDPæŠ¥æ–‡æ®µåˆè¢«æ”¾å…¥IPæ•°æ®æŠ¥ä¸­ï¼Œæœ€åæ”¾å…¥MACå¸§ä¸­ï¼› è¯¥å¸§çš„ç›®çš„åœ°å€æ˜¯è¯·æ±‚ä¸»æœºçš„MACåœ°å€ï¼Œå› ä¸ºäº¤æ¢æœºå…·æœ‰è‡ªå­¦ä¹ èƒ½åŠ›ï¼Œä¹‹å‰ä¸»æœºå‘é€äº†å¹¿æ’­å¸§ä¹‹åå°±è®°å½•äº†MACåœ°å€åˆ°å…¶è½¬å‘æ¥å£çš„äº¤æ¢è¡¨é¡¹ï¼Œå› æ­¤ç°åœ¨äº¤æ¢æœºå°±å¯ä»¥ç›´æ¥çŸ¥é“åº”è¯¥å‘å“ªä¸ªæ¥å£å‘é€è¯¥å¸§ï¼› ä¸»æœºæ”¶åˆ°è¯¥å¸§åï¼Œä¸æ–­å‘ä¸Šåˆ†è§£å¾—åˆ°DHCPæŠ¥æ–‡ã€‚ä¹‹åå°±é…ç½®å®ƒçš„IPåœ°å€ï¼Œå­ç½‘æ©ç å’ŒDNSæœåŠ¡å™¨IPåœ°å€ï¼Œå¹¶åœ¨å…¶IPè½¬å‘è¡¨ä¸­å®‰è£…é»˜è®¤ç½‘å…³ï¼ ARPè§£æMACåœ°å€ ä¸»æœºé€šè¿‡æµè§ˆå™¨ç”Ÿæˆä¸€ä¸ªTCPå¥—æ¥å­—ï¼Œå¥—æ¥å­—å‘HTTPæœåŠ¡å™¨å‘é€HTTPè¯·æ±‚ã€‚ä¸ºäº†ç”Ÿæˆè¯¥å¥—æ¥å­—ï¼Œä¸»æœºéœ€è¦çŸ¥é“ç½‘ç«™çš„åŸŸåå¯¹åº”çš„IPåœ°å€ã€‚ ä¸»æœºç”Ÿæˆä¸€ä¸ªDNSæŸ¥è¯¢æŠ¥æ–‡ï¼Œè¯¥æŠ¥æ–‡å…·æœ‰53ç«¯å£ï¼Œå› ä¸ºDNSæœåŠ¡å™¨çš„ç«¯å£å·æ—¶53ï¼› è¯¥DNSæŸ¥è¯¢æŠ¥æ–‡è¢«æ”¾å…¥ç›®çš„åœ°å€ä¸ºDNSæœåŠ¡å™¨çš„IPæ•°æ®æŠ¥ä¸­ï¼› è¯¥IPæ•°æ®æŠ¥è¢«æ”¾å…¥ä¸€ä¸ªä»¥å¤ªç½‘å¸§ä¸­ï¼Œè¯¥å¸§å°†å‘é€åˆ°ç½‘å…³è·¯ç”±å™¨ï¼› DHCPè¿‡ç¨‹åªçŸ¥é“ç½‘å…³è·¯ç”±å™¨çš„IPåœ°å€ï¼Œä¸ºäº†è·å–ç½‘å…³è·¯ç”±å™¨çš„MACåœ°å€ï¼Œéœ€è¦ä½¿ç”¨ARPåè®®ï¼› ä¸»æœºç”Ÿæˆä¸€ä¸ªåŒ…å«ç›®çš„åœ°å€ä¸ºç½‘å…³è·¯ç”±å™¨IPåœ°å€çš„ARPæŸ¥è¯¢æŠ¥æ–‡ï¼Œå°†è¯¥ARPæŸ¥è¯¢æŠ¥æ–‡æ”¾å…¥ä¸€ä¸ªå…·æœ‰å¹¿æ’­ç›®çš„åœ°å€ï¼ˆFF:FF:FF:FF:FF:FF)çš„ä»¥å¤ªç½‘å¸§ä¸­ï¼Œå¹¶å‘äº¤æ¢æœºå‘é€è¯¥ä»¥å¤ªç½‘å¸§ï¼Œäº¤æ¢æœºå°†è¯¥å¸§è½¬å‘ç»™æ‰€æœ‰çš„è¿æ¥è®¾å¤‡ï¼ŒåŒ…æ‹¬ç½‘å…³è·¯ç”±å™¨ï¼› ç½‘å…³è·¯ç”±å™¨æ¥æ”¶åˆ°è¯¥å¸§åï¼Œä¸æ–­å‘ä¸Šåˆ†è§£å¾—åˆ°ARPæŠ¥æ–‡ï¼Œå‘ç°å…¶ä¸­çš„IPåœ°å€ä¸å…¶æ¥å£çš„IPåœ°å€åŒ¹é…ï¼Œå› æ­¤å°±å‘é€ARPå›ç­”æŠ¥æ–‡ï¼ŒåŒ…å«äº†å®ƒçš„MACåœ°å€ï¼Œå‘å›ç»™ä¸»æœºã€‚ DNSè§£æåŸŸå çŸ¥é“äº†ç½‘å…³è·¯ç”±å™¨çš„MACåœ°å€ä¹‹åï¼Œå°±å¯ä»¥ç»§ç»­DNSçš„è§£æè¿‡ç¨‹äº†ï¼› ç½‘å…³è·¯ç”±å™¨æ¥æ”¶åˆ°åŒ…å«DNSæŸ¥è¯¢æŠ¥æ–‡çš„ä»¥å¤ªç½‘å¸§åï¼ŒæŠ½å–å‡ºIPæ•°æ®æŠ¥ï¼Œå¹¶æ ¹æ®è½¬å‘è¡¨å†³å®šè¯¥IPæ•°æ®æŠ¥åº”è¯¥è½¬å‘çš„è·¯ç”±å™¨ï¼› å› ä¸ºè·¯ç”±å™¨å…·æœ‰å†…éƒ¨ç½‘å…³åè®®ï¼ˆRIPã€OSPFï¼‰å’Œå¤–éƒ¨ç½‘å…³åè®®ï¼ˆBGPï¼‰è¿™ä¸¤ç§è·¯ç”±é€‰æ‹©åè®®ï¼Œå› æ­¤è·¯ç”±è¡¨ä¸­å·²ç»é…ç½®äº†ç½‘å…³è·¯ç”±å™¨åˆ°è¾¾DNSæœåŠ¡å™¨çš„è·¯ç”±è¡¨é¡¹ï¼› åˆ°è¾¾DNSæœåŠ¡å™¨åï¼ŒDNSæœåŠ¡å™¨æŠ½å–å‡ºDNSæŸ¥è¯¢æŠ¥æ–‡ï¼Œå¹¶åœ¨DNSæ•°æ®åº“ä¸­æŸ¥æ‰¾å¾…è§£æçš„åŸŸåï¼› æ‰¾åˆ°DNSè®°å½•ä¹‹åï¼Œå‘é€DNSå›ç­”æŠ¥æ–‡ï¼Œå°†è¯¥å›ç­”æŠ¥æ–‡æ”¾å…¥UDPæŠ¥æ–‡æ®µä¸­ï¼Œç„¶åæ”¾å…¥IPæ•°æ®æŠ¥ä¸­ï¼Œé€šè¿‡è·¯ç”±å™¨åå‘è½¬å‘å›ç½‘å…³è·¯ç”±å™¨ï¼Œå¹¶ç»è¿‡ä»¥å¤ªç½‘äº¤æ¢æœºåˆ°è¾¾ä¸»æœºã€‚ HTTPè¯·æ±‚é¡µé¢ æœ‰äº†HTTPæœåŠ¡å™¨çš„IPåœ°å€ï¼Œä¸»æœºå°±èƒ½å¤Ÿç”ŸæˆTCPå¥—æ¥å­—ï¼Œè¯¥å¥—æ¥å­—å°†ç”¨äºå‘WebæœåŠ¡å™¨å‘é€HTTP GETæŠ¥æ–‡ï¼› åœ¨ç”ŸæˆTCPå¥—æ¥å­—ä¹‹å‰ï¼Œå¿…é¡»å…ˆä¸HTTPæœåŠ¡å™¨è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹æ¥å»ºç«‹è¿æ¥ã€‚ç”Ÿæˆä¸€ä¸ªå…·æœ‰ç›®çš„ç«¯å£80çš„TCP SYNæŠ¥æ–‡æ®µï¼Œå¹¶å‘HTTPæœåŠ¡å™¨å‘é€è¯¥æŠ¥æ–‡æ®µï¼› HTTPæœåŠ¡å™¨æ¥åˆ°è¯¥æŠ¥æ–‡æ®µä¹‹åï¼Œç”ŸæˆTCP SYN ACKæŠ¥æ–‡æ®µï¼Œå‘å›ç»™ä¸»æœºï¼› è¿æ¥å»ºç«‹ä¹‹åï¼Œæµè§ˆå™¨ç”ŸæˆHTTP GETæŠ¥æ–‡ï¼Œå¹¶äº¤ä»˜ç»™HTTPæœåŠ¡å™¨ï¼› HTTPæœåŠ¡å™¨ä»TCPå¥—æ¥å­—ä¸­è¯»å–HTTP GETæŠ¥æ–‡ï¼Œç”Ÿæˆä¸€ä¸ªHTTPå“åº”æŠ¥æ–‡ï¼Œå°†Webé¡µé¢å†…å®¹æ”¾å…¥æŠ¥æ–‡ä½“ä¸­ï¼Œå‘å›ç»™ä¸»æœºï¼› æµè§ˆå™¨æ”¶åˆ°HTTPå“åº”æŠ¥æ–‡åï¼ŒæŠ½å–å‡ºWebé¡µé¢å†…å®¹ï¼Œä¹‹åè¿›è¡Œæ¸²æŸ“ï¼Œæ˜¾ç¤ºWebé¡µé¢ã€‚]]></content>
      <categories>
        <category>ç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>DHCP</tag>
        <tag>ARP</tag>
        <tag>DNS</tag>
        <tag>HTTP</tag>
        <tag>Web</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[äº”ç§IOæ¨¡å‹]]></title>
    <url>%2F2019%2F03%2F05%2F%E4%BA%94%E7%A7%8DIO%E6%A8%A1%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[ä¸€ä¸ªè¾“å…¥æ“ä½œé€šå¸¸æœ‰ä¸¤ä¸ªé˜¶æ®µï¼š ç­‰å¾…æ•°æ®å‡†å¤‡ï¼Œå³ä»å­˜å‚¨ä»‹è´¨ï¼ˆç£ç›˜ï¼Œç½‘ç»œç­‰ï¼‰æ‹·è´åˆ°å†…æ ¸ï¼› ä»å†…æ ¸å‘è¿›ç¨‹å¤åˆ¶æ•°æ® é˜»å¡I/O åº”ç”¨è¿›ç¨‹è¢«é˜»å¡ï¼Œç›´åˆ°æ•°æ®ä»å†…æ ¸ç¼“å†²åŒºå¤åˆ¶åˆ°åº”ç”¨è¿›ç¨‹ç¼“å†²åŒºä¸­æ‰è¿”å› éé˜»å¡I/O åº”ç”¨è¿›ç¨‹æ‰§è¡Œç³»ç»Ÿè°ƒç”¨ä¹‹åï¼Œå†…æ ¸è¿”å›ä¸€ä¸ªé”™è¯¯ç ã€‚åº”ç”¨è¿›ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œä½†æ˜¯éœ€è¦ä¸æ–­çš„æ‰§è¡Œç³»ç»Ÿè°ƒç”¨æ¥è·çŸ¥ I/O æ˜¯å¦å®Œæˆï¼Œè¿™ç§æ–¹å¼ç§°ä¸ºè½®è¯¢ï¼ˆpollingï¼‰ã€‚ I/Oå¤ç”¨ ä½¿ç”¨ select æˆ–è€… poll ç­‰å¾…æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥ç­‰å¾…å¤šä¸ªå¥—æ¥å­—ä¸­çš„ä»»ä½•ä¸€ä¸ªå˜ä¸ºå¯è¯»ã€‚è¿™ä¸€è¿‡ç¨‹ä¼šè¢«é˜»å¡ï¼Œå½“æŸä¸€ä¸ªå¥—æ¥å­—å¯è¯»æ—¶è¿”å›ï¼Œä¹‹åå†ä½¿ç”¨ recvfrom æŠŠæ•°æ®ä»å†…æ ¸å¤åˆ¶åˆ°è¿›ç¨‹ä¸­ï¼› å®ƒå¯ä»¥è®©å•ä¸ªè¿›ç¨‹å…·æœ‰å¤„ç†å¤šä¸ª I/O äº‹ä»¶çš„èƒ½åŠ›ã€‚åˆè¢«ç§°ä¸º Event Driven I/Oï¼Œå³äº‹ä»¶é©±åŠ¨ I/Oã€‚ ä¿¡å·é©±åŠ¨I/O é€šè¿‡ç³»ç»Ÿè°ƒç”¨ sigaction å®‰è£…ä¸€ä¸ªä¿¡å·å¤„ç†ç¨‹åºã€‚æ­¤ç³»ç»Ÿè°ƒç”¨ç«‹å³è¿”å›ï¼Œè¿›ç¨‹ç»§ç»­å·¥ä½œï¼Œå®ƒæ˜¯éé˜»å¡çš„ï¼› å½“æ•°æ®æŠ¥å‡†å¤‡å¥½è¢«è¯»æ—¶ï¼Œå°±ä¸ºè¯¥è¿›ç¨‹ç”Ÿæˆä¸€ä¸ªSIGIOä¿¡å·ï¼› åº”ç”¨è¿›ç¨‹æ”¶åˆ°ä¹‹ååœ¨ä¿¡å·å¤„ç†ç¨‹åºä¸­è°ƒç”¨ recvfrom å°†æ•°æ®ä»å†…æ ¸å¤åˆ¶åˆ°åº”ç”¨è¿›ç¨‹ä¸­ã€‚ å¼‚æ­¥I/O åº”ç”¨è¿›ç¨‹æ‰§è¡Œ aio_read ç³»ç»Ÿè°ƒç”¨ä¼šç«‹å³è¿”å›ï¼Œåº”ç”¨è¿›ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œä¸ä¼šè¢«é˜»å¡ï¼Œå†…æ ¸ä¼šåœ¨æ‰€æœ‰æ“ä½œå®Œæˆä¹‹åå‘åº”ç”¨è¿›ç¨‹å‘é€ä¿¡å·ï¼› è°ƒç”¨aio_readå‡½æ•°ï¼Œå‘Šè¯‰å†…æ ¸æè¿°å­—ï¼Œç¼“å†²åŒºæŒ‡é’ˆï¼Œç¼“å†²åŒºå¤§å°ï¼Œæ–‡ä»¶åç§»ä»¥åŠé€šçŸ¥çš„æ–¹å¼ï¼Œç„¶åç«‹å³è¿”å›ã€‚å½“å†…æ ¸å°†æ•°æ®æ‹·è´åˆ°ç¼“å†²åŒºåï¼Œå†é€šçŸ¥åº”ç”¨ç¨‹åºã€‚ å¯¹æ¯”äº”ç§I/Oæ¨¡å‹ åŒæ­¥I/Oï¼šå°†æ•°æ®ä»å†…æ ¸ç¼“å†²åŒºå¤åˆ¶åˆ°åº”ç”¨è¿›ç¨‹ç¼“å†²åŒºçš„é˜¶æ®µï¼Œåº”ç”¨è¿›ç¨‹ä¼šé˜»å¡ï¼› å¼‚æ­¥I/Oï¼šåœ¨I/Oæ“ä½œæœªå®Œæˆå‰ï¼Œè¯·æ±‚è¿›ç¨‹æœªè¢«é˜»å¡ã€‚ é˜»å¡å¼ I/Oã€éé˜»å¡å¼ I/Oã€I/O å¤ç”¨å’Œä¿¡å·é©±åŠ¨ I/O éƒ½æ˜¯åŒæ­¥ I/Oï¼Œå®ƒä»¬çš„ä¸»è¦åŒºåˆ«åœ¨ç¬¬ä¸€ä¸ªé˜¶æ®µã€‚éé˜»å¡å¼ I/O ã€ä¿¡å·é©±åŠ¨ I/O å’Œå¼‚æ­¥ I/O åœ¨ç¬¬ä¸€é˜¶æ®µä¸ä¼šé˜»å¡ã€‚]]></content>
      <categories>
        <category>æ“ä½œç³»ç»Ÿ</category>
        <category>è®¾å¤‡ç®¡ç†</category>
      </categories>
      <tags>
        <tag>IO</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[BitSet]]></title>
    <url>%2F2019%2F03%2F02%2FBitSet%2F</url>
    <content type="text"><![CDATA[JAVAä¸­BitSetå°±æ˜¯â€œä½å›¾â€æ•°æ®ç»“æ„ï¼Œæ ¹æ®â€œä½å›¾â€çš„è¯­ä¹‰ï¼Œæ•°æ®çš„å­˜åœ¨æ€§å¯ä»¥ä½¿ç”¨bitä½ä¸Šçš„1æˆ–0æ¥è¡¨ç¤ºï¼›ä¸€ä¸ªbitå…·æœ‰2ä¸ªå€¼ï¼š0å’Œ1ï¼Œæ­£å¥½å¯ä»¥ç”¨æ¥è¡¨ç¤ºfalseå’Œtrueã€‚å¯¹äºåˆ¤æ–­â€œæ•°æ®æ˜¯å¦å­˜åœ¨â€çš„åœºæ™¯ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨HashMapæ¥å­˜å‚¨ï¼Œä¸è¿‡hashmapè¿™ä¸ªæ•°æ®ç»“æ„KEYå’ŒValueçš„ä¿å­˜éœ€è¦æ¶ˆè€—è¾ƒå¤šçš„å†…å­˜ï¼Œä¸é€‚åˆä¿å­˜è¾ƒå¤šçš„æ•°æ®ï¼Œå³å¤§æ•°æ®åœºæ™¯ï¼›æ¯”å¦‚åœ¨æœ‰10äº¿æ¡URLä¸­åˆ¤å®šä¸€ä¸ªï¼ˆ www.baidu.com ï¼‰æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨å¸¸è§„çš„hashmapæ¥ä¿å­˜å°†æ˜¯ä¸ç°å®çš„ï¼Œå› ä¸ºURLæœ¬èº«éœ€è¦å æ®è¾ƒå¤šçš„å†…å­˜è€Œæ— æ³•ç›´æ¥æ“ä½œã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨bitsetæ¥ä¿å­˜ï¼Œé‚£ä¹ˆå¯ä»¥å¯¹ä¸€æ¡URLæ±‚hashcodeï¼Œå¹¶å°†æ•°å­—æ˜ å°„åœ¨bitsetä¸Šï¼Œé‚£ä¹ˆäº‹å®ä¸Šå®ƒåªéœ€è¦bitsetä¸Šçš„ä¸€ä¸ªbitä½å³å¯ï¼Œå³æˆ‘ä»¬1ä½ç©ºé—´å³å¯è¡¨è¾¾ä¸€ä¸ªURLå­—ç¬¦ä¸²çš„å­˜åœ¨æ€§ã€‚ æ‰€è°“â€œå­˜åœ¨æ€§â€ï¼Œå°±æ˜¯é€šè¿‡BitSetæ¥æ£€æµ‹ä¸€ä¸ªæ•°å­—æ˜¯å¦å­˜åœ¨ã€‚ BitSetåŸç†JAVAä¸­ï¼Œä¸€ä¸ªlongå‹æ•°å­—å ç”¨64ä½ç©ºé—´ï¼Œæ ¹æ®ä¸Šè¿°â€œä½å›¾â€çš„æ¦‚å¿µï¼Œé‚£ä¹ˆä¸€ä¸ªlongå‹æ•°å­—ï¼ˆ4ä¸ªå­—èŠ‚ï¼‰å°±å¯ä»¥ä¿å­˜64ä¸ªæ•°å­—çš„â€œå­˜åœ¨æ€§â€çŠ¶æ€(æ— ç¢°æ’å†²çªæ—¶ï¼Œå³trueã€falseçŠ¶æ€)ã€‚æ¯”å¦‚50ä¸ªæ•°å­—{0,1,10,â€¦63}ï¼Œåˆ¤å®šâ€œ15â€æ˜¯å¦å­˜åœ¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬é€šå¸¸ä¼šé¦–å…ˆå°†è¿™äº›æ•°å­—ä½¿ç”¨æ•°ç»„æˆ–è€…hashmapä¿å­˜ï¼Œç„¶åå†å»åˆ¤å®šï¼Œé‚£ä¹ˆä¿å­˜è¿™äº›è¿™äº›æ•°æ®éœ€è¦å ç”¨64 * 64ä½ï¼›å¦‚æœä½¿ç”¨ä½å›¾ï¼Œé‚£ä¹ˆä¸€ä¸ªlongå‹æ•°å­—å³å¯ã€‚ï¼ˆå¦‚æœæ¢æˆ50ä¸ªå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå…¶èŠ‚çº¦çš„ç©ºé—´å¯èƒ½æ›´å¤§ï¼‰ã€‚ BitSetåªé¢å‘æ•°å­—æ¯”è¾ƒï¼Œæ¯”å¦‚set(int a,boolean value)æ–¹æ³•ï¼Œå°†æ•°å­—aåœ¨bitSetä¸­è®¾å®šä¸ºtrueæˆ–è€…falseï¼›æ­¤åå¯ä»¥é€šè¿‡get(int a)æ–¹æ³•æ£€æµ‹ç»“æœã€‚å¯¹äºstringç±»å‹çš„æ•°æ®ï¼Œå¦‚æœåƒä½¿ç”¨BitSetï¼Œé‚£ä¹ˆå¯ä»¥å°†å…¶hashcodeå€¼æ˜ å°„åœ¨bitsetä¸­ã€‚ é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼š1ï¼Œ1&lt;&lt;64ï¼Œ1&lt;&lt;128ï¼Œ1&lt;&lt;192â€¦ç­‰ï¼Œè¿™äº›æ•°å­—çš„è®¡ç®—ç»“æœæ˜¯ç›¸ç­‰çš„ï¼ˆä½è¿ç®—ï¼‰ï¼›è¿™ä¹Ÿæ˜¯ä¸€ä¸ªlongæ•°å­—ï¼Œåªèƒ½è¡¨è¾¾è¿ç»­çš„(æˆ–è€…æ— å†²çªçš„)64ä¸ªæ•°å­—çš„çŠ¶æ€ï¼Œå³å¦‚æœæŠŠæ•°å­—1åœ¨longä¸­ç”¨ä½è¡¨ç¤ºï¼Œé‚£ä¹ˆæ•°å­—64å°†æ— æ³•é€šè¿‡åŒä¸€ä¸ªlongæ•°å­—ä¸­ä½è¡¨ç¤ºâ€“å†²çªï¼›BitSetå†…éƒ¨ï¼Œæ˜¯ä¸€ä¸ªlong[]æ•°ç»„ï¼Œæ•°ç»„çš„å¤§å°ç”±bitSetæ¥æ”¶çš„æœ€å¤§æ•°å­—å†³å®šï¼Œè¿™ä¸ªæ•°ç»„å°†æ•°å­—åˆ†æ®µè¡¨ç¤º[0,63],[64,127],[128,191]â€¦ã€‚å³long[0]ç”¨æ¥å­˜å‚¨[0,63]è¿™ä¸ªèŒƒå›´çš„æ•°å­—çš„â€œå­˜åœ¨æ€§â€ï¼Œlong[1]ç”¨æ¥å­˜å‚¨[64,127]ï¼Œä¾æ¬¡è½®æ¨ï¼Œè¿™æ ·å°±é¿å…äº†ä½è¿ç®—å¯¼è‡´çš„å†²çªã€‚ é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼š1ï¼Œ1&lt;&lt;64ï¼Œ1&lt;&lt;128ï¼Œ1&lt;&lt;192â€¦ç­‰ï¼Œè¿™äº›æ•°å­—çš„è®¡ç®—ç»“æœæ˜¯ç›¸ç­‰çš„ï¼ˆä½è¿ç®—ï¼‰ï¼›è¿™ä¹Ÿæ˜¯ä¸€ä¸ªlongæ•°å­—ï¼Œåªèƒ½è¡¨è¾¾è¿ç»­çš„(æˆ–è€…æ— å†²çªçš„)64ä¸ªæ•°å­—çš„çŠ¶æ€ï¼Œå³å¦‚æœæŠŠæ•°å­—1åœ¨longä¸­ç”¨ä½è¡¨ç¤ºï¼Œé‚£ä¹ˆæ•°å­—64å°†æ— æ³•é€šè¿‡åŒä¸€ä¸ªlongæ•°å­—ä¸­ä½è¡¨ç¤ºâ€“å†²çªï¼›BitSetå†…éƒ¨ï¼Œæ˜¯ä¸€ä¸ªlong[]æ•°ç»„ï¼Œæ•°ç»„çš„å¤§å°ç”±bitSetæ¥æ”¶çš„æœ€å¤§æ•°å­—å†³å®šï¼Œè¿™ä¸ªæ•°ç»„å°†æ•°å­—åˆ†æ®µè¡¨ç¤º[0,63],[64,127],[128,191]â€¦ã€‚å³long[0]ç”¨æ¥å­˜å‚¨[0,63]è¿™ä¸ªèŒƒå›´çš„æ•°å­—çš„â€œå­˜åœ¨æ€§â€ï¼Œlong[1]ç”¨æ¥å­˜å‚¨[64,127]ï¼Œä¾æ¬¡è½®æ¨ï¼Œè¿™æ ·å°±é¿å…äº†ä½è¿ç®—å¯¼è‡´çš„å†²çªã€‚ æ•°å­—èŒƒå›´ [0,63] [64,127] [128,191] â€¦ longæ•°ç»„ç´¢å¼• 0 1 2 â€¦ bitSetå†…éƒ¨çš„long[]æ•°ç»„æ˜¯åŸºäºå‘é‡çš„ï¼Œå³éšç€setçš„æœ€å¤§æ•°å­—è€ŒåŠ¨æ€æ‰©å±•ã€‚æ•°ç»„çš„æœ€å¤§é•¿åº¦è®¡ç®—ï¼š 1(maxValue - 1) &gt;&gt; 6 + 1 BitSetä¸­setæ–¹æ³•ä¼ªä»£ç ï¼š 1234567public void set(int number) &#123; int index = number &gt;&gt; 6;//æ‰¾åˆ°numberéœ€è¦æ˜ å°„çš„æ•°ç»„çš„indexã€‚ if(index + 1 &gt; length) &#123; ensureCapacity(index + 1);//é‡æ–°æ‰©å±•long[]æ•°ç»„ &#125; long[index] |= (1L &lt;&lt; number);//å†²çªè§£å†³ &#125; ä½¿ç”¨BitSetæœ¬ä¾‹ä¸­ä½¿ç”¨bitSetåšStringå­—ç¬¦ä¸²çš„å­˜åœ¨æ€§æ ¡éªŒã€‚ 12345678910BitSet bitSet = new BitSet(Integer.MAX_VALUE);//hashcodeçš„å€¼åŸŸ //0x7FFFFFFF String url = "http://baidu.com/a"; int hashcode = url.hashCode() &amp; 0x7FFFFFFF; bitSet.set(hashcode); System.out.println(bitSet.cardinality());//ç€è‰²ä½çš„ä¸ªæ•° System.out.println(bitSet.get(hashcode));//æ£€æµ‹å­˜åœ¨æ€§ bitSet.clear(hashcode);//æ¸…é™¤ä½æ•°æ® BitSetä¸Hashcodeå†²çªå› ä¸ºBitSet APIåªèƒ½æ¥æ”¶intå‹çš„æ•°å­—ï¼Œå³åªèƒ½åˆ¤å®šintæ•°å­—æ˜¯å¦åœ¨bitSetä¸­å­˜åœ¨ã€‚æ‰€ä»¥ï¼Œå¯¹äºStringç±»å‹ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨å®ƒçš„hashcodeï¼Œä½†è¿™æœ‰ä¸€ç§éšæ‚£ï¼Œjavaä¸­hashcodeå­˜åœ¨å†²çªé—®é¢˜ï¼Œå³ä¸åŒçš„Stringå¯èƒ½å¾—åˆ°çš„hashcodeæ˜¯ä¸€æ ·çš„ï¼ˆå³ä½¿ä¸é‡å†™hashcodeæ–¹æ³•ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬ä¸èƒ½å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°â€œæ•°æ®æŠ–åŠ¨â€â€”ä¸åŒçš„hashcodeç®—æ³•ã€è¿è¡Œç¯å¢ƒã€bitSetå®¹é‡ï¼Œä¼šå¯¼è‡´åˆ¤æ–­çš„ç»“æœæœ‰æ‰€ä¸åŒã€‚æ¯”å¦‚Aã€Bè¿ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒä»¬çš„hashcodeä¸€æ ·ï¼Œå¦‚æœAåœ¨BitSetä¸­â€œç€è‰²â€(å€¼ä¸ºtrue)ï¼Œé‚£ä¹ˆæ£€æµ‹Bæ˜¯å¦åœ¨BitSetå­˜åœ¨æ—¶ï¼Œä¹Ÿä¼šå¾—åˆ°trueã€‚ è¿™ä¸ªé—®é¢˜è¯¥å¦‚ä½•è§£å†³æˆ–è€…ç¼“è§£å‘¢ï¼Ÿ è°ƒæ•´hashcodeç”Ÿæˆç®—æ³•ï¼šæˆ‘ä»¬å¯ä»¥å¯¹ä¸€ä¸ªStringä½¿ç”¨å¤šä¸ªhashcodeç®—æ³•ï¼Œç”Ÿæˆå¤šä¸ªhashcodeï¼Œç„¶ååœ¨åŒä¸€ä¸ªBitSetè¿›è¡Œå¤šæ¬¡â€œç€è‰²â€ï¼Œåœ¨åˆ¤æ–­å­˜åœ¨æ€§æ—¶ï¼Œåªæœ‰æ‰€æœ‰çš„ç€è‰²ä½ä¸ºtrueæ—¶ï¼Œæ‰åˆ¤å®šæˆåŠŸ 12345678String url = "http://baidu.com/a"; int hashcode1 = url.hashCode() &amp; 0x7FFFFFFF; bitSet.set(hashcode1); int hashcode2 = (url + "-seed-").hashCode() &amp; 0x7FFFFFFF; bitSet.set(hashcode2); System.out.println(bitSet.get(hashcode1) &amp;&amp; bitSet.get(hashcode2)); //ä¹Ÿå¯ä»¥åœ¨ä¸¤ä¸ªä¸åŒçš„bitSetä¸Šè¿›è¡Œ2æ¬¡â€œç€è‰²â€ï¼Œè¿™æ ·å†²çªæ€§æ›´å°ã€‚ä½†ä¼šæ¶ˆè€—åŒå€çš„å†…å­˜ å…¶å®æˆ‘ä»¬èƒ½å¤Ÿçœ‹å‡ºï¼Œè¿™ç§æ–¹å¼é™ä½äº†è¯¯åˆ¤çš„æ¦‚ç‡ã€‚ä½†æ˜¯å¦‚æœBitSetä¸­å­˜å‚¨äº†è¾ƒå¤šçš„æ•°å­—ï¼Œé‚£ä¹ˆäº’ç›¸è¦†ç›–ç€è‰²ï¼Œæœ€ç»ˆæ•°æ®å†²çªçš„å¯èƒ½æ€§ä¼šé€æ¸å¢åŠ ï¼Œæœ€ç»ˆä»ç„¶æœ‰ä¸€å®šæ¦‚ç‡çš„åˆ¤æ–­å¤±è¯¯ã€‚æ‰€ä»¥åœ¨hashcodeç®—æ³•çš„ä¸ªæ•°ä¸å®é™…Stringçš„ä¸ªæ•°ä¹‹é—´æœ‰ä¸€ä¸ªæƒè¡¡ï¼Œæˆ‘ä»¬å»ºè®®: â€œhashcodeç®—æ³•ä¸ªæ•° Stringå­—ç¬¦ä¸²çš„ä¸ªæ•°â€ &lt; Integer.MAX_VALUE 0.8 å¤šä¸ªBitSetå¹¶è¡Œä¿å­˜ï¼šæ”¹è‰¯1)ä¸­çš„å®ç°æ–¹å¼ï¼Œæˆ‘ä»¬ä»ç„¶ä½¿ç”¨å¤šä¸ªhashcodeç”Ÿæˆç®—æ³•ï¼Œä½†æ˜¯æ¯ä¸ªç®—æ³•ç”Ÿæˆçš„å€¼åœ¨ä¸åŒçš„BitSetä¸­ç€è‰²ï¼Œè¿™æ ·å¯ä»¥ä¿æŒæ¯ä¸ªBitSetçš„ç¨€ç–åº¦(é™ä½å†²çªçš„å‡ ç‡)ã€‚åœ¨å®é™…ç»“æœä¸Šï¼Œæ¯”1)çš„è¯¯åˆ¤ç‡æ›´ä½ï¼Œä½†æ˜¯å®ƒéœ€è¦é¢å¤–çš„å ç”¨æ›´å¤šçš„å†…å­˜ï¼Œæ¯•ç«Ÿæ¯ä¸ªBitSetéƒ½éœ€è¦å ç”¨å†…å­˜ã€‚è¿™ç§æ–¹å¼ï¼Œé€šå¸¸æ˜¯ç¼©å°hashcodeçš„å€¼åŸŸï¼Œé¿å…å†…å­˜è¿‡åº¦æ¶ˆè€—ã€‚ 1234567891011BitSet bitSet1 = new BitSet(Integer.MAX_VALUE);//127M BitSet bitSet2 = new BitSet(Integer.MAX_VALUE); String url = "http://baidu.com/a"; int hashcode1 = url.hashCode() &amp; 0x7FFFFFFF; bitSet1.set(hashcode1); int hashcode2 = (url + "-seed-").hashCode() &amp; 0x7FFFFFFF; bitSet2.set(hashcode2); System.out.println(bitSet1.get(hashcode1) &amp;&amp; bitSet2.get(hashcode2)); æ˜¯å¦æœ‰å¿…è¦å®Œå…¨é¿å…è¯¯åˆ¤ï¼Ÿå¦‚æœåšåˆ°100%çš„æ­£ç¡®åˆ¤æ–­ç‡ï¼Œåœ¨åŸç†ä¸Šè¯´BitSetæ˜¯æ— æ³•åšçš„ï¼ŒBitSetèƒ½å¤Ÿä¿è¯â€œå¦‚æœåˆ¤å®šç»“æœä¸ºfalseï¼Œé‚£ä¹ˆæ•°æ®ä¸€å®šæ˜¯ä¸å­˜åœ¨ï¼›ä½†æ˜¯å¦‚æœç»“æœä¸ºtrueï¼Œå¯èƒ½æ•°æ®å­˜åœ¨ï¼Œä¹Ÿå¯èƒ½ä¸å­˜åœ¨(å†²çªè¦†ç›–)â€,å³â€œfalse == YESï¼Œtrue == Maybeâ€ã€‚æœ‰äººæå‡ºå°†å†²çªçš„æ•°æ®ä¿å­˜åœ¨ç±»ä¼¼äºBTreeçš„é¢å¤–æ•°æ®ç»“æ„ä¸­ï¼Œäº‹å®ä¸Šè¿™ç§æ–¹å¼å¢åŠ äº†è®¾è®¡çš„å¤æ‚åº¦ï¼Œè€Œä¸”æœ€ç»ˆä»ç„¶æ²¡æœ‰è‰¯å¥½çš„è§£å†³å†…å­˜å ç”¨è¾ƒå¤§çš„é—®é¢˜ã€‚ BloomFilter(å¸ƒéš†å§†è¿‡æ»¤å™¨)BloomFilter çš„è®¾è®¡æ€æƒ³å’ŒBitSetæœ‰è¾ƒå¤§çš„ç›¸ä¼¼æ€§ï¼Œç›®çš„ä¹Ÿä¸€è‡´ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³ä¹Ÿæ˜¯ä½¿ç”¨å¤šä¸ªHashç®—æ³•åœ¨ä¸€ä¸ªâ€œä½å›¾â€ç»“æ„ä¸Šç€è‰²ï¼Œæœ€ç»ˆæé«˜â€œå­˜åœ¨æ€§â€åˆ¤æ–­çš„æ•ˆç‡ã€‚è¯·å‚è§Guava BloomFilterã€‚å¦‚ä¸‹ä¸ºä»£ç æ ·ä¾‹ï¼š 12345Charset charset = Charset.forName("utf-8"); BloomFilter&lt;String&gt; bloomFilter = BloomFilter.create(Funnels.stringFunnel(charset),2&lt;&lt;21);//æŒ‡å®šbloomFilterçš„å®¹é‡ String url = "www.baidu.com/a"; bloomFilter.put(url); System.out.println(bloomFilter.mightContain(url)); å†…å­˜æ¶ˆè€—æ®ä¸Šæ‰€è¿°ï¼ŒBitSetå¯ä»¥æœ‰æ•ˆçš„é™ä½å†…å­˜çš„ä½¿ç”¨é‡ï¼Œä½†æ˜¯å®ƒçš„å†…å­˜ä½¿ç”¨é‡æ˜¯æœ‰å†…éƒ¨longæ•°ç»„çš„å¤§å°å†³å®šï¼Œæ‰€ä»¥åœ¨åˆ›å»ºBitSetæ—¶æŒ‡å®šçš„å€¼åŸŸéå¸¸é‡è¦ï¼Œè¿‡å¤§çš„å€¼åŸŸå°†ä¼šå¯¼è‡´OOMï¼ˆæ¯”å¦‚æŒ‡å®šLong.MAX_VALUEï¼‰,åœ¨ä¸€ä¸ªBitMapä¸Šå­˜å‚¨Integer.MAX_VALUEä¸ªâ€œç€è‰²â€ï¼ˆæ³¨æ„ï¼ŒBitSetåªèƒ½å¯¹æ­£æ•°æ“ä½œï¼‰ï¼Œå¤§æ¦‚æ¶ˆè€—128Må†…å­˜ã€‚ è½¬è‡ªï¼šhttps://shift-alt-ctrl.iteye.com/blog/2194519]]></content>
      <categories>
        <category>java</category>
        <category>å…¶ä»–</category>
      </categories>
      <tags>
        <tag>BitSet</tag>
        <tag>å¤§æ•°æ®é‡</tag>
        <tag>hashcode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®ç°Trieå‰ç¼€æ ‘]]></title>
    <url>%2F2019%2F03%2F02%2F%E5%AE%9E%E7%8E%B0Trie%E5%89%8D%E7%BC%80%E6%A0%91%2F</url>
    <content type="text"><![CDATA[Javaéé€’å½’ç‰ˆ â€‹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253class Trie &#123; private class Node&#123; boolean isTrie; Map&lt;Character, Node&gt; children = new HashMap&lt;&gt;(); &#125; private Node root = new Node(); /** Initialize your data structure here. */ public Trie() &#123; &#125; /** Inserts a word into the trie. */ public void insert(String word) &#123; Node node = root; for(int i=0; i&lt;word.length(); i++)&#123; char c = word.charAt(i); if(!node.children.containsKey(c))&#123; node.children.put(c, new Node()); &#125; node = node.children.get(c); &#125; node.isTrie = true; return; &#125; /** Returns if the word is in the trie. */ public boolean search(String word) &#123; Node node = root; for(int i=0; i&lt;word.length(); i++)&#123; char c = word.charAt(i); Node temp = node.children.get(c); if(temp == null) return false; node = temp; &#125; return node.isTrie; &#125; /** Returns if there is any word in the trie that starts with the given prefix. */ public boolean startsWith(String prefix) &#123; Node node = root; for(int i=0; i&lt;prefix.length(); i++)&#123; char c = prefix.charAt(i); Node temp = node.children.get(c); if(temp == null) return false; node = temp; &#125; return node!=null; &#125;&#125; â€‹ å…³äºTrie æ ¸å¿ƒæ€æƒ³ï¼šç©ºé—´æ¢å–æ—¶é—´ Trie æ ‘åˆå«åˆå«å­—å…¸æ ‘ã€å‰ç¼€æ ‘ã€å•è¯æŸ¥æ‰¾æ ‘ï¼Œå®ƒæ˜¯ä¸€é¢—å¤šå‰æŸ¥æ‰¾æ ‘ã€‚ä¸äºŒå‰æŸ¥æ‰¾æ ‘ä¸åŒï¼Œé”®ä¸æ˜¯ç›´æ¥ä¿å­˜åœ¨èŠ‚ç‚¹ä¸­ï¼Œè€Œæ˜¯ç”±èŠ‚ç‚¹åœ¨æ ‘ä¸­çš„ä½ç½®å†³å®šã€‚ å¦‚æœ æµ·é‡æ•°æ® æ˜¯å­—ç¬¦ä¸²æ•°æ®ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç”¨å¾ˆå°çš„ç©ºé—´å¼€é”€æ„å»ºä¸€é¢— Trie æ ‘ï¼Œç©ºé—´å¼€é”€å’Œæ ‘é«˜æœ‰å…³ã€‚ {â€œaâ€, â€œtoâ€, â€œteaâ€, â€œtedâ€, â€œtenâ€, â€œiâ€, â€œinâ€, â€œinnâ€} åŸºæœ¬æ€§è´¨ï¼š æ ¹èŠ‚ç‚¹ä¸åŒ…å«å­—ç¬¦ï¼Œé™¤æ ¹èŠ‚ç‚¹å¤–çš„æ¯ä¸€ä¸ªå­èŠ‚ç‚¹éƒ½åŒ…å«ä¸€ä¸ªå­—ç¬¦ã€‚ ä»æ ¹èŠ‚ç‚¹åˆ°æŸä¸€ä¸ªèŠ‚ç‚¹ï¼Œè·¯å¾„ä¸Šç»è¿‡çš„å­—ç¬¦è¿æ¥èµ·æ¥ï¼Œä¸ºè¯¥èŠ‚ç‚¹å¯¹åº”çš„å­—ç¬¦ä¸²ã€‚ æ¯ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹åŒ…å«çš„å­—ç¬¦äº’ä¸ç›¸åŒã€‚ ä¼˜ç‚¹ æ’å…¥å’ŒæŸ¥è¯¢æ•ˆç‡å¾ˆé«˜ï¼Œéƒ½æ˜¯O(m)ï¼Œmæ˜¯å¾…æ’å…¥/æŸ¥è¯¢å­—ç¬¦ä¸²é•¿åº¦ï¼›ï¼ˆå…³äºæŸ¥è¯¢ï¼Œä¼šæœ‰äººè®¤ä¸ºhashè¡¨æ—¶é—´å¤æ‚åº¦O(1)ä¸æ˜¯æ›´å¿«ï¼Ÿç¡®å®ï¼Œä½†æ˜¯å“ˆå¸Œæœç´¢çš„æ•ˆç‡é€šå¸¸å–å†³äºhashå‡½æ•°çš„å¥½åï¼Œå› ä¸ºè¿™å†³å®šç€å†²çªçš„æ¦‚ç‡ï¼‰ã€‚ Trieæ ‘ä¸­ä¸åŒå…³é”®å­—ä¸ä¼šå†²çªï¼› å¯ä»¥å¯¹å…³é”®å­—æŒ‰å­—å…¸æ’åºã€‚ ç¼ºç‚¹ å½“hashå‡½æ•°å¾ˆå¥½æ—¶ï¼ŒTrieæ ‘çš„æŸ¥æ‰¾æ•ˆç‡ä¼šä½äºå“ˆå¸ŒæŸ¥æ‰¾ï¼› ç©ºé—´æ¶ˆè€—æ¯”è¾ƒå¤§ã€‚ ä¸»è¦åº”ç”¨ï¼šå­—ç¬¦ä¸²æ£€ç´¢ã€è¯é¢‘ç»Ÿè®¡ã€å­—ç¬¦ä¸²æ’åºã€å‰ç¼€åŒ¹é…ç­‰]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>å‰ç¼€æ ‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é‡æ–°æ’åºå¾—åˆ°2çš„å¹‚]]></title>
    <url>%2F2019%2F03%2F02%2F%E9%87%8D%E6%96%B0%E6%8E%92%E5%BA%8F%E5%BE%97%E5%88%B02%E7%9A%84%E5%B9%82%2F</url>
    <content type="text"><![CDATA[ğŸ˜é¢˜ç›®æè¿°ä»æ­£æ•´æ•° N å¼€å§‹ï¼Œæˆ‘ä»¬æŒ‰ä»»ä½•é¡ºåºï¼ˆåŒ…æ‹¬åŸå§‹é¡ºåºï¼‰å°†æ•°å­—é‡æ–°æ’åºï¼Œæ³¨æ„å…¶å‰å¯¼æ•°å­—ä¸èƒ½ä¸ºé›¶ã€‚å¦‚æœæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸Šè¿°æ–¹å¼å¾—åˆ° 2 çš„å¹‚ï¼Œè¿”å› trueï¼›å¦åˆ™ï¼Œè¿”å›falseã€‚ ğŸ˜˜è§£é¢˜æ€è·¯ å…ˆå°†æ•°å€¼Nä¸­çš„æ¯ä¸ªæ•°å­—ç‹¬ç«‹å­˜å‚¨å¹¶æ’åºä¸ºlistï¼Œé•¿åº¦è®°ä½œnï¼›åœ¨2çš„å¹‚ä¸­æ‰¾å‡ºé•¿åº¦ä¸ºnçš„æ‰€æœ‰æ•°å€¼ï¼Œå¹¶åŒæ ·å¯¹æ¯ä¸ªæ•°å­—å­˜å‚¨æ’åº,å¾—åˆ°list2ï¼Œåˆ¤æ–­listä¸list2æ˜¯å¦é€ä½ç›¸ç­‰ å¯¹äº2çš„å¹‚çš„æ­£æ•´æ•°ï¼Œæœ‰ä¸ªè§„å¾‹ï¼šä½æ•°æ¯éš”3éƒ½æœ‰å¯¹åº”çš„æ•´æ•°ä¸ªæ•°4ã€3ã€3ï¼Œ ä½æ•° ä¸ªæ•° æ•´æ•° å¹‚æŒ‡æ•° 1 4 1ï¼Œ2ï¼Œ4ï¼Œ8 0ï¼Œ1ï¼Œ2ï¼Œ3 2 3 16ï¼Œ32ï¼Œ64 4ï¼Œ5ï¼Œ6 3 3 128ï¼Œ256ï¼Œ512 7ï¼Œ8ï¼Œ9 4 4 1024ï¼Œ2048ï¼Œ4096ï¼Œ8192 10ï¼Œ11ï¼Œ12ï¼Œ13 5 3 16384ï¼Œ32768ï¼Œ65536 14ï¼Œ15ï¼Œ16 6 3 â€¦. 17ï¼Œ18ï¼Œ19 7 4 â€¦ 20ï¼Œ21ï¼Œ22ï¼Œ23 8 3 â€¦ 24ï¼Œ25ï¼Œ26 9 3 â€¦ 27ï¼Œ28ï¼Œ29 â€¦ â€¦ â€¦ â€¦ ğŸ˜±ç¤ºä¾‹ä»£ç â€‹1234567891011121314151617181920212223242526272829class Solution &#123; public boolean reorderedPowerOf2(int N) &#123; String num = N+""; int len = num.length(); int n;//ä½æ•°ä¸ºlençš„æ•´æ•°ï¼ˆ2çš„å¹‚)çš„ä¸ªæ•° int m;//ä½æ•°ä¸ºlençš„æ•´æ•°çš„å¹‚æŒ‡æ•° if(len%3 == 0)&#123; m = (len/3)*10-3; n = 3; &#125;else if(len%3 == 1)&#123; m = (len/3)*10; n = 4; &#125;else&#123; m = (len/3)*10+4; n = 3; &#125; String[] pows = new String[n]; for(int i=0; i&lt;n; i++)&#123; pows[i] = (int)Math.pow(2, m+i) + ""; char[] powlist = pows[i].toCharArray(); Arrays.sort(powlist); char[] numlist = num.toCharArray(); Arrays.sort(numlist); if(Arrays.equals(powlist, numlist)) return true; &#125; return false; &#125;&#125;]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>æ‰¾è§„å¾‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¿›ç¨‹é€šä¿¡]]></title>
    <url>%2F2019%2F03%2F01%2F%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%2F</url>
    <content type="text"><![CDATA[å¯¹è¿›ç¨‹é€šä¿¡çš„ç†è§£è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œæ‰€ä»¥è¯´æŸå—èµ„æºåˆ†é…ç»™ä¸€ä¸ªè¿›ç¨‹åï¼Œè¯¥èµ„æºåªèƒ½æ˜¯è¯¥è¿›ç¨‹ç‹¬å ï¼Œæ‰€ä»¥è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡å°±ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œå› ä¸ºéœ€è¦è®©ä¸åŒçš„è¿›ç¨‹é—´èƒ½å¤Ÿçœ‹åˆ°ä¸€ä»½å…¬å…±çš„èµ„æºã€‚æ‰€ä»¥äº¤æ¢æ•°æ®å¿…é¡»é€šè¿‡å†…æ ¸ï¼Œåœ¨å†…æ ¸ä¸­å¼€è¾Ÿä¸€å—ç¼“å†²åŒºï¼Œè¿›ç¨‹1æŠŠæ•°æ®ä»ç”¨æˆ·ç©ºé—´æ‹·åˆ°å†…æ ¸ç¼“å†²åŒºï¼Œè¿›ç¨‹2å†ä»å†…æ ¸ç¼“å†²åŒºæŠŠæ•°æ®è¯»èµ°ï¼Œå†…æ ¸æä¾›çš„è¿™ç§æœºåˆ¶ç§°ä¸ºè¿›ç¨‹é—´é€šä¿¡ã€‚ å®ç°è¿›ç¨‹é€šä¿¡çš„æ–¹å¼åŒ¿åç®¡é“ï¼ˆpipeï¼‰ ç®¡é“æ˜¯é€šè¿‡è°ƒç”¨ pipe å‡½æ•°åˆ›å»ºçš„ï¼Œæ˜¯åœ¨å†…æ ¸ä¸­å¼€è¾Ÿå‡ºçš„ä¸€å—ç¼“å†²åŒºï¼Œfd[0] ç”¨äºè¯»ï¼Œfd[1] ç”¨äºå†™ã€‚ åªæ”¯æŒåŠåŒå·¥é€šä¿¡ï¼ˆå•å‘äº¤æ›¿ä¼ è¾“ï¼‰ï¼› åªèƒ½åœ¨çˆ¶å­è¿›ç¨‹ä¸­ä½¿ç”¨ã€‚ çˆ¶è¿›ç¨‹å…³é—­è¯»ç«¯ï¼ˆfd[0]ï¼‰,å­è¿›ç¨‹å…³é—­å†™ç«¯(fd[1])ï¼Œåˆ™æ­¤æ—¶çˆ¶è¿›ç¨‹å¯ä»¥å¾€ç®¡é“ä¸­è¿›è¡Œå†™æ“ä½œï¼Œå­è¿›ç¨‹å¯ä»¥ä»ç®¡é“ä¸­è¯»ï¼Œä»è€Œå®ç°äº†é€šè¿‡ç®¡é“çš„è¿›ç¨‹é—´é€šä¿¡ ç¤ºä¾‹ä»£ç â€‹123456789101112131415161718192021222324252627282930313233343536373839#include&lt;stdio.h&gt;#include&lt;unistd.h&gt;#include&lt;string.h&gt;int main()&#123; int fd[2]; int ret = pipe(fd); //å¼€å¯åŒ¿åç®¡é“ if(ret&lt;0) perror("pipe\n"); //å¼€å¯å¤±è´¥ pid_t id = fork(); //åˆ›å»ºå­è¿›ç¨‹ if(id&lt;0) perror("fork\n"); //åˆ›å»ºå¤±è´¥ else if(id==0)&#123; //å­è¿›ç¨‹ close(fd[0]); //å­è¿›ç¨‹å…³é—­è¯»ç«¯ int i=0; char *mesg = NULL; while(i&lt;100)&#123; mesg = "child"; write(fd[1], mesg, strlen(mesg)+1); //å‘ç®¡é“å¦ä¸€ç«¯å†™æ•°æ® sleep(1); i++; &#125; &#125; else&#123; //çˆ¶è¿›ç¨‹ close(fd[1]); //çˆ¶è¿›ç¨‹å…³é—­å†™ç«¯ int i=0; char mesg[100]; while(i&lt;100)&#123; memset(mesg, '\0', sizeof(mesg)); read(fd[0], mesg, sizeof(mesg)); //ä»ç®¡é“å¦ä¸€ç«¯è¯»æ•°æ® printf("%s\n", mesg); j++; &#125; &#125; return 0;&#125; â€‹ å‘½åç®¡é“ï¼ˆFIFOï¼‰ å‘½åç®¡é“ï¼Œå»é™¤äº†ç®¡é“åªèƒ½åœ¨çˆ¶å­è¿›ç¨‹ä¸­ä½¿ç”¨çš„é™åˆ¶ã€‚ å‘½åç®¡é“åˆ›å»ºåå°±å¯ä»¥ä½¿ç”¨äº†ï¼Œä½¿ç”¨æ–¹æ³•å’ŒåŒ¿åç®¡é“åŸºæœ¬ç›¸åŒã€‚åªæ˜¯ä½¿ç”¨å‘½åç®¡é“æ—¶ï¼Œå¿…é¡»å…ˆè°ƒç”¨open()å°†å…¶æ‰“å¼€ï¼Œå› ä¸ºå‘½åç®¡é“æ˜¯ä¸€ä¸ªå­˜åœ¨äºç¡¬ç›˜çš„æ–‡ä»¶ï¼Œè€ŒåŒ¿åç®¡é“æ˜¯å­˜åœ¨äºå†…å­˜ä¸­çš„ç‰¹æ®Šæ–‡ä»¶ è°ƒç”¨open()æ‰“å¼€å‘½åç®¡é“çš„è¿›ç¨‹å¯èƒ½ä¼šè¢«é˜»å¡ã€‚ä½†å¦‚æœåŒæ—¶ç”¨è¯»å†™æ–¹å¼ï¼ˆ O_RDWRï¼‰æ‰“å¼€ï¼Œåˆ™ä¸€å®šä¸ä¼šå¯¼è‡´é˜»å¡ï¼›å¦‚æœä»¥åªè¯»æ–¹å¼ï¼ˆ O_RDONLYï¼‰æ‰“å¼€ï¼Œåˆ™è°ƒç”¨open()å‡½æ•°çš„è¿›ç¨‹å°†ä¼šè¢«é˜»å¡ç›´åˆ°æœ‰å†™æ–¹æ‰“å¼€ç®¡é“ï¼›åŒæ ·ä»¥å†™æ–¹å¼ï¼ˆ O_WRONLYï¼‰æ‰“å¼€ä¹Ÿä¼šé˜»å¡ç›´åˆ°æœ‰è¯»æ–¹å¼æ‰“å¼€ç®¡é“ã€‚ ç¤ºä¾‹ä»£ç  ğŸ˜œClient.cæ–‡ä»¶ï¼Œå‘ç®¡é“å†™æ•°æ® 1234567891011121314151617181920212223242526272829303132#include&lt;stdio.h&gt;#include&lt;unistd.h&gt;#include&lt;sys/types.h&gt;#include&lt;string.h&gt;#include&lt;sys/stat.h&gt;#include&lt;fcntl.h&gt;#define _PATH_NAME_ "/tmp/file.tmp"#define _SIZE_ 100 int main()&#123; int ret=mkfifo(_PATH_NAME_,S_IFIFO|0666); //ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‘½åç®¡é“å­˜å‚¨è·¯å¾„ï¼Œç¬¬äºŒä¸ªæ˜¯å‘½åç®¡é“çš„å­˜å–æƒé™ if(ret==-1)&#123; printf("make fifo error\n"); return 1; &#125; char buf[_SIZE_]; memset(buf,'\0',sizeof(buf)); int fd=open(_PATH_NAME_,O_WRONLY); //æ‰“å¼€å‘½åç®¡é“ï¼Œå› ä¸ºå…¶æ˜¯ç¡¬ç›˜ä¸Šçš„æ–‡ä»¶ while(1) &#123; //scanf("%s",buf); fgets(buf,sizeof(buf)-1,stdin); int ret=write(fd,buf,strlen(buf)+1); if(ret&lt;0)&#123; printf("write error"); break; &#125; &#125; close(fd); return 0;&#125; ğŸ˜œServer.cæ–‡ä»¶ï¼Œä»ç®¡é“è¯»æ•°æ®å¹¶è¾“å‡º 123456789101112131415161718192021222324252627#include&lt;stdio.h&gt;#include&lt;sys/stat.h&gt;#include&lt;unistd.h&gt;#include&lt;fcntl.h&gt;#include&lt;sys/types.h&gt;#include&lt;string.h&gt;#define _PATH_NAME "/tmp/file.tmp"#define _SIZE_ 100int main()&#123; int fd=open(_PATH_NAME,O_RDONLY); if(fd&lt;0)&#123; printf("open file error"); return 1; &#125; char buf[_SIZE_]; memset(buf,'\0',sizeof(buf)); while(1)&#123; int ret=read(fd,buf,sizeof(buf)); if(ret&lt;0)&#123; printf("read end or error\n"); break; &#125; printf("%s",buf); &#125; close(fd); return 0;&#125; æ¶ˆæ¯é˜Ÿåˆ— æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥ç‹¬ç«‹äºè¯»å†™è¿›ç¨‹å­˜åœ¨ï¼Œä»è€Œé¿å…äº†FIFOä¸­ä¸ºäº†åŒæ­¥ç®¡é“çš„æ‰“å¼€å’Œå…³é—­å¯èƒ½äº§ç”Ÿçš„å›°éš¾ï¼› é¿å…äº†FIFOçš„åŒæ­¥é˜»å¡é—®é¢˜ï¼Œä¸éœ€è¦è¿›ç¨‹è‡ªå·±æä¾›åŒæ­¥æ–¹æ³•ï¼› è¯»è¿›ç¨‹å¯ä»¥æ ¹æ®æ¶ˆæ¯ç±»å‹æœ‰é€‰æ‹©åœ°æ¥æ”¶æ¶ˆæ¯ï¼Œè€Œä¸åƒFIFOé‚£æ ·åªèƒ½é»˜è®¤åœ°æ¥æ”¶. 1234int msgget(key_t key, int msgflg);ssize_t msgrcv(int msqid, void *msgp, size_t msgsz, long msgtyp, int msgflg);int msgsnd(int msqid, const void *msgp, size_t msgsz, int msgflg);int msgctl ( int msgqid, int cmd, struct msqid_ds *buf ); åˆ›å»ºæ¶ˆæ¯é˜Ÿåˆ—ç”¨ç³»ç»Ÿè°ƒç”¨msgget()æ¥å®ç°ï¼Œè¿™ä¸€æ­¥å·¥ä½œä¹Ÿè¢«ç§°ä¸ºæ¶ˆæ¯é˜Ÿåˆ—çš„åˆå§‹åŒ–ã€‚ åœ¨è¿›è¡Œé€šä¿¡æ—¶ï¼Œæ¶ˆæ¯é˜Ÿåˆ—çš„å‘é€å’Œæ¥æ”¶åˆ†åˆ«ç”¨ç³»ç»Ÿè°ƒç”¨msgsnd()å’Œmsgrcv()æ¥å®ç°.ã€‚ åœ¨éœ€è¦æ”¹å˜é˜Ÿåˆ—çš„ä½¿ç”¨æƒé™åŠå…¶å®ƒä¸€äº›ç‰¹æ€§æ—¶ï¼Œç”¨msgclt()æ¥å®ç°ã€‚ ç¤ºä¾‹ä»£ç ï¼ˆæ¥è‡ª https://blog.csdn.net/ljianhui/article/details/10287879ï¼‰ ğŸ˜˜msgreceive.c 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &lt;errno.h&gt;#include &lt;sys/msg.h&gt; struct msg_st&#123; long int msg_type; char text[BUFSIZ];&#125;; int main()&#123; int running = 1; int msgid = -1; struct msg_st data; long int msgtype = 0; //æ³¨æ„1 //å»ºç«‹æ¶ˆæ¯é˜Ÿåˆ— msgid = msgget((key_t)1234, 0666 | IPC_CREAT); if(msgid == -1) &#123; fprintf(stderr, "msgget failed with error: %d\n", errno); exit(EXIT_FAILURE); &#125; //ä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯ï¼Œç›´åˆ°é‡åˆ°endæ¶ˆæ¯ä¸ºæ­¢ while(running) &#123; if(msgrcv(msgid, (void*)&amp;data, BUFSIZ, msgtype, 0) == -1) &#123; fprintf(stderr, "msgrcv failed with errno: %d\n", errno); exit(EXIT_FAILURE); &#125; printf("You wrote: %s\n",data.text); //é‡åˆ°endç»“æŸ if(strncmp(data.text, "end", 3) == 0) running = 0; &#125; //åˆ é™¤æ¶ˆæ¯é˜Ÿåˆ— if(msgctl(msgid, IPC_RMID, 0) == -1) &#123; fprintf(stderr, "msgctl(IPC_RMID) failed\n"); exit(EXIT_FAILURE); &#125; exit(EXIT_SUCCESS);&#125; ğŸ˜˜msgsend.cæ–‡ä»¶ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &lt;sys/msg.h&gt;#include &lt;errno.h&gt; #define MAX_TEXT 512struct msg_st&#123; long int msg_type; char text[MAX_TEXT];&#125;; int main()&#123; int running = 1; struct msg_st data; char buffer[BUFSIZ]; int msgid = -1; //å»ºç«‹æ¶ˆæ¯é˜Ÿåˆ— msgid = msgget((key_t)1234, 0666 | IPC_CREAT); if(msgid == -1) &#123; fprintf(stderr, "msgget failed with error: %d\n", errno); exit(EXIT_FAILURE); &#125; //å‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­å†™æ¶ˆæ¯ï¼Œç›´åˆ°å†™å…¥end while(running) &#123; //è¾“å…¥æ•°æ® printf("Enter some text: "); fgets(buffer, BUFSIZ, stdin); data.msg_type = 1; //æ³¨æ„2 strcpy(data.text, buffer); //å‘é˜Ÿåˆ—å‘é€æ•°æ® if(msgsnd(msgid, (void*)&amp;data, MAX_TEXT, 0) == -1) &#123; fprintf(stderr, "msgsnd failed\n"); exit(EXIT_FAILURE); &#125; //è¾“å…¥endç»“æŸè¾“å…¥ if(strncmp(buffer, "end", 3) == 0) running = 0; sleep(1); &#125; exit(EXIT_SUCCESS);&#125; ä¿¡å·é‡ å®ƒæ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºä¸ºå¤šä¸ªè¿›ç¨‹æä¾›å¯¹å…±äº«æ•°æ®å¯¹è±¡çš„è®¿é—® semget()ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°ä¿¡å·é‡æˆ–è¿”å›ä¸€ä¸ªå·²æœ‰ä¿¡å·é‡ï¼ˆæ ¹æ®IPCkeyï¼‰ semop()ç”¨äºæ”¹å˜ä¿¡å·é‡çš„å€¼ï¼Œç”¨äºå¯¹ä¿¡å·é‡å¢å‡æ“ä½œï¼Œå³PVæ“ä½œ semclt()ç”¨äºç›´æ¥æ§åˆ¶ä¿¡å·é‡çš„å€¼ï¼Œç”¨äºå¯¹ä¿¡å·é‡åˆå§‹åŒ–æ“ä½œ 123int semget(key_t key, int num_sems, int sem_flags);int semop(int sem_id, struct sembuf *sem_opa, size_t num_sem_ops);int semctl(int sem_id, int sem_num, int command, ...); ç¤ºä¾‹ä»£ç ï¼ˆæ¥è‡ª https://blog.csdn.net/ljianhui/article/details/10243617ï¼‰123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;#include &lt;stdlib.h&gt;#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &lt;sys/sem.h&gt; union semun&#123; int val; struct semid_ds *buf; unsigned short *arry;&#125;; static int sem_id = 0; static int set_semvalue();static void del_semvalue();static int semaphore_p();static int semaphore_v(); int main(int argc, char *argv[])&#123; char message = 'X'; int i = 0; //åˆ›å»ºä¿¡å·é‡ sem_id = semget((key_t)1234, 1, 0666 | IPC_CREAT); if(argc &gt; 1) &#123; //ç¨‹åºç¬¬ä¸€æ¬¡è¢«è°ƒç”¨ï¼Œåˆå§‹åŒ–ä¿¡å·é‡ if(!set_semvalue()) &#123; fprintf(stderr, "Failed to initialize semaphore\n"); exit(EXIT_FAILURE); &#125; //è®¾ç½®è¦è¾“å‡ºåˆ°å±å¹•ä¸­çš„ä¿¡æ¯ï¼Œå³å…¶å‚æ•°çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ message = argv[1][0]; sleep(2); &#125; for(i = 0; i &lt; 10; ++i) &#123; //è¿›å…¥ä¸´ç•ŒåŒº if(!semaphore_p()) exit(EXIT_FAILURE); //å‘å±å¹•ä¸­è¾“å‡ºæ•°æ® printf("%c", message); //æ¸…ç†ç¼“å†²åŒºï¼Œç„¶åä¼‘çœ éšæœºæ—¶é—´ fflush(stdout); sleep(rand() % 3); //ç¦»å¼€ä¸´ç•ŒåŒºå‰å†ä¸€æ¬¡å‘å±å¹•è¾“å‡ºæ•°æ® printf("%c", message); fflush(stdout); //ç¦»å¼€ä¸´ç•ŒåŒºï¼Œä¼‘çœ éšæœºæ—¶é—´åç»§ç»­å¾ªç¯ if(!semaphore_v()) exit(EXIT_FAILURE); sleep(rand() % 2); &#125; sleep(10); printf("\n%d - finished\n", getpid()); if(argc &gt; 1) &#123; //å¦‚æœç¨‹åºæ˜¯ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨ï¼Œåˆ™åœ¨é€€å‡ºå‰åˆ é™¤ä¿¡å·é‡ sleep(3); del_semvalue(); &#125; exit(EXIT_SUCCESS);&#125; static int set_semvalue()&#123; //ç”¨äºåˆå§‹åŒ–ä¿¡å·é‡ï¼Œåœ¨ä½¿ç”¨ä¿¡å·é‡å‰å¿…é¡»è¿™æ ·åš union semun sem_union; sem_union.val = 1; if(semctl(sem_id, 0, SETVAL, sem_union) == -1) return 0; return 1;&#125; static void del_semvalue()&#123; //åˆ é™¤ä¿¡å·é‡ union semun sem_union; if(semctl(sem_id, 0, IPC_RMID, sem_union) == -1) fprintf(stderr, "Failed to delete semaphore\n");&#125; static int semaphore_p()&#123; //å¯¹ä¿¡å·é‡åšå‡1æ“ä½œï¼Œå³ç­‰å¾…Pï¼ˆsvï¼‰ struct sembuf sem_b; sem_b.sem_num = 0; sem_b.sem_op = -1;//P() sem_b.sem_flg = SEM_UNDO; if(semop(sem_id, &amp;sem_b, 1) == -1) &#123; fprintf(stderr, "semaphore_p failed\n"); return 0; &#125; return 1;&#125; static int semaphore_v()&#123; //è¿™æ˜¯ä¸€ä¸ªé‡Šæ”¾æ“ä½œï¼Œå®ƒä½¿ä¿¡å·é‡å˜ä¸ºå¯ç”¨ï¼Œå³å‘é€ä¿¡å·Vï¼ˆsvï¼‰ struct sembuf sem_b; sem_b.sem_num = 0; sem_b.sem_op = 1;//V() sem_b.sem_flg = SEM_UNDO; if(semop(sem_id, &amp;sem_b, 1) == -1) &#123; fprintf(stderr, "semaphore_v failed\n"); return 0; &#125; return 1;&#125; å…±äº«å†…å­˜ å…è®¸å¤šä¸ªè¿›ç¨‹å…±äº«ä¸€ä¸ªç»™å®šçš„å­˜å‚¨åŒº å› ä¸ºæ•°æ®ä¸éœ€è¦è¿›ç¨‹ä¹‹é—´çš„å¤åˆ¶ï¼Œè€Œæ˜¯ç›´æ¥è®¿é—®å†…å­˜ï¼Œæ‰€ä»¥è¿™æ˜¯æœ€å¿«çš„ä¸€ç§IPCã€‚ ç”±äºå…±äº«å†…å­˜å¹¶ä¸æä¾›åŒæ­¥æ“ä½œï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨å…±äº«å†…å­˜è¿™ç§é€šä¿¡æ–¹å¼æ—¶ï¼Œéœ€è¦å€ŸåŠ©å…¶ä»–æ‰‹æ®µè¿›è¡Œè¿›ç¨‹é—´çš„åŒæ­¥å·¥ä½œï¼Œå¯ä»¥ä½¿ç”¨ä¿¡å·é‡ç­‰ shmget()ç”¨æ¥åˆ›å»ºå…±äº«å†…å­˜ï¼Œè¿”å›ä¸€ä¸ªä¸keyç›¸å…³çš„å…±äº«å†…å­˜æ ‡è¯†ç¬¦ shmat()ç”¨æ¥å¯åŠ¨å¯¹å…±äº«å†…å­˜çš„è®¿é—®ï¼Œå¹¶æŠŠå…±äº«å†…å­˜è¿æ¥åˆ°å½“å‰è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼ˆç¬¬ä¸€æ¬¡åˆ›å»ºå®Œå…±äº«å†…å­˜æ—¶ï¼Œè¿˜ä¸èƒ½è¢«ä»»ä½•è¿›ç¨‹è®¿é—®ï¼‰ï¼Œè¿”å›æŒ‡å‘å…±äº«å†…å­˜çš„æŒ‡é’ˆ shmclt()ç”¨æ¥æ§åˆ¶å…±äº«å†…å­˜ï¼Œä¸ä¿¡å·é‡çš„semclt()å‡½æ•°ä¸€æ · shmdt()ç”¨äºå°†å…±äº«å†…å­˜ä»å½“å‰è¿›ç¨‹ä¸­åˆ†ç¦»ï¼Œæ³¨æ„åˆ†ç¦»ä¸ç­‰äºåˆ é™¤å…±äº«å†…å­˜ 1234int shmget(key_t key, size_t size, int shmflg);void *shmat(int shm_id, const void *shm_addr, int shmflg);int shmctl(int shm_id, int command, struct shmid_ds *buf);int shmdt(const void *shmaddr); ç¤ºä¾‹ä»£ç ï¼ˆæ¥è‡ª https://blog.csdn.net/ljianhui/article/details/10253345ï¼‰ ğŸ˜€shmdata.hæ–‡ä»¶ï¼Œå®šä¹‰å…±äº«å†…å­˜ç»“æ„ 12345678910//shmdata.hæ–‡ä»¶ï¼Œå®šä¹‰å…±äº«å†…å­˜ç»“æ„#ifndef _SHMDATA_H_HEADER#define _SHMDATA_H_HEADER #define TEXT_SZ 2048struct shared_use_st&#123; int written;//ä½œä¸ºä¸€ä¸ªæ ‡å¿—ï¼Œé0ï¼šè¡¨ç¤ºå¯è¯»ï¼Œ0è¡¨ç¤ºå¯å†™ char text[TEXT_SZ];//è®°å½•å†™å…¥å’Œè¯»å–çš„æ–‡æœ¬&#125;;#endif ğŸ˜€shmread.cæ–‡ä»¶ï¼Œåˆ›å»ºå…±äº«å†…å­˜ï¼Œå¹¶è¯»å–å…¶ä¸­ä¿¡æ¯ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;stdio.h&gt;#include &lt;sys/shm.h&gt;#include "shmdata.h" int main()&#123; int running = 1;//ç¨‹åºæ˜¯å¦ç»§ç»­è¿è¡Œçš„æ ‡å¿— void *shm = NULL;//åˆ†é…çš„å…±äº«å†…å­˜çš„åŸå§‹é¦–åœ°å€ struct shared_use_st *shared;//æŒ‡å‘shm int shmid;//å…±äº«å†…å­˜æ ‡è¯†ç¬¦ //åˆ›å»ºå…±äº«å†…å­˜ shmid = shmget((key_t)1234, sizeof(struct shared_use_st), 0666|IPC_CREAT); if(shmid == -1) &#123; fprintf(stderr, "shmget failed\n"); exit(EXIT_FAILURE); &#125; //å°†å…±äº«å†…å­˜è¿æ¥åˆ°å½“å‰è¿›ç¨‹çš„åœ°å€ç©ºé—´ shm = shmat(shmid, 0, 0); if(shm == (void*)-1) &#123; fprintf(stderr, "shmat failed\n"); exit(EXIT_FAILURE); &#125; printf("\nMemory attached at %X\n", (int)shm); //è®¾ç½®å…±äº«å†…å­˜ shared = (struct shared_use_st*)shm; shared-&gt;written = 0; while(running)//è¯»å–å…±äº«å†…å­˜ä¸­çš„æ•°æ® &#123; //æ²¡æœ‰è¿›ç¨‹å‘å…±äº«å†…å­˜å®šæ•°æ®æœ‰æ•°æ®å¯è¯»å– if(shared-&gt;written != 0) &#123; printf("You wrote: %s", shared-&gt;text); sleep(rand() % 3); //è¯»å–å®Œæ•°æ®ï¼Œè®¾ç½®writtenä½¿å…±äº«å†…å­˜æ®µå¯å†™ shared-&gt;written = 0; //è¾“å…¥äº†endï¼Œé€€å‡ºå¾ªç¯ï¼ˆç¨‹åºï¼‰ if(strncmp(shared-&gt;text, "end", 3) == 0) running = 0; &#125; else//æœ‰å…¶ä»–è¿›ç¨‹åœ¨å†™æ•°æ®ï¼Œä¸èƒ½è¯»å–æ•°æ® sleep(1); &#125; //æŠŠå…±äº«å†…å­˜ä»å½“å‰è¿›ç¨‹ä¸­åˆ†ç¦» if(shmdt(shm) == -1) &#123; fprintf(stderr, "shmdt failed\n"); exit(EXIT_FAILURE); &#125; //åˆ é™¤å…±äº«å†…å­˜ if(shmctl(shmid, IPC_RMID, 0) == -1) &#123; fprintf(stderr, "shmctl(IPC_RMID) failed\n"); exit(EXIT_FAILURE); &#125; exit(EXIT_SUCCESS);&#125; ğŸ˜€shmwrite.cæ–‡ä»¶ï¼Œå‘å…±äº«å†…å­˜å†™å…¥æ•°æ® 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &lt;sys/shm.h&gt;#include "shmdata.h" int main()&#123; int running = 1; void *shm = NULL; struct shared_use_st *shared = NULL; char buffer[BUFSIZ + 1];//ç”¨äºä¿å­˜è¾“å…¥çš„æ–‡æœ¬ int shmid; //åˆ›å»ºå…±äº«å†…å­˜ shmid = shmget((key_t)1234, sizeof(struct shared_use_st), 0666|IPC_CREAT); if(shmid == -1) &#123; fprintf(stderr, "shmget failed\n"); exit(EXIT_FAILURE); &#125; //å°†å…±äº«å†…å­˜è¿æ¥åˆ°å½“å‰è¿›ç¨‹çš„åœ°å€ç©ºé—´ shm = shmat(shmid, (void*)0, 0); if(shm == (void*)-1) &#123; fprintf(stderr, "shmat failed\n"); exit(EXIT_FAILURE); &#125; printf("Memory attached at %X\n", (int)shm); //è®¾ç½®å…±äº«å†…å­˜ shared = (struct shared_use_st*)shm; while(running)//å‘å…±äº«å†…å­˜ä¸­å†™æ•°æ® &#123; //æ•°æ®è¿˜æ²¡æœ‰è¢«è¯»å–ï¼Œåˆ™ç­‰å¾…æ•°æ®è¢«è¯»å–,ä¸èƒ½å‘å…±äº«å†…å­˜ä¸­å†™å…¥æ–‡æœ¬ while(shared-&gt;written == 1) &#123; sleep(1); printf("Waiting...\n"); &#125; //å‘å…±äº«å†…å­˜ä¸­å†™å…¥æ•°æ® printf("Enter some text: "); fgets(buffer, BUFSIZ, stdin); strncpy(shared-&gt;text, buffer, TEXT_SZ); //å†™å®Œæ•°æ®ï¼Œè®¾ç½®writtenä½¿å…±äº«å†…å­˜æ®µå¯è¯» shared-&gt;written = 1; //è¾“å…¥äº†endï¼Œé€€å‡ºå¾ªç¯ï¼ˆç¨‹åºï¼‰ if(strncmp(buffer, "end", 3) == 0) running = 0; &#125; //æŠŠå…±äº«å†…å­˜ä»å½“å‰è¿›ç¨‹ä¸­åˆ†ç¦» if(shmdt(shm) == -1) &#123; fprintf(stderr, "shmdt failed\n"); exit(EXIT_FAILURE); &#125; sleep(2); exit(EXIT_SUCCESS);&#125; å¥—æ¥å­— ä¸å…¶å®ƒé€šä¿¡æœºåˆ¶ä¸åŒçš„æ˜¯ï¼Œå®ƒå¯ç”¨äºä¸åŒæœºå™¨é—´çš„è¿›ç¨‹é€šä¿¡ å› ç‰¹ç½‘æä¾›äº†ä¸¤ç§é€šä¿¡æœºåˆ¶ï¼šæµï¼ˆstreamï¼‰å’Œæ•°æ®æŠ¥ï¼ˆdatagramï¼‰ï¼Œå› è€Œå¥—æ¥å­—çš„ç±»å‹ä¹Ÿå°±åˆ†ä¸ºæµå¥—æ¥å­—å’Œæ•°æ®æŠ¥å¥—æ¥å­—ã€‚ å¥—æ¥å­—åŸŸï¼š * `AF_INET`ï¼Œå®ƒæŒ‡çš„æ˜¯Internetç½‘ç»œï¼Œç»“æ„ä¸­æœ‰IPåœ°å€å’Œç«¯å£ * `AF_UNIX`ï¼Œè¡¨ç¤ºUNIXæ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒå°±æ˜¯æ–‡ä»¶è¾“å…¥/è¾“å‡ºï¼Œç»“æ„ä¸­æœ‰æ–‡ä»¶è·¯å¾„å socket()ç”¨äºåˆ›å»ºä¸€ä¸ªå¥—æ¥å­—ï¼Œä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä¸ºå¥—æ¥å­—åŸŸã€é€šä¿¡æœºåˆ¶ã€åè®®ç±»å‹ bind()å‡½æ•°æŠŠé€šè¿‡socketè°ƒç”¨åˆ›å»ºçš„å¥—æ¥å­—å‘½åï¼Œä»è€Œè®©å®ƒå¯ä»¥è¢«å…¶ä»–è¿›ç¨‹ä½¿ç”¨ã€‚ * å¯¹äºAF_UNIXï¼Œè°ƒç”¨è¯¥å‡½æ•°åå¥—æ¥å­—å°±ä¼šå…³è”åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿè·¯å¾„åï¼› * å¯¹äºAF_INETï¼Œåˆ™ä¼šå…³è”åˆ°ä¸€ä¸ªIPç«¯å£å· listen()ç”¨æ¥åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—æ¥ä¿å­˜æœªå¤„ç†çš„è¯·æ±‚ accept()ç”¨æ¥ç­‰å¾…å®¢æˆ·å»ºç«‹å¯¹è¯¥å¥—æ¥å­—çš„è¿æ¥ï¼Œé˜»å¡ç›´åˆ°æœ‰å®¢æˆ·å»ºç«‹è¿æ¥ connect()ç”¨æ¥è®©å®¢æˆ·ç¨‹åºé€šè¿‡åœ¨ä¸€ä¸ªæœªå‘½åå¥—æ¥å­—å’ŒæœåŠ¡å™¨ç›‘å¬å¥—æ¥å­—ä¹‹é—´å»ºç«‹è¿æ¥çš„æ–¹æ³•æ¥è¿æ¥åˆ°æœåŠ¡å™¨ close()ç”¨æ¥ç»ˆæ­¢æœåŠ¡å™¨å’Œå®¢æˆ·ä¸Šçš„å¥—æ¥å­—è¿æ¥ï¼Œæˆ‘ä»¬åº”è¯¥æ€»æ˜¯åœ¨è¿æ¥çš„ä¸¤ç«¯ï¼ˆæœåŠ¡å™¨å’Œå®¢æˆ·ï¼‰å…³é—­å¥—æ¥å­— 12345int socket(int domain, int type, int protocol);int bind( int socket, const struct sockaddr *address, size_t address_len);int listen(int socket, int backlog);int accept(int socket, struct sockaddr *address, size_t *address_len);int connect(int socket, const struct sockaddr *address, size_t address_len); ç¤ºä¾‹ä»£ç ï¼ˆæ¥è‡ª https://blog.csdn.net/ljianhui/article/details/10477427ï¼‰ ğŸ˜¡sockserver.cæ–‡ä»¶ï¼ŒæœåŠ¡å™¨ç«¯ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;#include &lt;netinet/in.h&gt;#include &lt;signal.h&gt;#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt; int main()&#123; int server_sockfd = -1; int client_sockfd = -1; int client_len = 0; struct sockaddr_in server_addr; struct sockaddr_in client_addr; //åˆ›å»ºæµå¥—æ¥å­— server_sockfd = socket(AF_INET, SOCK_STREAM, 0); //è®¾ç½®æœåŠ¡å™¨æ¥æ”¶çš„è¿æ¥åœ°å€å’Œç›‘å¬çš„ç«¯å£ server_addr.sin_family = AF_INET;//æŒ‡å®šç½‘ç»œå¥—æ¥å­— server_addr.sin_addr.s_addr = htonl(INADDR_ANY);//æ¥å—æ‰€æœ‰IPåœ°å€çš„è¿æ¥ server_addr.sin_port = htons(9736);//ç»‘å®šåˆ°9736ç«¯å£ //ç»‘å®šï¼ˆå‘½åï¼‰å¥—æ¥å­— bind(server_sockfd, (struct sockaddr*)&amp;server_addr, sizeof(server_addr)); //åˆ›å»ºå¥—æ¥å­—é˜Ÿåˆ—ï¼Œç›‘å¬å¥—æ¥å­— listen(server_sockfd, 5); //å¿½ç•¥å­è¿›ç¨‹åœæ­¢æˆ–é€€å‡ºä¿¡å· signal(SIGCHLD, SIG_IGN); while(1) &#123; char ch = '\0'; client_len = sizeof(client_addr); printf("Server waiting\n"); //æ¥å—è¿æ¥ï¼Œåˆ›å»ºæ–°çš„å¥—æ¥å­— client_sockfd = accept(server_sockfd, (struct sockaddr*)&amp;client_addr, &amp;client_len); if(fork() == 0) &#123; //å­è¿›ç¨‹ä¸­ï¼Œè¯»å–å®¢æˆ·ç«¯å‘è¿‡æ¥çš„ä¿¡æ¯ï¼Œå¤„ç†ä¿¡æ¯ï¼Œå†å‘é€ç»™å®¢æˆ·ç«¯ read(client_sockfd, &amp;ch, 1); sleep(5); ch++; write(client_sockfd, &amp;ch, 1); close(client_sockfd); exit(0); &#125; else &#123; //çˆ¶è¿›ç¨‹ä¸­ï¼Œå…³é—­å¥—æ¥å­— close(client_sockfd); &#125; &#125;&#125; ğŸ˜¡sockclient.cæ–‡ä»¶ï¼Œå®¢æˆ·ç«¯ 1234567891011121314151617181920212223242526272829303132333435363738#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;#include &lt;netinet/in.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt; int main()&#123; int sockfd = -1; int len = 0; struct sockaddr_in address; int result; char ch = 'A'; //åˆ›å»ºæµå¥—æ¥å­— sockfd = socket(AF_INET, SOCK_STREAM, 0); //è®¾ç½®è¦è¿æ¥çš„æœåŠ¡å™¨çš„ä¿¡æ¯ address.sin_family = AF_INET;//ä½¿ç”¨ç½‘ç»œå¥—æ¥å­— address.sin_addr.s_addr = inet_addr("127.0.0.1");//æœåŠ¡å™¨åœ°å€ address.sin_port = htons(9736);//æœåŠ¡å™¨æ‰€ç›‘å¬çš„ç«¯å£ len = sizeof(address); //è¿æ¥åˆ°æœåŠ¡å™¨ result = connect(sockfd, (struct sockaddr*)&amp;address, len); if(result == -1) &#123; perror("ops:client\n"); exit(1); &#125; //å‘é€è¯·æ±‚ç»™æœåŠ¡å™¨ write(sockfd, &amp;ch, 1); //ä»æœåŠ¡å™¨è·å–æ•°æ® read(sockfd, &amp;ch, 1); printf("char form server = %c\n", ch); close(sockfd); exit(0);&#125; å…³äºSystem V IPCSystem V IPCæŒ‡çš„æ˜¯AT&amp;Tåœ¨System V.2å‘è¡Œç‰ˆä¸­å¼•å…¥çš„ä¸‰ç§è¿›ç¨‹é—´é€šä¿¡å·¥å…·ï¼š ä¿¡å·é‡ï¼Œç”¨æ¥ç®¡ç†å¯¹å…±äº«èµ„æºçš„è®¿é—® å…±äº«å†…å­˜ï¼Œç”¨æ¥é«˜æ•ˆåœ°å®ç°è¿›ç¨‹é—´çš„æ•°æ®å…±äº« å…±äº«å†…å­˜ï¼Œç”¨æ¥é«˜æ•ˆåœ°å®ç°è¿›ç¨‹é—´çš„æ•°æ®å…±äº« æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨æ¥å®ç°è¿›ç¨‹é—´æ•°æ®çš„ä¼ é€’ã€‚ æˆ‘ä»¬æŠŠè¿™ä¸‰ç§å·¥å…·ç»Ÿç§°ä¸ºSystem V IPCçš„å¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½å…·æœ‰ä¸€ä¸ªå”¯ä¸€çš„IPCæ ‡è¯†ç¬¦(identifier)ã€‚è¦ä¿è¯ä¸åŒçš„è¿›ç¨‹èƒ½å¤Ÿè·å–åŒä¸€ä¸ªIPCå¯¹è±¡ï¼Œå¿…é¡»æä¾›ä¸€ä¸ªIPCå…³é”®å­—(IPCkey)ï¼Œå†…æ ¸è´Ÿè´£æŠŠIPCå…³é”®å­—è½¬æ¢æˆIPCæ ‡è¯†ç¬¦ã€‚]]></content>
      <categories>
        <category>æ“ä½œç³»ç»Ÿ</category>
        <category>è¿›ç¨‹ç®¡ç†</category>
      </categories>
      <tags>
        <tag>è¿›ç¨‹é€šä¿¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¿›ç¨‹åŒæ­¥ç»å…¸é—®é¢˜]]></title>
    <url>%2F2019%2F03%2F01%2F%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5%E7%BB%8F%E5%85%B8%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜é—®é¢˜æè¿°ï¼šä½¿ç”¨ä¸€ä¸ªç¼“å†²åŒºæ¥ä¿å­˜ç‰©å“ï¼Œåªæœ‰ç¼“å†²åŒºæ²¡æœ‰æ»¡ï¼Œç”Ÿäº§è€…æ‰å¯ä»¥æ”¾å…¥ç‰©å“ï¼›åªæœ‰ç¼“å†²åŒºä¸ä¸ºç©ºï¼Œæ¶ˆè´¹è€…æ‰å¯ä»¥æ‹¿èµ°ç‰©å“ã€‚ å› ä¸ºç¼“å†²åŒºå±äºä¸´ç•Œèµ„æºï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ä¸€ä¸ªäº’æ–¥é‡ mutex æ¥æ§åˆ¶å¯¹ç¼“å†²åŒºçš„äº’æ–¥è®¿é—®ã€‚ ä¸ºäº†åŒæ­¥ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„è¡Œä¸ºï¼Œéœ€è¦è®°å½•ç¼“å†²åŒºä¸­ç‰©å“çš„æ•°é‡ã€‚æ•°é‡å¯ä»¥ä½¿ç”¨ä¿¡å·é‡æ¥è¿›è¡Œç»Ÿè®¡ï¼Œè¿™é‡Œéœ€è¦ä½¿ç”¨ä¸¤ä¸ªä¿¡å·é‡ï¼šempty è®°å½•ç©ºç¼“å†²åŒºçš„æ•°é‡ï¼Œfullè®°å½•æ»¡ç¼“å†²åŒºçš„æ•°é‡ã€‚å…¶ä¸­ï¼Œ â€‹ empty ä¿¡å·é‡æ˜¯åœ¨ç”Ÿäº§è€…è¿›ç¨‹ä¸­ä½¿ç”¨ï¼Œå½“ empty ä¸ä¸º 0 æ—¶ï¼Œç”Ÿäº§è€…æ‰å¯ä»¥æ”¾å…¥ç‰©å“ï¼› â€‹ fullä¿¡å·é‡æ˜¯åœ¨æ¶ˆè´¹è€…è¿›ç¨‹ä¸­ä½¿ç”¨ï¼Œå½“ full ä¿¡å·é‡ä¸ä¸º 0 æ—¶ï¼Œæ¶ˆè´¹è€…æ‰å¯ä»¥å–èµ°ç‰©å“ã€‚ æ³¨æ„ï¼Œä¸èƒ½å…ˆå¯¹ç¼“å†²åŒºè¿›è¡ŒåŠ é”ï¼Œå†æµ‹è¯•ä¿¡å·é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸èƒ½å…ˆæ‰§è¡Œ down(mutex) å†æ‰§è¡Œdown(empty)ã€‚å¦‚æœè¿™ä¹ˆåšäº†ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼šç”Ÿäº§è€…å¯¹ç¼“å†²åŒºåŠ é”åï¼Œæ‰§è¡Œ down(empty) æ“ä½œï¼Œå‘ç° empty =0ï¼Œæ­¤æ—¶ç”Ÿäº§è€…ç¡çœ ã€‚æ¶ˆè´¹è€…ä¸èƒ½è¿›å…¥ä¸´ç•ŒåŒºï¼Œå› ä¸ºç”Ÿäº§è€…å¯¹ç¼“å†²åŒºåŠ é”äº†ï¼Œæ¶ˆè´¹è€…å°±æ— æ³•æ‰§è¡Œ up(empty) æ“ä½œï¼Œempty æ°¸è¿œéƒ½ä¸º0ï¼Œå¯¼è‡´ç”Ÿäº§è€…æ°¸è¿œç­‰å¾…ä¸‹ï¼Œä¸ä¼šé‡Šæ”¾é”ï¼Œæ¶ˆè´¹è€…å› æ­¤ä¹Ÿä¼šæ°¸è¿œç­‰å¾…ä¸‹å»ã€‚ â€‹123456789101112131415161718192021222324252627#define N 100typedef int semaphore;semaphore mutex = 1;semaphore empty = N;semaphore full = 0;void producer()&#123; while(TRUE)&#123; int item = produce_item(); down(&amp;empty); down(&amp;mutex); insert_item(item); up(&amp;mutex); up(&amp;full); &#125;&#125;void consumer()&#123; while(TRUE)&#123; down(&amp;full); down(&amp;mutex); int item = remove_item(); consume_item(item); up(&amp;mutex); up(&amp;empty); &#125;&#125; è¯»è€…-å†™è€…é—®é¢˜å…è®¸å¤šä¸ªè¿›ç¨‹åŒæ—¶å¯¹æ•°æ®è¿›è¡Œè¯»æ“ä½œï¼Œä½†æ˜¯ä¸å…è®¸è¯»å’Œå†™ä»¥åŠå†™å’Œå†™æ“ä½œåŒæ—¶å‘ç”Ÿã€‚ ä¸€ä¸ªæ•´å‹å˜é‡count è®°å½•åœ¨å¯¹æ•°æ®è¿›è¡Œè¯»æ“ä½œçš„è¿›ç¨‹æ•°é‡ï¼Œä¸€ä¸ªäº’æ–¥é‡ count_mutex ç”¨äºå¯¹ count åŠ é”ï¼Œä¸€ä¸ªäº’æ–¥é‡ data_mutexç”¨äºå¯¹è¯»å†™çš„æ•°æ®åŠ é”ã€‚ è¯»è€…ä¼˜å…ˆï¼šå½“è¯»è€…è¿›è¡Œè¯»å–æ—¶ï¼Œå¦‚æœåé¢ä¸€ç›´æœ‰è¯»è€…è¿›å…¥ï¼Œé‚£ä¹ˆå†™è€…å°±ä¼šé˜»å¡ï¼Œç›´åˆ°æ‰€æœ‰è¯»è€…å®Œæˆä¹‹åï¼Œå†™è€…æ‰å¯ä»¥è¿›å…¥ã€‚ 12345678910111213141516171819202122232425262728typedef int semaphore;semaphore count_mutex = 1;semaphore data_mutex = 1;int count = 0;void writer()&#123; while(TRUE)&#123; down(&amp;data_mutex); write(); up(&amp;data_mutex); &#125;&#125;void reader()&#123; while(TRUE)&#123; down(&amp;count_mutex); if(count==0) down(&amp;data_mutex);//å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªè¯»è€…ï¼Œé˜»å¡å†™è€… count++; up(&amp;count_mutex); read(); down(&amp;count_mutex); count--; if(count==0) up(&amp;data_mutex);//æœ€åä¸€ä¸ªè¯»è€…å‡ºæ¥ï¼Œé‡Šæ”¾å†™è€… up(&amp;count_mutex); &#125;&#125; å†™è€…ä¼˜å…ˆï¼šç½®ä¸€ä¸ªWriterMutexä¿¡å·é‡æ¥å®ç°ä¼˜å…ˆè¯»ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“æœ‰å†™è€…è¿›å…¥æ—¶ï¼Œé€šè¿‡P(WriterMutex)é˜»å¡äº†è¯»è€… 123456789101112131415161718192021222324252627282930313233typedef int semaphore;semaphore count_mutex = 1;semaphore data_mutex = 1;semaphore write_mutex = 1;//å®ç°å†™è€…ä¼˜å…ˆint count = 0;void writer()&#123; while(TRUE)&#123; down(&amp;write_mutex); down(&amp;data_mutex); write(); up(&amp;data_mutex); up(&amp;write_mutex); &#125;&#125;void reader()&#123; while(TRUE)&#123; down(&amp;write_mutex);//æ— å†™è€…è¿›å…¥æ—¶ down(&amp;count_mutex); if(count==0) down(&amp;data_mutex);//å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªè¯»è€…ï¼Œé˜»å¡å†™è€… count++; up(&amp;write_mutex);//æ¢å¤å¯¹å…±äº«èµ„æºçš„è®¿é—® up(&amp;count_mutex); read(); down(&amp;count_mutex); count--; if(count==0) up(&amp;data_mutex);//æœ€åä¸€ä¸ªè¯»è€…å‡ºæ¥ï¼Œé‡Šæ”¾å†™è€… up(&amp;count_mutex); &#125;&#125; å“²å­¦å®¶è¿›é¤é—®é¢˜äº”ä¸ªå“²å­¦å®¶ï¼ˆA~Eï¼‰å›´ç€ä¸€å¼ åœ†æ¡Œå°±é¤ï¼Œä»–ä»¬æ¯ä¸ªäººé¢å‰éƒ½æœ‰ä¸€ç›˜é€šå¿ƒç²‰ã€‚ç”±äºé€šå¿ƒç²‰å¾ˆæ»‘ï¼Œæ‰€ä»¥éœ€è¦ä¸¤åªç­·å­æ‰èƒ½å¤¹ä½ï¼Œä½†æ¯ä¸¤ä¸ªç›˜å­ä¹‹é—´åªæ”¾ç€ä¸€åªç­·å­ï¼Œå¦‚ä¸‹å›¾ã€‚å“²å­¦å®¶åªæœ‰ä¸¤ä¸ªåŠ¨ä½œï¼šè¦ä¹ˆå°±é¤ï¼Œè¦ä¹ˆæ€è€ƒã€‚è€Œä¸”ä»–ä»¬ä¹‹é—´ä»ä¸äº¤è°ˆã€‚å½“ä¸€ä¸ªå“²å­¦å®¶é¥¿äº†çš„æ—¶å€™ï¼Œå°±æ‹¿èµ·ç›˜å­å·¦å³ä¸¤è¾¹çš„ç­·å­å¼€å§‹å°±é¤ï¼ˆä¸èƒ½åŒæ—¶æ‹¿èµ·ä¸¤åªç­·å­ï¼‰ã€‚å°±é¤å®Œä»¥åï¼Œå°±æŠŠç­·å­æ”¾å›ç›˜å­å·¦å³ï¼Œç»§ç»­æ€è€ƒã€‚ç”±äºä»–ä»¬ä¹‹é—´äº’ä¸äº¤è°ˆï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å‡ºç°â€œæ­»é”â€ï¼šå‡å¦‚æ¯ä¸ªäººéƒ½æ‹¿ç€å·¦è¾¹çš„ç­·å­ï¼Œåˆ™æ‰€æœ‰äººéƒ½åœ¨ç­‰å³è¾¹çš„ç­·å­ï¼Œè°éƒ½åƒä¸äº†ã€‚ä¸ºäº†é˜²æ­¢æ­»é”çš„å‘ç”Ÿï¼Œå¯ä»¥è®¾ç½®ä¸¤ä¸ªæ¡ä»¶ï¼š å¿…é¡»åŒæ—¶æ‹¿èµ·å·¦å³ä¸¤æ ¹ç­·å­ï¼›åªæœ‰åœ¨ä¸¤ä¸ªé‚»å±…éƒ½æ²¡æœ‰è¿›é¤çš„æƒ…å†µä¸‹æ‰å…è®¸è¿›é¤ã€‚ â€‹123456789101112131415161718192021222324252627282930313233343536373839404142#define N 5#define LEFT (i + N - 1) % N // å·¦é‚»å±…#define RIGHT (i + 1) % N // å³é‚»å±…#define THINKING 0#define HUNGRY 1#define EATING 2typedef int semaphore;int state[N]; // è·Ÿè¸ªæ¯ä¸ªå“²å­¦å®¶çš„çŠ¶æ€semaphore mutex = 1; // ä¸´ç•ŒåŒºçš„äº’æ–¥semaphore s[N]; // æ¯ä¸ªå“²å­¦å®¶ä¸€ä¸ªä¿¡å·é‡void philosopher(int i) &#123; while(TRUE) &#123; think(); take_two(i); eat(); put_two(i); &#125;&#125;void take_two(int i) &#123; down(&amp;mutex); state[i] = HUNGRY; test(i); up(&amp;mutex); down(&amp;s[i]);&#125;void put_two(i) &#123; down(&amp;mutex); state[i] = THINKING; test(LEFT); test(RIGHT); up(&amp;mutex);&#125;void test(i) &#123; // å°è¯•æ‹¿èµ·ä¸¤æŠŠç­·å­ if(state[i] == HUNGRY &amp;&amp; state[LEFT] != EATING &amp;&amp; state[RIGHT] !=EATING) &#123; state[i] = EATING; up(&amp;s[i]); &#125;&#125; å…¶ä»–è§£å†³æ–¹æ¡ˆï¼ˆ https://blog.csdn.net/Sunflowerfiona/article/details/52756819ï¼‰]]></content>
      <categories>
        <category>æ“ä½œç³»ç»Ÿ</category>
        <category>è¿›ç¨‹ç®¡ç†</category>
      </categories>
      <tags>
        <tag>åŒæ­¥</tag>
        <tag>ç»å…¸é—®é¢˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¯¹Springçš„ç†è§£]]></title>
    <url>%2F2019%2F03%2F01%2F%E5%AF%B9Spring%E7%9A%84%E7%90%86%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[æ¦‚è¿°Springæ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œä¸ºç®€åŒ–ä¼ä¸šçº§åº”ç”¨å¼€å‘è€Œç”Ÿã€‚Springå¯ä»¥æ˜¯ä½¿ç®€å•çš„JavaBeanå®ç°ä»¥å‰åªæœ‰EJBæ‰èƒ½å®ç°çš„åŠŸèƒ½ã€‚Springæ˜¯ä¸€ä¸ªIOCå’ŒAOPå®¹å™¨æ¡†æ¶ã€‚ ä¸»è¦æ ¸å¿ƒ æ§åˆ¶åè½¬ï¼ˆIOCï¼‰ï¼Œä¼ ç»Ÿçš„Javaå¼€å‘æ¨¡å¼ä¸­ï¼Œå½“éœ€è¦ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬ä¼šè‡ªå·±ä½¿ç”¨newæˆ–è€…getInstanceç­‰ç›´æ¥æˆ–è€…é—´æ¥è°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè€Œåœ¨Springå¼€å‘æ¨¡å¼ä¸­ï¼Œspringå®¹å™¨ä½¿ç”¨äº†å·¥å‚æ¨¡å¼ä¸ºæˆ‘ä»¬åˆ›å»ºäº†æ‰€éœ€è¦çš„å¯¹è±¡ï¼Œä¸éœ€è¦æˆ‘ä»¬è‡ªå·±åˆ›å»ºäº†ï¼Œç›´æ¥è°ƒç”¨springæä¾›çš„å¯¹è±¡å°±å¯ä»¥äº†ï¼Œè¿™æ˜¯æ§åˆ¶åè½¬çš„æ€æƒ³ã€‚æ§åˆ¶åè½¬ä¸»è¦çš„å®ç°æ–¹å¼æœ‰ä¸¤ç§ï¼šä¾èµ–æŸ¥æ‰¾ã€ä¾èµ–æ³¨å…¥ã€‚ ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ï¼Œspringä½¿ç”¨JavaBeanå¯¹è±¡çš„setæ–¹æ³•æˆ–è€…å¸¦å‚æ•°çš„æ„é€ æ–¹æ³•ä¸ºæˆ‘ä»¬åœ¨åˆ›å»ºæ‰€éœ€å¯¹è±¡æ—¶å°†å…¶å±æ€§è‡ªåŠ¨è®¾ç½®æ‰€éœ€è¦çš„å€¼çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ä¾èµ–æ³¨å…¥çš„æ€æƒ³ã€‚ é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰ï¼Œåœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹(oop)æ€æƒ³ä¸­ï¼Œæˆ‘ä»¬å°†äº‹ç‰©çºµå‘æŠ½æˆä¸€ä¸ªä¸ªå¯¹è±¡ã€‚è€Œåœ¨é¢å‘åˆ‡é¢ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªä¸ªçš„å¯¹è±¡æŸäº›ç±»ä¼¼çš„æ–¹é¢æ¨ªå‘æŠ½æˆä¸€ä¸ªåˆ‡é¢ï¼Œå¯¹è¿™ä¸ªåˆ‡é¢è¿›è¡Œä¸€äº›å¦‚æƒé™æ§åˆ¶ã€äº‹åŠ¡ç®¡ç†ã€è®°å½•æ—¥å¿—ç­‰å…¬ç”¨æ“ä½œå¤„ç†çš„è¿‡ç¨‹å°±æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹çš„æ€æƒ³ã€‚AOPåº•å±‚æ˜¯åŠ¨æ€ä»£ç†ï¼Œå¦‚æœæ˜¯æ¥å£é‡‡ç”¨JDKåŠ¨æ€ä»£ç†ï¼Œå¦‚æœæ˜¯ç±»é‡‡ç”¨CGLIBæ–¹å¼å®ç°åŠ¨æ€ä»£ç†ã€‚ ç»“æ„springç”±20å¤šä¸ªæ¨¡å—ç»„æˆï¼Œå¯ä»¥åˆ†ä¸ºæ•°æ®è®¿é—®/é›†æˆã€Webã€é¢å‘åˆ‡é¢ç¼–ç¨‹ã€åº”ç”¨æœåŠ¡å™¨è®¾å¤‡ç®¡ç†ã€æ¶ˆæ¯å‘é€ã€æ ¸å¿ƒå®¹å™¨å’Œæµ‹è¯• Coreæ¨¡å—ï¼šå°è£…äº†æ¡†æ¶ä¾èµ–çš„æœ€åº•å±‚éƒ¨åˆ†ï¼ŒåŒ…æ‹¬èµ„æºè®¿é—®ã€ç±»å‹è½¬æ¢å’Œå¸¸ç”¨çš„å·¥å…·ç±»ï¼› Beansæ¨¡å—ï¼šæä¾›æ¡†æ¶çš„åŸºç¡€éƒ¨åˆ†ï¼ŒåŒ…æ‹¬æ§åˆ¶åè½¬å’Œä¾èµ–æ³¨å…¥ã€‚å…¶ä¸­BeanFactoryæ˜¯å®¹å™¨æ ¸å¿ƒã€‚ Contextæ¨¡å—ï¼šä»¥Coreå’ŒBeansä¸ºåŸºç¡€ï¼Œé›†æˆBeansæ¨¡å—åŠŸèƒ½å¹¶æ·»åŠ èµ„æºç»‘å®šã€æ•°æ®éªŒè¯ã€å›½é™…åŒ–ç­‰ï¼›æ ¸å¿ƒæ¥å£æ˜¯ApplicationContextã€‚]]></content>
      <categories>
        <category>ssm</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>IOC</tag>
        <tag>AOP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ“ä½œç³»ç»Ÿ---æ¦‚è¿°]]></title>
    <url>%2F2019%2F02%2F28%2F%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F---%E6%A6%82%E8%BF%B0%2F</url>
    <content type="text"><![CDATA[åŸºæœ¬ç‰¹å¾ å¹¶å‘ä¸€æ®µæ—¶é—´å†…è¿è¡Œå¤šä¸ªç¨‹åºä¸ºå¹¶å‘ï¼›åŒä¸€æ—¶åˆ»è¿è¡Œå¤šæ¡æŒ‡ä»¤ä¸ºå¹¶è¡Œï¼›å¹¶è¡Œéœ€è¦ç¡¬ä»¶æ”¯æŒï¼Œæ¯”å¦‚å¤šæ ¸å¤„ç†å™¨ã€åˆ†å¸ƒå¼ç³»ç»Ÿæ“ä½œç³»ç»Ÿå¼•å…¥è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œä½¿å¾—ç¨‹åºèƒ½å¤Ÿå¹¶å‘è¿è¡Œ å…±äº«æŒ‡ç³»ç»Ÿèµ„æºå¯ä»¥è¢«å¤šä¸ªå¹¶å‘è¿›ç¨‹ä½¿ç”¨ä¸¤ç§å…±äº«æ–¹å¼ï¼šäº’æ–¥å…±äº«ã€åŒæ—¶å…±äº« è™šæ‹Ÿä¸¤ç§è™šæ‹ŸæŠ€æœ¯ï¼šæ—¶åˆ†å¤ç”¨æŠ€æœ¯ï¼šå¤šä¸ªè¿›ç¨‹åœ¨åŒä¸€ä¸ªå¤„ç†å™¨ä¸Šå¹¶å‘æ‰§è¡Œç©ºåˆ†å¤ç”¨æŠ€æœ¯ï¼šè™šæ‹Ÿå†…å­˜ å¼‚æ­¥æŒ‡ä¸€ä¸ªè¿›ç¨‹ä¸æ˜¯ä¸€æ¬¡æ‰§è¡Œå®Œæ¯•ï¼Œè€Œæ˜¯èµ°èµ°åœåœ åŸºæœ¬åŠŸèƒ½ è¿›ç¨‹ç®¡ç†è¿›ç¨‹æ§åˆ¶ã€è¿›ç¨‹åŒæ­¥ã€è¿›ç¨‹è°ƒåº¦ã€æ­»é”å¤„ç†ã€å¤„ç†æœºè°ƒåº¦ç­‰ å†…å­˜ç®¡ç†å†…å­˜åˆ†é…ã€åœ°å€æ˜ å°„ã€å†…å­˜ä¿æŠ¤ä¸å…±äº«ã€è™šæ‹Ÿå†…å­˜ç­‰ æ–‡ä»¶ç®¡ç†æ–‡ä»¶å­˜å‚¨ç©ºé—´ç®¡ç†ã€ç›®å½•ç®¡ç†ã€æ–‡ä»¶è¯»å†™ç®¡ç†ä¸ä¿æŠ¤ç­‰ è®¾å¤‡ç®¡ç†å¸®åŠ©ç”¨æˆ·å®ŒæˆIOè¯·æ±‚ï¼ŒåŒ…æ‹¬ç¼“å†²ç®¡ç†ã€è®¾å¤‡åˆ†é…ã€è®¾å¤‡å¤„ç†ã€è™šæ‹Ÿè®¾å¤‡ç­‰ ç³»ç»Ÿè°ƒç”¨å¦‚æœä¸€ä¸ªè¿›ç¨‹åœ¨ç”¨æˆ·æ€éœ€è¦ä½¿ç”¨å†…æ ¸æ€çš„åŠŸèƒ½ï¼Œéœ€è¦é€šè¿‡ç³»ç»Ÿè°ƒç”¨é™·å…¥å†…æ ¸æ€ï¼Œæœ‰æ“ä½œç³»ç»Ÿä»£ä¸ºå®Œæˆã€‚ ä¸­æ–­ å¤–ä¸­æ–­ï¼Œå¦‚IOå®Œæˆè¯·æ±‚ã€æ—¶é’Ÿä¸­æ–­ã€æ§åˆ¶å°ä¸­æ–­ç­‰ å¼‚å¸¸ï¼Œç”±CPUæ‰§è¡ŒæŒ‡ä»¤çš„å†…éƒ¨äº‹ä»¶å¼•èµ·ï¼Œå¦‚éæ³•æ“ä½œç ã€åœ°å€è¶Šç•Œã€ç®—æœ¯æº¢å‡ºç­‰ é™·å…¥ï¼Œè¿›ç¨‹ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨ç”±ç”¨æˆ·æ€é™·å…¥å†…æ ¸æ€ å‚è€ƒï¼š https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/è®¡ç®—æœºæ“ä½œç³»ç»Ÿ.md#ä¸€æ¦‚è¿°]]></content>
      <categories>
        <category>æ“ä½œç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>æ¦‚å¿µ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å­—ç¬¦æ“ä½œ]]></title>
    <url>%2F2019%2F02%2F28%2F%E5%AD%97%E7%AC%A6%E6%93%8D%E4%BD%9C%2F</url>
    <content type="text"><![CDATA[ç¼–ç ä¸è§£ç ç¼–ç å°±æ˜¯æŠŠå­—ç¬¦è½¬æ¢ä¸ºå­—èŠ‚ï¼Œè€Œè§£ç æ˜¯æŠŠå­—èŠ‚é‡æ–°ç»„åˆæˆå­—ç¬¦ã€‚ å¦‚æœç¼–ç å’Œè§£ç è¿‡ç¨‹ä½¿ç”¨ä¸åŒçš„ç¼–ç æ–¹å¼é‚£ä¹ˆå°±å‡ºç°äº†ä¹±ç ã€‚ GBK ç¼–ç ä¸­ï¼Œä¸­æ–‡å­—ç¬¦å  2 ä¸ªå­—èŠ‚ï¼Œè‹±æ–‡å­—ç¬¦å  1 ä¸ªå­—èŠ‚ï¼› UTF-8 ç¼–ç ä¸­ï¼Œä¸­æ–‡å­—ç¬¦å  3 ä¸ªå­—èŠ‚ï¼Œè‹±æ–‡å­—ç¬¦å  1 ä¸ªå­—èŠ‚ï¼› UTF-16be ç¼–ç ä¸­ï¼Œä¸­æ–‡å­—ç¬¦å’Œè‹±æ–‡å­—ç¬¦éƒ½å  2 ä¸ªå­—èŠ‚ã€‚ UTF-16be ä¸­çš„ be æŒ‡çš„æ˜¯ Big Endianï¼Œä¹Ÿå°±æ˜¯å¤§ç«¯ã€‚ç›¸åº”åœ°ä¹Ÿæœ‰ UTF-16leï¼Œle æŒ‡çš„æ˜¯ Little Endianï¼Œä¹Ÿå°±æ˜¯å°ç«¯ã€‚ Java çš„å†…å­˜ç¼–ç ä½¿ç”¨åŒå­—èŠ‚ç¼–ç  UTF-16beï¼Œè¿™ä¸æ˜¯æŒ‡ Java åªæ”¯æŒè¿™ä¸€ç§ç¼–ç æ–¹å¼ï¼Œè€Œæ˜¯è¯´ char è¿™ç§ç±»å‹ä½¿ç”¨ UTF-16beè¿›è¡Œç¼–ç ã€‚char ç±»å‹å  16 ä½ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªå­—èŠ‚ï¼ŒJava ä½¿ç”¨è¿™ç§åŒå­—èŠ‚ç¼–ç æ˜¯ä¸ºäº†è®©ä¸€ä¸ªä¸­æ–‡æˆ–è€…ä¸€ä¸ªè‹±æ–‡éƒ½èƒ½ä½¿ç”¨ä¸€ä¸ª char æ¥å­˜å‚¨ã€‚ String çš„ç¼–ç æ–¹å¼String å¯ä»¥çœ‹æˆä¸€ä¸ªå­—ç¬¦åºåˆ—ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªç¼–ç æ–¹å¼å°†å®ƒç¼–ç ä¸ºå­—èŠ‚åºåˆ—ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªç¼–ç æ–¹å¼å°†ä¸€ä¸ªå­—èŠ‚åºåˆ—è§£ç ä¸º Stringã€‚ â€‹ String str1 = â€œä¸­æ–‡â€; byte[] bytes = str1.getBytes(â€œUTF-8â€); String str2 = new String(bytes, â€œUTF-8â€); System.out.println(str2); åœ¨è°ƒç”¨æ— å‚æ•°getBytes() æ–¹æ³•æ—¶ï¼Œé»˜è®¤çš„ç¼–ç æ–¹å¼ä¸æ˜¯ UTF-16beã€‚åŒå­—èŠ‚ç¼–ç çš„å¥½å¤„æ˜¯å¯ä»¥ä½¿ç”¨ä¸€ä¸ª char å­˜å‚¨ä¸­æ–‡å’Œè‹±æ–‡ï¼Œè€Œå°†String è½¬ä¸º bytes[] å­—èŠ‚æ•°ç»„å°±ä¸å†éœ€è¦è¿™ä¸ªå¥½å¤„ï¼Œå› æ­¤ä¹Ÿå°±ä¸å†éœ€è¦åŒå­—èŠ‚ç¼–ç ã€‚getBytes() çš„é»˜è®¤ç¼–ç æ–¹å¼ä¸å¹³å°æœ‰å…³ï¼Œä¸€èˆ¬ä¸ºUTF-8ã€‚ Reader ä¸ Writerä¸ç®¡æ˜¯ç£ç›˜è¿˜æ˜¯ç½‘ç»œä¼ è¾“ï¼Œæœ€å°çš„å­˜å‚¨å•å…ƒéƒ½æ˜¯å­—èŠ‚ï¼Œè€Œä¸æ˜¯å­—ç¬¦ã€‚ä½†æ˜¯åœ¨ç¨‹åºä¸­æ“ä½œçš„é€šå¸¸æ˜¯å­—ç¬¦å½¢å¼çš„æ•°æ®ï¼Œå› æ­¤éœ€è¦æä¾›å¯¹å­—ç¬¦è¿›è¡Œæ“ä½œçš„æ–¹æ³•ã€‚ InputStreamReader å®ç°ä»å­—èŠ‚æµè§£ç æˆå­—ç¬¦æµï¼›OutputStreamWriter å®ç°å­—ç¬¦æµç¼–ç æˆä¸ºå­—èŠ‚æµã€‚ å®ç°é€è¡Œè¾“å‡ºæ–‡æœ¬æ–‡ä»¶çš„å†…å®¹ â€‹123456789101112131415public static void readFileContent(String filePath) throws IOException &#123; FileReader fileReader = new FileReader(filePath); BufferedReader bufferedReader = new BufferedReader(fileReader); String line; while ((line = bufferedReader.readLine()) != null) &#123; System.out.println(line); &#125; // è£…é¥°è€…æ¨¡å¼ä½¿å¾— BufferedReader ç»„åˆäº†ä¸€ä¸ª Reader å¯¹è±¡ // åœ¨è°ƒç”¨ BufferedReader çš„ close() æ–¹æ³•æ—¶ä¼šå»è°ƒç”¨ Reader çš„ close() æ–¹æ³• // å› æ­¤åªè¦ä¸€ä¸ª close() è°ƒç”¨å³å¯ bufferedReader.close();&#125; å‚è€ƒï¼š https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/Java IO.md]]></content>
      <categories>
        <category>java</category>
        <category>åŸºç¡€</category>
      </categories>
      <tags>
        <tag>IO</tag>
        <tag>å­—ç¬¦</tag>
        <tag>ç¼–ç </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è£…é¥°è€…æ¨¡å¼]]></title>
    <url>%2F2019%2F02%2F28%2F%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[å®šä¹‰åœ¨ä¸æ”¹å˜åŸç±»æ–‡ä»¶ä»¥åŠä¸ä½¿ç”¨ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°å°†è´£ä»»é™„åŠ åˆ°å¯¹è±¡ä¸Šï¼Œä»è€Œå®ç°åŠ¨æ€æ‹“å±•ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½ã€‚å®ƒæ˜¯é€šè¿‡åˆ›å»ºä¸€ä¸ªåŒ…è£…å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è£…é¥°æ¥åŒ…è£¹çœŸå®çš„å¯¹è±¡ ç»„æˆéƒ¨åˆ† æŠ½è±¡æ„ä»¶(Component)å®ƒæ˜¯å…·ä½“æ„ä»¶å’ŒæŠ½è±¡è£…é¥°ç±»çš„å…±åŒç¥–å…ˆï¼Œå£°æ˜äº†å…·ä½“æ„ä»¶éœ€è¦å®ç°çš„ä¸šåŠ¡æ–¹æ³• å…·ä½“æ„ä»¶(ConcreteComponent)å®ƒæ˜¯æŠ½è±¡æ„ä»¶çš„å­ç±»ï¼Œç”¨äºå®šä¹‰å…·ä½“çš„æ„ä»¶å¯¹è±¡ï¼Œå®ç°äº†åœ¨æŠ½è±¡æ„ä»¶ä¸­å£°æ˜çš„ä¸šåŠ¡æ–¹æ³• æŠ½è±¡è£…é¥°ç±»(Decorator)å®ƒä¹Ÿæ˜¯æŠ½è±¡æ„ä»¶ç±»çš„å­ç±»ï¼Œç”¨äºç»™å…·ä½“æ„ä»¶å¢åŠ èŒè´£ï¼Œä½†æ˜¯å…·ä½“èŒè´£åœ¨å…¶å­ç±»ä¸­å®ç°ã€‚å®ƒç»´æŠ¤ä¸€ä¸ªæŒ‡å‘æŠ½è±¡æ„ä»¶å¯¹è±¡çš„å¼•ç”¨ï¼Œé€šè¿‡è¯¥å¼•ç”¨å¯ä»¥è°ƒç”¨è£…é¥°ä¹‹å‰æ„ä»¶å¯¹è±¡çš„æ–¹æ³•ï¼Œå¹¶é€šè¿‡å…¶å­ç±»æ‰©å±•è¯¥æ–¹æ³•ï¼Œä»¥è¾¾åˆ°è£…é¥°çš„ç›®çš„ã€‚ å…·ä½“è£…é¥°ç±»(ConcreteDecorator)å®ƒæ˜¯æŠ½è±¡è£…é¥°ç±»çš„å­ç±»ï¼Œè´Ÿè´£å‘æ„ä»¶æ·»åŠ æ–°çš„èŒè´£ã€‚æ¯ä¸€ä¸ªå…·ä½“è£…é¥°ç±»éƒ½å®šä¹‰äº†ä¸€äº›æ–°çš„è¡Œä¸ºï¼Œå®ƒå¯ä»¥è°ƒç”¨åœ¨æŠ½è±¡è£…é¥°ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œå¹¶å¯ä»¥å¢åŠ æ–°çš„æ–¹æ³•ç”¨ä»¥æ‰©å……å¯¹è±¡çš„è¡Œä¸º ä»£ç å®ç°å‡è®¾æœ‰ä¸¤ä¸ªç¨‹åºå‘˜ä»–ä»¬åŸæ¥åªä¼šå„è‡ªçš„æŠ€èƒ½ï¼Œç°åœ¨éœ€è¦è®©Androidç¨‹åºçŒ¿å…·å¤‡è®¾è®¡æ¨¡å¼æŠ€èƒ½ï¼Œé‚£å°±ç»™ä»–è£…é¥°ä¸€ä¸‹ã€‚è¯´æ˜ä¸€ä¸‹ï¼š æŠ½è±¡æ„ä»¶ï¼šæŒæ¡æŠ€èƒ½çš„ç¨‹åºå‘˜ å…·ä½“æ„ä»¶ï¼šä¸€ä¸ªæŒæ¡å†™Androidä»£ç æŠ€èƒ½çš„ç¨‹åºå‘˜ï¼Œä¸€ä¸ªæŒæ¡å†™phpä»£ç æŠ€èƒ½çš„ç¨‹åºå‘˜ æŠ½è±¡è£…é¥°ç±»ï¼š å…·ä½“è£…é¥°ç±»ï¼š åœ¨ä¸šåŠ¡æ–¹æ³•ä¸­æ·»åŠ è®¾è®¡æ¨¡å¼çš„æŠ€èƒ½ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657//Componentï¼ˆæŠ½è±¡æ„ä»¶ï¼‰interface ProgramMonkey &#123; void skills();&#125;//ConcreteComponentï¼ˆå…·ä½“æ„ä»¶ï¼‰class AndroidProgramMonkey implements ProgramMonkey &#123; @Override public void skills() &#123; System.out.println("ä¼šå†™Androidä»£ç ï¼"); &#125;&#125;//ConcreteComponentï¼ˆå…·ä½“æ„ä»¶ï¼‰class PHPProgramMonkey implements ProgramMonkey &#123; @Override public void skills() &#123; System.out.println("ä¼šå†™PHPä»£ç ï¼"); &#125;&#125;//Decoratorï¼ˆæŠ½è±¡è£…é¥°ç±»ï¼‰class ProgramMonkeyDecorator implements ProgramMonkey &#123; protected ProgramMonkey mProgramMonkey;//ç»´æŠ¤ä¸€ä¸ªæŒ‡å‘éœ€è¦å¢åŠ èŒè´£çš„æ„ä»¶çš„å¼•ç”¨ï¼Œç”¨æ¥è°ƒç”¨è¯¥æ„ä»¶çš„æ–¹æ³• public ProgramMonkeyDecorator(ProgramMonkey mProgramMonkey) &#123; this.mProgramMonkey = mProgramMonkey; &#125; public void skills() &#123; mProgramMonkey.skills(); &#125;&#125;//ConcreteDecoratorï¼ˆå…·ä½“è£…é¥°ç±»ï¼‰class PatternDecorator extends ProgramMonkeyDecorator &#123; public PatternDecorator(ProgramMonkey mProgramMonkey) &#123; super(mProgramMonkey); &#125; @Override public void skills() &#123; super.skills(); System.out.println("ä¼šè®¾è®¡æ¨¡å¼ï¼");//å¢åŠ çš„èŒè´£ &#125;&#125;public class Main &#123; public static void main(String[] args) &#123; //æœ‰ä¸€ä¸ªAndroidç¨‹åºçŒ¿åªä¼šå†™Androidä»£ç  ProgramMonkey programMonkey = new AndroidProgramMonkey(); programMonkey.skills(); //è£…é¥°ä¸€ä¸‹ä»–ï¼Œè£…é€¼çš„æŠ€èƒ½ï¼Œä»–ç«Ÿç„¶é™¤äº†å†™Androidè¿˜æ‡‚è®¾è®¡æ¨¡å¼ programMonkey = new PatternDecorator(programMonkey); programMonkey.skills(); programMonkey = new PHPProgramMonkey(); programMonkey.skills(); &#125;&#125; Java I/Oä¸­çš„è£…é¥°æ¨¡å¼ InputStreamæ˜¯æŠ½è±¡æ„ä»¶ FileInputStreamæ˜¯InputStreamçš„å­ç±»ï¼Œå±äºå…¶ä¸­ä¸€ä¸ªå…·ä½“æ„ä»¶ï¼Œæä¾›å­—èŠ‚æµè¾“å…¥çš„æ“ä½œï¼›PipedInputStreamã€ByteArrayInputStreamä¹Ÿæ˜¯å…·ä½“æ„ä»¶ FilterInputStreamæ˜¯InputStreamçš„å­ç±»ï¼Œå±äºæŠ½è±¡è£…é¥°ç±»ï¼Œè£…é¥°è€…ç”¨äºè£…é¥°ç»„ä»¶ï¼Œä¸ºç»„ä»¶æä¾›é¢å¤–çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ BufferedInputStream ä¸º FileInputStream æä¾›ç¼“å­˜çš„åŠŸèƒ½ã€‚ DataInputStreamã€BufferedInputStreamã€PushBackInputStreaméƒ½æ˜¯å…·ä½“è£…é¥°è€…]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>ç»“æ„å‹æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>IO</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>ç»“æ„å‹</tag>
        <tag>è£…é¥°è€…æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javaåŸºç¡€]]></title>
    <url>%2F2019%2F02%2F28%2Fjava%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[åŸºæœ¬æ•°æ®ç±»å‹ï¼Œbyte/8ã€short/16ã€char/16ã€int/32ã€float/32ã€long/62ã€double/16ã€booleanï¼ˆåªæœ‰ä¸¤ä¸ªå€¼ï¼Œå¯ä»¥ç”¨1bitæ¥è¡¨ç¤ºï¼Œä½†æ˜¯å…·ä½“å¤§å°æ²¡æœ‰æ˜ç¡®è§„å®šï¼ŒJVMåœ¨ç¼–è¯‘æ—¶æœŸå°†booleanç±»å‹çš„æ•°æ®è½¬æˆintç±»å‹ï¼‰ åŒ…è£…æ•°æ®ç±»å‹ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹éƒ½æœ‰å¯¹åº”çš„åŒ…è£…æ•°æ®ç±»å‹ï¼Œä¸¤è€…ä¹‹é—´çš„è½¬æ¢è¿‡ç¨‹ä¸ºè£…ç®±æ‹†ç®±ï¼Œè£…ç®±ï¼šåŸºæœ¬æ•°æ®ç±»å‹â€“&gt;åŒ…è£…æ•°æ®ç±»å‹ï¼› ç¼“å­˜æ± ï¼šnew Integer(123)æ¯æ¬¡éƒ½ä¼šæ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä½¿ç”¨Integer.valueOf(123)åˆ›å»ºå®ä¾‹æ—¶ï¼Œä¼šå…ˆåˆ¤æ–­è¯¥å€¼æ˜¯å¦åœ¨ç¼“å­˜æ± ä¸­ï¼Œå¦‚æœåœ¨ç›´æ¥è¿”å›ç¼“å­˜æ± ä¸­çš„å†…å®¹ï¼Œå› æ­¤å¤šæ¬¡è°ƒç”¨ä¼šå–å¾—åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼›åœ¨è‡ªåŠ¨è£…ç®±è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨valueOf()ï¼Œå› æ­¤å¤šä¸ª Integerå®ä¾‹ä½¿ç”¨è‡ªåŠ¨è£…ç®±æ¥åˆ›å»ºå¹¶ä¸”å€¼ç›¸åŒï¼Œé‚£ä¹ˆå°±ä¼šå¼•ç”¨ç›¸åŒçš„å¯¹è±¡ï¼›æ¯ä¸ªåŸºæœ¬æ•°æ®ç±»å‹éƒ½æœ‰å¯¹åº”çš„ç¼“å­˜æ± ï¼Œä½¿ç”¨è¿™äº›åŸºæœ¬ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»å‹æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å†²æ± ä¸­çš„å¯¹è±¡ï¼Œä½†æ˜¯æœ‰å¤§å°é™åˆ¶ï¼› String Pool(å­—ç¬¦ä¸²å¸¸é‡æ± )ï¼šåœ¨String Poolä¸­æ·»åŠ å­—ç¬¦ä¸²æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯å­—ç¬¦ä¸²å­—é¢é‡â€abcâ€åœ¨ç¼–è¯‘æ—¶æœŸå°±ç¡®å®šï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡è°ƒç”¨intern()åœ¨ç¨‹åºè¿è¡Œæ—¶å°†å­—ç¬¦ä¸²å¯¹è±¡æ·»åŠ åˆ°String Poolå¹¶è¿”å›è¯¥å­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚åœ¨ Java 7 ä¹‹å‰ï¼ŒString Poolè¢«æ”¾åœ¨è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ï¼Œå®ƒå±äºæ°¸ä¹…ä»£ã€‚è€Œåœ¨ Java 7ï¼ŒString Poolè¢«ç§»åˆ°å †ä¸­ã€‚è¿™æ˜¯å› ä¸ºæ°¸ä¹…ä»£çš„ç©ºé—´æœ‰é™ï¼Œåœ¨å¤§é‡ä½¿ç”¨å­—ç¬¦ä¸²çš„åœºæ™¯ä¸‹ä¼šå¯¼è‡´OutOfMemoryErroré”™è¯¯ switchï¼šä»Java7å¼€å§‹ï¼Œå¯ä»¥åœ¨switchæ¡ä»¶åˆ¤æ–­è¯­å¥ä¸­ä½¿ç”¨Stringå¯¹è±¡ï¼›switch ä¸æ”¯æŒ longï¼Œæ˜¯å› ä¸º switch çš„è®¾è®¡åˆè¡·æ˜¯å¯¹é‚£äº›åªæœ‰å°‘æ•°çš„å‡ ä¸ªå€¼è¿›è¡Œç­‰å€¼åˆ¤æ–­ï¼Œå¦‚æœå€¼è¿‡äºå¤æ‚ï¼Œé‚£ä¹ˆè¿˜æ˜¯ç”¨ if æ¯”è¾ƒåˆé€‚ æŠ½è±¡ç±»ä¸æ¥å£ï¼šæŠ½è±¡ç±»å¯ä»¥æœ‰æ„é€ æ–¹æ³•è€Œæ¥å£ä¸è¡Œï¼›æ¥å£çš„æˆå‘˜ï¼ˆå­—æ®µå’Œæ–¹æ³•ï¼‰é»˜è®¤éƒ½æ˜¯publicè€ŒæŠ½è±¡ç±»å¯ä»¥æ˜¯ä»»æ„è®¿é—®æƒé™ï¼›æ¥å£çš„å­—æ®µé»˜è®¤éƒ½æ˜¯staticå’Œfinalä¿®é¥°çš„è€ŒæŠ½è±¡ç±»å¯ä»¥æœ‰æ™®é€šæˆå‘˜å˜é‡ é‡å†™çš„ä¸¤ä¸ªé™åˆ¶ï¼šå­ç±»æ–¹æ³•è®¿é—®æƒé™å¿…é¡»å¤§äºç­‰äºçˆ¶ç±»çš„ï¼›å­ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹å¿…é¡»æ˜¯çˆ¶ç±»çš„è¿”å›å€¼ç±»å‹æˆ–å­ç±»å‹ é‡è½½ï¼šè¿”å›å€¼ç±»å‹ã€æ–¹æ³•åç›¸åŒï¼›å‚æ•°ç±»å‹ã€ä¸ªæ•°ã€é¡ºåºä¸åŒ equal(Object o)çš„å®ç°ï¼š åˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€å¯¹è±¡çš„å¼•ç”¨ï¼Œå¦‚æœæ˜¯ç›´æ¥è¿”å›trueï¼› åˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€ç±»å‹ï¼ˆgetClass())ï¼Œå¦‚æœä¸æ˜¯ç›´æ¥è¿”å›falseï¼› å°†å‚æ•°Objectå¯¹è±¡è¿›è¡Œè½¬å‹ï¼› åˆ¤æ–­æ¯ä¸ªå…³é”®åŸŸæ˜¯å¦ç›¸ç­‰ã€‚ hashCode()ï¼šhashCode() è¿”å›æ•£åˆ—å€¼ï¼Œè€Œ equals() æ˜¯ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç­‰ä»·ã€‚ ç­‰ä»·çš„ä¸¤ä¸ªå¯¹è±¡æ•£åˆ—å€¼ä¸€å®šç›¸åŒï¼Œä½†æ˜¯æ•£åˆ—å€¼ç›¸åŒçš„ä¸¤ä¸ªå¯¹è±¡ä¸ä¸€å®šç­‰ä»·ã€‚ åœ¨è¦†ç›– equals() æ–¹æ³•æ—¶åº”å½“æ€»æ˜¯è¦†ç›– hashCode() æ–¹æ³•ï¼Œä¿è¯ç­‰ä»·çš„ä¸¤ä¸ªå¯¹è±¡æ•£åˆ—å€¼ä¹Ÿç›¸ç­‰ï¼› clone()ï¼š Objectçš„ä¸€ä¸ªprotectedæ–¹æ³•ï¼Œå¦‚æœä¸€ä¸ªç±»ä¸æ˜¾å¼é‡å†™è¯¥æ–¹æ³•ï¼Œé‚£è¯¥ç±»å°±ä¸èƒ½è°ƒç”¨clone()æ–¹æ³•ï¼›è€Œä¸”è¯¥ç±»è¦å®ç°Cloneable()æ ‡è®°æ¥å£ï¼Œè¦ä¸ç„¶è°ƒç”¨æ—¶ä¼šæŠ›å‡ºCloneNotSupportedExceptionã€‚ ä½¿ç”¨ clone() æ–¹æ³•æ¥æ‹·è´ä¸€ä¸ªå¯¹è±¡å³å¤æ‚åˆæœ‰é£é™©ï¼Œå®ƒä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶ä¸”è¿˜éœ€è¦ç±»å‹è½¬æ¢ã€‚Effective Java ä¹¦ä¸Šè®²åˆ°ï¼Œæœ€å¥½ä¸è¦å»ä½¿ç”¨ clone()ï¼Œå¯ä»¥ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°æˆ–è€…æ‹·è´å·¥å‚æ¥æ‹·è´ä¸€ä¸ªå¯¹è±¡ã€‚ æ·±æ‹·è´ä¸æµ…æ‹·è´ï¼šåŒºåˆ«åœ¨äºæµ…æ‹·è´æ‹·è´æ—¶ç¢°åˆ°å¯¹è±¡åªæ˜¯å¤åˆ¶äº†å¯¹è±¡çš„å¼•ç”¨ã€‚ å¼‚å¸¸ï¼š Javaä¸C++ï¼š å‚è€ƒï¼š CS-Note/JavaåŸºç¡€]]></content>
      <categories>
        <category>java</category>
        <category>åŸºç¡€</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaå¹¶å‘äº’æ–¥åŒæ­¥]]></title>
    <url>%2F2019%2F02%2F28%2F%E4%BA%92%E6%96%A5%E5%90%8C%E6%AD%A5%2F</url>
    <content type="text"><![CDATA[Javaæä¾›ä¸¤ç§é”æœºåˆ¶æ§åˆ¶å¤šçº¿ç¨‹å¯¹äº’æ–¥èµ„æºçš„äº’æ–¥è®¿é—®ï¼Œä¸€ç§æ˜¯JVMå®ç°çš„synchronizedï¼Œä¸€ç§æ˜¯JDKå®ç°çš„RentranLock. synchronized åŒæ­¥ä¸€ä¸ªä»£ç å—ï¼›åªä½œç”¨äºä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœè°ƒç”¨ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ä¸Šçš„åŒæ­¥ä»£ç å—ï¼Œä¸ä¼šè¿›è¡ŒåŒæ­¥ï¼› 123456789public class SynchronizedExample &#123; public void func1() &#123; synchronized (this) &#123; for (int i = 0; i &lt; 10; i++) &#123; System.out.print(i + " "); &#125; &#125; &#125;&#125; åŒæ­¥ä¸€ä¸ªæ–¹æ³•ï¼›å’ŒåŒæ­¥ä»£ç å—ä¸€æ ·ï¼Œåªä½œç”¨äºç›¸åŒå¯¹è±¡ï¼› 1 åŒæ­¥ä¸€ä¸ªç±»ï¼›ä½œç”¨äºæ•´ä¸ªç±»ï¼Œå³ä¸¤ä¸ªçº¿ç¨‹è°ƒç”¨åŒä¸€ç±»çš„ä¸åŒå¯¹è±¡ä¸Šçš„åŒæ­¥è¯­å¥ï¼Œä¹Ÿä¼šè¿›è¡ŒåŒæ­¥ï¼› 123456public void func() &#123; synchronized (SynchronizedExample.class) &#123; // ... &#125;&#125; åŒæ­¥ä¸€ä¸ªé™æ€æ–¹æ³•ï¼›ä½œç”¨äºæ•´ä¸ªç±» 123public synchronized static void fun() &#123; // ...&#125; RentranLockRentranLockæ˜¯java.util.concurrent(J.U.C)åŒ…ä¸­çš„é”ï¼› Javaå¹¶å‘ä¹‹ReentrantLockè¯¦è§£ ä¸¤è€…çš„å¼‚åŒ é”çš„å®ç°ï¼›synchronizedæ˜¯JVMå®ç°ï¼ŒRentranLockæ˜¯JDKå®ç° æ€§èƒ½ï¼šç”±äºæ–°ç‰ˆæœ¬Javaå¯¹synchronizedè¿›è¡Œäº†å¾ˆå¤š ä¼˜åŒ– ï¼Œä¾‹å¦‚è‡ªæ—‹é”ç­‰ï¼Œä¸¤è€…æ€§èƒ½å¤§è‡´ç›¸åŒ ç­‰å¾…å¯ä¸­æ–­ï¼›å½“ä¸€ä¸ªçº¿ç¨‹é•¿æœŸä¸é‡Šæ”¾é”æ—¶ï¼Œå…¶ä»–åœ¨ç­‰å¾…çš„çº¿ç¨‹å¯ä»¥æ”¾å¼ƒç­‰å¾…å»å¤„ç†å…¶ä»–äº‹æƒ…ï¼›RentranLockå¯ä¸­æ–­ï¼Œè€Œsynchronized`ä¸è¡Œ å…¬å¹³é”ï¼›å³å½“å¤šä¸ªçº¿ç¨‹åœ¨ç­‰å¾…åŒä¸€é”æ—¶ï¼Œå¿…é¡»æŒ‰ç…§ç”³è¯·é”çš„æ—¶é—´é¡ºåºè·å¾—é”ï¼›synchronizedä¸­çš„é”æ˜¯éå…¬å¹³çš„ï¼›RentranLocké»˜è®¤çš„é”ä¹Ÿæ˜¯ä¸å…¬å¹³çš„ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ˜¯å…¬å¹³çš„ ç»‘å®šæ¡ä»¶ï¼›ä¸€ä¸ªRentranLockå¯ä»¥ç»‘å®šå¤šä¸ªConditionå¯¹è±¡ã€‚ åœ¨ä¸€ä¸ªé”ä¸­ä½¿ç”¨å¤šä¸ªæ¡ä»¶ï¼ˆCondition)]]></content>
      <categories>
        <category>java</category>
        <category>å…¶ä»–</category>
      </categories>
      <tags>
        <tag>å¹¶å‘</tag>
        <tag>åŒæ­¥ï¼Œé”</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é¢å‘å¯¹è±¡æ€æƒ³]]></title>
    <url>%2F2019%2F02%2F27%2F%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E6%80%9D%E6%83%B3%2F</url>
    <content type="text"><![CDATA[ä¸‰å¤§ç‰¹æ€§ å°è£… ç»§æ‰¿ å¤šæ€ç¼–è¯‘æ—¶å¤šæ€ï¼šä¸»è¦æŒ‡æ–¹æ³•çš„é‡è½½è¿è¡Œæ—¶å¤šæ€ï¼šä¸‰ä¸ªæ¡ä»¶ï¼ˆç»§æ‰¿ï¼Œé‡å†™ï¼Œå‘ä¸Šè½¬å‹ï¼‰ ç±»å›¾ æ³›åŒ–å…³ç³»ï¼šæè¿°ç»§æ‰¿å…³ç³»ï¼Œextend å®ç°å…³ç³»ï¼šå®ç°ä¸€ä¸ªæ¥å£ï¼Œimplement èšåˆå…³ç³»ï¼šæ•´ä½“å’Œéƒ¨åˆ†ä¸æ˜¯å¼ºä¾èµ–ï¼Œæ•´ä½“ä¸å­˜åœ¨ï¼Œéƒ¨åˆ†å¯ä»¥å­˜åœ¨ ç»„åˆå…³ç³»ï¼šæ•´ä½“å’Œéƒ¨åˆ†å¼ºä¾èµ–ï¼Œæ•´ä½“æ¶ˆå¤±ï¼Œéƒ¨åˆ†è·Ÿç€æ¶ˆå¤± å…³è”å…³ç³»ï¼šè¡¨ç¤ºä¸åŒç±»å¯¹è±¡ä¹‹é—´çš„å…³è”ï¼Œè¿™æ˜¯ä¸€ç§é™æ€å…³ç³»ï¼Œä¸è¿è¡Œè¿‡ç¨‹æ— å…³ï¼Œå¦‚1å¯¹1ï¼Œ1å¯¹å¤šâ€¦ ä¾èµ–å…³ç³»ï¼šåœ¨è¿è¡Œè¿‡ç¨‹ä¸­èµ·ä½œç”¨ï¼Œæœ‰ä¸‰ç§å½¢å¼ï¼šA ç±»æ˜¯ B ç±»æ–¹æ³•çš„å±€éƒ¨å˜é‡ï¼›A ç±»æ˜¯ B ç±»æ–¹æ³•å½“ä¸­çš„ä¸€ä¸ªå‚æ•°ï¼›A ç±»å‘ B ç±»å‘é€æ¶ˆæ¯ï¼Œä»è€Œå½±å“ B ç±»å‘ç”Ÿå˜åŒ– è®¾è®¡åŸåˆ™ï¼ˆS.O.L.I.D) Sï¼šå•ä¸€è´£ä»»åŸåˆ™ ä¿®æ”¹ä¸€ä¸ªç±»çš„åŸå› åªæœ‰ä¸€ä¸ª è®©ä¸€ä¸ªç±»åªè´Ÿè´£ä¸€ä»¶äº‹ï¼Œå½“è¿™ä¸ªç±»éœ€è¦åšè¿‡å¤šçš„äº‹æƒ…ï¼Œåº”è¯¥åˆ†è§£è¿™ä¸ªç±»ï¼›å¦‚æœä¸€ä¸ªç±»æ‰¿æ‹…èŒè´£è¿‡å¤šï¼Œå°±ç­‰äºæŠŠè¿™äº›èŒè´£è€¦åˆåœ¨ä¸€èµ·ï¼Œä¸€ä¸ªèŒè´£çš„å˜åŒ–å¯èƒ½å‰Šå¼±è¯¥ç±»å®Œæˆå…¶ä»–èŒè´£çš„èƒ½åŠ›ã€‚ Oï¼šå¼€æ”¾å°é—­åŸåˆ™ ç±»å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ æ·»åŠ æ–°åŠŸèƒ½æ—¶ä¸ä¿®æ”¹ä»£ç ï¼›è£…é¥°è€…æ¨¡å¼ï¼ŒåŠ¨æ€åœ°å°†è´£ä»»é™„åŠ åˆ°å¯¹è±¡ä¸Šè€Œä¸ç”¨ä¿®æ”¹ä»£ç ã€‚ Lï¼šé‡Œæ°æ›¿æ¢åŸåˆ™ å­ç±»å¿…é¡»å¯ä»¥æ›¿æ¢æ‰€æœ‰çˆ¶ç±»å¯¹è±¡ Iï¼šæ¥å£åˆ†ç¦»åŸåˆ™ ä¸åº”è¯¥å¼ºè¿«å®¢æˆ·ä¾èµ–äºå®ƒä»¬ä¸ç”¨çš„æ–¹æ³•ã€‚ å› æ­¤ä½¿ç”¨å¤šä¸ªä¸“é—¨çš„æ¥å£æ¯”ä½¿ç”¨å•ä¸€çš„æ€»æ¥å£è¦å¥½ Dï¼šä¾èµ–å€’ç½®åŸåˆ™ é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ï¼›æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚ä¾èµ–äºæŠ½è±¡ é«˜å±‚æ¨¡å—åŒ…å«ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­é‡è¦çš„ç­–ç•¥é€‰æ‹©å’Œä¸šåŠ¡æ¨¡å—ï¼Œå¦‚æœé«˜å±‚æ¨¡å—ä¾èµ–äºä½å±‚æ¨¡å—ï¼Œé‚£ä¹ˆä½å±‚æ¨¡å—çš„æ”¹åŠ¨å°±ä¼šç›´æ¥å½±å“åˆ°é«˜å±‚æ¨¡å—ï¼Œä»è€Œè¿«ä½¿é«˜å±‚æ¨¡å—ä¹Ÿéœ€è¦æ”¹åŠ¨ã€‚ ä¾èµ–äºæŠ½è±¡æ„å‘³ç€ï¼š ä»»ä½•å˜é‡éƒ½ä¸åº”è¯¥æŒæœ‰ä¸€ä¸ªæŒ‡å‘å…·ä½“ç±»çš„æŒ‡é’ˆæˆ–è€…å¼•ç”¨ï¼› ä»»ä½•ç±»éƒ½ä¸åº”è¯¥ä»å…·ä½“ç±»æ´¾ç”Ÿï¼› ä»»ä½•æ–¹æ³•éƒ½ä¸åº”è¯¥è¦†å†™å®ƒçš„ä»»ä½•åŸºç±»ä¸­çš„å·²ç»å®ç°çš„æ–¹æ³•ã€‚ å…¶ä»–å¸¸è§åŸåˆ™ è¿ªç±³ç‰¹æ³•åˆ™è¿ªç±³ç‰¹æ³•åˆ™åˆå«ä½œæœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆLeast Knowledge Principleï¼Œç®€å†™LKPï¼‰ï¼Œå°±æ˜¯è¯´ä¸€ä¸ªå¯¹è±¡åº”å½“å¯¹å…¶ä»–å¯¹è±¡æœ‰å°½å¯èƒ½å°‘çš„äº†è§£ï¼Œä¸å’Œé™Œç”Ÿäººè¯´è¯ã€‚ åˆæˆå¤ç”¨åŸåˆ™å°½é‡ä½¿ç”¨å¯¹è±¡ç»„åˆï¼Œè€Œä¸æ˜¯é€šè¿‡ç»§æ‰¿æ¥è¾¾åˆ°å¤ç”¨çš„ç›®çš„ã€‚ å…±åŒå°é—­åŸåˆ™ä¸€èµ·ä¿®æ”¹çš„ç±»ï¼Œåº”è¯¥ç»„åˆåœ¨ä¸€èµ·ï¼ˆåŒä¸€ä¸ªåŒ…é‡Œï¼‰ã€‚å¦‚æœå¿…é¡»ä¿®æ”¹åº”ç”¨ç¨‹åºé‡Œçš„ä»£ç ï¼Œæˆ‘ä»¬å¸Œæœ›æ‰€æœ‰çš„ä¿®æ”¹éƒ½å‘ç”Ÿåœ¨ä¸€ä¸ªåŒ…é‡Œï¼ˆä¿®æ”¹å…³é—­ï¼‰ï¼Œè€Œä¸æ˜¯éå¸ƒåœ¨å¾ˆå¤šåŒ…é‡Œã€‚ ç¨³å®šæŠ½è±¡åŸåˆ™æœ€ç¨³å®šçš„åŒ…åº”è¯¥æ˜¯æœ€æŠ½è±¡çš„åŒ…ï¼Œä¸ç¨³å®šçš„åŒ…åº”è¯¥æ˜¯å…·ä½“çš„åŒ…ï¼Œå³åŒ…çš„æŠ½è±¡ç¨‹åº¦è·Ÿå®ƒçš„ç¨³å®šæ€§æˆæ­£æ¯”ã€‚ ç¨³å®šä¾èµ–åŸåˆ™åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»éƒ½åº”è¯¥æ˜¯ç¨³å®šæ–¹å‘ä¾èµ–çš„ï¼ŒåŒ…è¦ä¾èµ–çš„åŒ…è¦æ¯”è‡ªå·±æ›´å…·æœ‰ç¨³å®šæ€§ã€‚ å‚è€ƒï¼š https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/é¢å‘å¯¹è±¡æ€æƒ³.md]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>ç±»å…³ç³»</tag>
        <tag>æ¦‚å¿µ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¤§æ•°æ®é‡å¤„ç†]]></title>
    <url>%2F2019%2F02%2F27%2F%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%87%8F%E5%A4%84%E7%90%86%2F</url>
    <content type="text"><![CDATA[ç»™å®šaã€bä¸¤ä¸ªæ–‡ä»¶ï¼Œå„å­˜æ”¾50äº¿ä¸ªurlï¼Œæ¯ä¸ªurlå„å 64å­—èŠ‚ï¼Œå†…å­˜é™åˆ¶æ˜¯4Gï¼Œè®©ä½ æ‰¾å‡ºaã€bæ–‡ä»¶å…±åŒçš„urlï¼Ÿæ–¹æ¡ˆ1ï¼šå¯ä»¥ä¼°è®¡æ¯ä¸ªæ–‡ä»¶å®‰çš„å¤§å°ä¸º50GÃ—64=320Gï¼Œè¿œè¿œå¤§äºå†…å­˜é™åˆ¶çš„4Gã€‚æ‰€ä»¥ä¸å¯èƒ½å°†å…¶å®Œå…¨åŠ è½½åˆ°å†…å­˜ä¸­å¤„ç†ã€‚è€ƒè™‘é‡‡å–åˆ†è€Œæ²»ä¹‹çš„æ–¹æ³•ã€‚s éå†æ–‡ä»¶aï¼Œå¯¹æ¯ä¸ªurlæ±‚å– ï¼Œç„¶åæ ¹æ®æ‰€å–å¾—çš„å€¼å°†urlåˆ†åˆ«å­˜å‚¨åˆ°1000ä¸ªå°æ–‡ä»¶ï¼ˆè®°ä¸º ï¼‰ä¸­ã€‚è¿™æ ·æ¯ä¸ªå°æ–‡ä»¶çš„å¤§çº¦ä¸º300Mã€‚s éå†æ–‡ä»¶bï¼Œé‡‡å–å’Œaç›¸åŒçš„æ–¹å¼å°†urlåˆ†åˆ«å­˜å‚¨åˆ°1000å„å°æ–‡ä»¶ï¼ˆè®°ä¸º ï¼‰ã€‚è¿™æ ·å¤„ç†åï¼Œæ‰€æœ‰å¯èƒ½ç›¸åŒçš„urléƒ½åœ¨å¯¹åº”çš„å°æ–‡ä»¶ï¼ˆï¼‰ä¸­ï¼Œä¸å¯¹åº”çš„å°æ–‡ä»¶ä¸å¯èƒ½æœ‰ç›¸åŒçš„urlã€‚ç„¶åæˆ‘ä»¬åªè¦æ±‚å‡º1000å¯¹å°æ–‡ä»¶ä¸­ç›¸åŒçš„urlå³å¯ã€‚s æ±‚æ¯å¯¹å°æ–‡ä»¶ä¸­ç›¸åŒçš„urlæ—¶ï¼Œå¯ä»¥æŠŠå…¶ä¸­ä¸€ä¸ªå°æ–‡ä»¶çš„urlå­˜å‚¨åˆ°hash_setä¸­ã€‚ç„¶åéå†å¦ä¸€ä¸ªå°æ–‡ä»¶çš„æ¯ä¸ªurlï¼Œçœ‹å…¶æ˜¯å¦åœ¨åˆšæ‰æ„å»ºçš„hash_setä¸­ï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå°±æ˜¯å…±åŒçš„urlï¼Œå­˜åˆ°æ–‡ä»¶é‡Œé¢å°±å¯ä»¥äº†ã€‚æ–¹æ¡ˆ2ï¼šå¦‚æœå…è®¸æœ‰ä¸€å®šçš„é”™è¯¯ç‡ï¼Œå¯ä»¥ä½¿ç”¨Bloom filterï¼Œ4Gå†…å­˜å¤§æ¦‚å¯ä»¥è¡¨ç¤º340äº¿bitã€‚å°†å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶ä¸­çš„urlä½¿ç”¨Bloomfilteræ˜ å°„ä¸ºè¿™340äº¿bitï¼Œç„¶åæŒ¨ä¸ªè¯»å–å¦å¤–ä¸€ä¸ªæ–‡ä»¶çš„urlï¼Œæ£€æŸ¥æ˜¯å¦ä¸Bloomfilterï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆè¯¥urlåº”è¯¥æ˜¯å…±åŒçš„urlï¼ˆæ³¨æ„ä¼šæœ‰ä¸€å®šçš„é”™è¯¯ç‡ï¼‰ã€‚ æœ‰10ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶1Gï¼Œæ¯ä¸ªæ–‡ä»¶çš„æ¯ä¸€è¡Œå­˜æ”¾çš„éƒ½æ˜¯ç”¨æˆ·çš„queryï¼Œæ¯ä¸ªæ–‡ä»¶çš„queryéƒ½å¯èƒ½é‡å¤ã€‚è¦æ±‚ä½ æŒ‰ç…§queryçš„é¢‘åº¦æ’åºã€‚æ–¹æ¡ˆ1ï¼šs é¡ºåºè¯»å–10ä¸ªæ–‡ä»¶ï¼ŒæŒ‰ç…§hash(query)%10çš„ç»“æœå°†queryå†™å…¥åˆ°å¦å¤–10ä¸ªæ–‡ä»¶ï¼ˆè®°ä¸ºï¼‰ä¸­ã€‚è¿™æ ·æ–°ç”Ÿæˆçš„æ–‡ä»¶æ¯ä¸ªçš„å¤§å°å¤§çº¦ä¹Ÿ1Gï¼ˆå‡è®¾hashå‡½æ•°æ˜¯éšæœºçš„ï¼‰ã€‚s æ‰¾ä¸€å°å†…å­˜åœ¨2Gå·¦å³çš„æœºå™¨ï¼Œä¾æ¬¡å¯¹ ç”¨hash_map(query, query_count)æ¥ç»Ÿè®¡æ¯ä¸ªqueryå‡ºç°çš„æ¬¡æ•°ã€‚åˆ©ç”¨å¿«é€Ÿ/å †/å½’å¹¶æ’åºæŒ‰ç…§å‡ºç°æ¬¡æ•°è¿›è¡Œæ’åºã€‚å°†æ’åºå¥½çš„queryå’Œå¯¹åº”çš„query_coutè¾“å‡ºåˆ°æ–‡ä»¶ä¸­ã€‚è¿™æ ·å¾—åˆ°äº†10ä¸ªæ’å¥½åºçš„æ–‡ä»¶ï¼ˆè®°ä¸º ï¼‰ã€‚s å¯¹ è¿™10ä¸ªæ–‡ä»¶è¿›è¡Œå½’å¹¶æ’åºï¼ˆå†…æ’åºä¸å¤–æ’åºç›¸ç»“åˆï¼‰ã€‚æ–¹æ¡ˆ2ï¼šä¸€èˆ¬queryçš„æ€»é‡æ˜¯æœ‰é™çš„ï¼Œåªæ˜¯é‡å¤çš„æ¬¡æ•°æ¯”è¾ƒå¤šè€Œå·²ï¼Œå¯èƒ½å¯¹äºæ‰€æœ‰çš„queryï¼Œä¸€æ¬¡æ€§å°±å¯ä»¥åŠ å…¥åˆ°å†…å­˜äº†ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é‡‡ç”¨trieæ ‘/hash_mapç­‰ç›´æ¥æ¥ç»Ÿè®¡æ¯ä¸ªqueryå‡ºç°çš„æ¬¡æ•°ï¼Œç„¶åæŒ‰å‡ºç°æ¬¡æ•°åšå¿«é€Ÿ/å †/å½’å¹¶æ’åºå°±å¯ä»¥äº†ã€‚æ–¹æ¡ˆ3ï¼šä¸æ–¹æ¡ˆ1ç±»ä¼¼ï¼Œä½†åœ¨åšå®Œhashï¼Œåˆ†æˆå¤šä¸ªæ–‡ä»¶åï¼Œå¯ä»¥äº¤ç»™å¤šä¸ªæ–‡ä»¶æ¥å¤„ç†ï¼Œé‡‡ç”¨åˆ†å¸ƒå¼çš„æ¶æ„æ¥å¤„ç†ï¼ˆæ¯”å¦‚MapReduceï¼‰ï¼Œæœ€åå†è¿›è¡Œåˆå¹¶ã€‚ æœ‰ä¸€ä¸ª1Gå¤§å°çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œé‡Œé¢æ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªè¯ï¼Œè¯çš„å¤§å°ä¸è¶…è¿‡16å­—èŠ‚ï¼Œå†…å­˜é™åˆ¶å¤§å°æ˜¯1Mã€‚è¿”å›é¢‘æ•°æœ€é«˜çš„100ä¸ªè¯ã€‚æ–¹æ¡ˆ1ï¼šé¡ºåºè¯»æ–‡ä»¶ä¸­ï¼Œå¯¹äºæ¯ä¸ªè¯xï¼Œå– ï¼Œç„¶åæŒ‰ç…§è¯¥å€¼å­˜åˆ°5000ä¸ªå°æ–‡ä»¶ï¼ˆè®°ä¸º ï¼‰ä¸­ã€‚è¿™æ ·æ¯ä¸ªæ–‡ä»¶å¤§æ¦‚æ˜¯200kå·¦å³ã€‚å¦‚æœå…¶ä¸­çš„æœ‰çš„æ–‡ä»¶è¶…è¿‡äº†1Må¤§å°ï¼Œè¿˜å¯ä»¥æŒ‰ç…§ç±»ä¼¼çš„æ–¹æ³•ç»§ç»­å¾€ä¸‹åˆ†ï¼ŒçŸ¥é“åˆ†è§£å¾—åˆ°çš„å°æ–‡ä»¶çš„å¤§å°éƒ½ä¸è¶…è¿‡1Mã€‚å¯¹æ¯ä¸ªå°æ–‡ä»¶ï¼Œç»Ÿè®¡æ¯ä¸ªæ–‡ä»¶ä¸­å‡ºç°çš„è¯ä»¥åŠç›¸åº”çš„é¢‘ç‡ï¼ˆå¯ä»¥é‡‡ç”¨trieæ ‘/hash_mapç­‰ï¼‰ï¼Œå¹¶å–å‡ºå‡ºç°é¢‘ç‡æœ€å¤§çš„100ä¸ªè¯ï¼ˆå¯ä»¥ç”¨å«100ä¸ªç»“ç‚¹çš„æœ€å°å †ï¼‰ï¼Œå¹¶æŠŠ100è¯åŠç›¸åº”çš„é¢‘ç‡å­˜å…¥æ–‡ä»¶ï¼Œè¿™æ ·åˆå¾—åˆ°äº†5000ä¸ªæ–‡ä»¶ã€‚ä¸‹ä¸€æ­¥å°±æ˜¯æŠŠè¿™5000ä¸ªæ–‡ä»¶è¿›è¡Œå½’å¹¶ï¼ˆç±»ä¼¼ä¸å½’å¹¶æ’åºï¼‰çš„è¿‡ç¨‹äº†ã€‚ æµ·é‡æ—¥å¿—æ•°æ®ï¼Œæå–å‡ºæŸæ—¥è®¿é—®ç™¾åº¦æ¬¡æ•°æœ€å¤šçš„é‚£ä¸ªIPã€‚æ–¹æ¡ˆ1ï¼šé¦–å…ˆæ˜¯è¿™ä¸€å¤©ï¼Œå¹¶ä¸”æ˜¯è®¿é—®ç™¾åº¦çš„æ—¥å¿—ä¸­çš„IPå–å‡ºæ¥ï¼Œé€ä¸ªå†™å…¥åˆ°ä¸€ä¸ªå¤§æ–‡ä»¶ä¸­ã€‚æ³¨æ„åˆ°IPæ˜¯32ä½çš„ï¼Œæœ€å¤šæœ‰ ä¸ªIPã€‚åŒæ ·å¯ä»¥é‡‡ç”¨æ˜ å°„çš„æ–¹æ³•ï¼Œæ¯”å¦‚æ¨¡1000ï¼ŒæŠŠæ•´ä¸ªå¤§æ–‡ä»¶æ˜ å°„ä¸º1000ä¸ªå°æ–‡ä»¶ï¼Œå†æ‰¾å‡ºæ¯ä¸ªå°æ–‡ä¸­å‡ºç°é¢‘ç‡æœ€å¤§çš„IPï¼ˆå¯ä»¥é‡‡ç”¨hash_mapè¿›è¡Œé¢‘ç‡ç»Ÿè®¡ï¼Œç„¶åå†æ‰¾å‡ºé¢‘ç‡æœ€å¤§çš„å‡ ä¸ªï¼‰åŠç›¸åº”çš„é¢‘ç‡ã€‚ç„¶åå†åœ¨è¿™1000ä¸ªæœ€å¤§çš„IPä¸­ï¼Œæ‰¾å‡ºé‚£ä¸ªé¢‘ç‡æœ€å¤§çš„IPï¼Œå³ä¸ºæ‰€æ±‚ã€‚ åœ¨2.5äº¿ä¸ªæ•´æ•°ä¸­æ‰¾å‡ºä¸é‡å¤çš„æ•´æ•°ï¼Œå†…å­˜ä¸è¶³ä»¥å®¹çº³è¿™2.5äº¿ä¸ªæ•´æ•°ã€‚æ–¹æ¡ˆ1ï¼šé‡‡ç”¨2-Bitmapï¼ˆæ¯ä¸ªæ•°åˆ†é…2bitï¼Œ00è¡¨ç¤ºä¸å­˜åœ¨ï¼Œ01è¡¨ç¤ºå‡ºç°ä¸€æ¬¡ï¼Œ10è¡¨ç¤ºå¤šæ¬¡ï¼Œ11æ— æ„ä¹‰ï¼‰è¿›è¡Œï¼Œå…±éœ€å†…å­˜ å†…å­˜ï¼Œè¿˜å¯ä»¥æ¥å—ã€‚ç„¶åæ‰«æè¿™2.5äº¿ä¸ªæ•´æ•°ï¼ŒæŸ¥çœ‹Bitmapä¸­ç›¸å¯¹åº”ä½ï¼Œå¦‚æœæ˜¯00å˜01ï¼Œ01å˜10ï¼Œ10ä¿æŒä¸å˜ã€‚æ‰€æå®Œäº‹åï¼ŒæŸ¥çœ‹bitmapï¼ŒæŠŠå¯¹åº”ä½æ˜¯01çš„æ•´æ•°è¾“å‡ºå³å¯ã€‚æ–¹æ¡ˆ2ï¼šä¹Ÿå¯é‡‡ç”¨ä¸Šé¢˜ç±»ä¼¼çš„æ–¹æ³•ï¼Œè¿›è¡Œåˆ’åˆ†å°æ–‡ä»¶çš„æ–¹æ³•ã€‚ç„¶ååœ¨å°æ–‡ä»¶ä¸­æ‰¾å‡ºä¸é‡å¤çš„æ•´æ•°ï¼Œå¹¶æ’åºã€‚ç„¶åå†è¿›è¡Œå½’å¹¶ï¼Œæ³¨æ„å»é™¤é‡å¤çš„å…ƒç´ ã€‚ æµ·é‡æ•°æ®åˆ†å¸ƒåœ¨100å°ç”µè„‘ä¸­ï¼Œæƒ³ä¸ªåŠæ³•é«˜æ ¡ç»Ÿè®¡å‡ºè¿™æ‰¹æ•°æ®çš„TOP10ã€‚æ–¹æ¡ˆ1ï¼šs åœ¨æ¯å°ç”µè„‘ä¸Šæ±‚å‡ºTOP10ï¼Œå¯ä»¥é‡‡ç”¨åŒ…å«10ä¸ªå…ƒç´ çš„å †å®Œæˆï¼ˆTOP10å°ï¼Œç”¨æœ€å¤§å †ï¼ŒTOP10å¤§ï¼Œç”¨æœ€å°å †ï¼‰ã€‚æ¯”å¦‚æ±‚TOP10å¤§ï¼Œæˆ‘ä»¬é¦–å…ˆå–å‰10ä¸ªå…ƒç´ è°ƒæ•´æˆæœ€å°å †ï¼Œå¦‚æœå‘ç°ï¼Œç„¶åæ‰«æåé¢çš„æ•°æ®ï¼Œå¹¶ä¸å †é¡¶å…ƒç´ æ¯”è¾ƒï¼Œå¦‚æœæ¯”å †é¡¶å…ƒç´ å¤§ï¼Œé‚£ä¹ˆç”¨è¯¥å…ƒç´ æ›¿æ¢å †é¡¶ï¼Œç„¶åå†è°ƒæ•´ä¸ºæœ€å°å †ã€‚æœ€åå †ä¸­çš„å…ƒç´ å°±æ˜¯TOP10å¤§ã€‚s æ±‚å‡ºæ¯å°ç”µè„‘ä¸Šçš„TOP10åï¼Œç„¶åæŠŠè¿™100å°ç”µè„‘ä¸Šçš„TOP10ç»„åˆèµ·æ¥ï¼Œå…±1000ä¸ªæ•°æ®ï¼Œå†åˆ©ç”¨ä¸Šé¢ç±»ä¼¼çš„æ–¹æ³•æ±‚å‡ºTOP10å°±å¯ä»¥äº†ã€‚ æ€ä¹ˆåœ¨æµ·é‡æ•°æ®ä¸­æ‰¾å‡ºé‡å¤æ¬¡æ•°æœ€å¤šçš„ä¸€ä¸ªï¼Ÿæ–¹æ¡ˆ1ï¼šå…ˆåšhashï¼Œç„¶åæ±‚æ¨¡æ˜ å°„ä¸ºå°æ–‡ä»¶ï¼Œæ±‚å‡ºæ¯ä¸ªå°æ–‡ä»¶ä¸­é‡å¤æ¬¡æ•°æœ€å¤šçš„ä¸€ä¸ªï¼Œå¹¶è®°å½•é‡å¤æ¬¡æ•°ã€‚ç„¶åæ‰¾å‡ºä¸Šä¸€æ­¥æ±‚å‡ºçš„æ•°æ®ä¸­é‡å¤æ¬¡æ•°æœ€å¤šçš„ä¸€ä¸ªå°±æ˜¯æ‰€æ±‚ï¼ˆå…·ä½“å‚è€ƒå‰é¢çš„é¢˜ï¼‰ã€‚ ä¸Šåƒä¸‡æˆ–ä¸Šäº¿æ•°æ®ï¼ˆæœ‰é‡å¤ï¼‰ï¼Œç»Ÿè®¡å…¶ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„é’±Nä¸ªæ•°æ®ã€‚æ–¹æ¡ˆ1ï¼šä¸Šåƒä¸‡æˆ–ä¸Šäº¿çš„æ•°æ®ï¼Œç°åœ¨çš„æœºå™¨çš„å†…å­˜åº”è¯¥èƒ½å­˜ä¸‹ã€‚æ‰€ä»¥è€ƒè™‘é‡‡ç”¨hash_map/æœç´¢äºŒå‰æ ‘/çº¢é»‘æ ‘ç­‰æ¥è¿›è¡Œç»Ÿè®¡æ¬¡æ•°ã€‚ç„¶åå°±æ˜¯å–å‡ºå‰Nä¸ªå‡ºç°æ¬¡æ•°æœ€å¤šçš„æ•°æ®äº†ï¼Œå¯ä»¥ç”¨ç¬¬6é¢˜æåˆ°çš„å †æœºåˆ¶å®Œæˆã€‚ 1000ä¸‡å­—ç¬¦ä¸²ï¼Œå…¶ä¸­æœ‰äº›æ˜¯é‡å¤çš„ï¼Œéœ€è¦æŠŠé‡å¤çš„å…¨éƒ¨å»æ‰ï¼Œä¿ç•™æ²¡æœ‰é‡å¤çš„å­—ç¬¦ä¸²ã€‚è¯·æ€ä¹ˆè®¾è®¡å’Œå®ç°ï¼Ÿæ–¹æ¡ˆ1ï¼šè¿™é¢˜ç”¨trieæ ‘æ¯”è¾ƒåˆé€‚ï¼Œhash_mapä¹Ÿåº”è¯¥èƒ½è¡Œã€‚ ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå¤§çº¦æœ‰ä¸€ä¸‡è¡Œï¼Œæ¯è¡Œä¸€ä¸ªè¯ï¼Œè¦æ±‚ç»Ÿè®¡å‡ºå…¶ä¸­æœ€é¢‘ç¹å‡ºç°çš„å‰10ä¸ªè¯ï¼Œè¯·ç»™å‡ºæ€æƒ³ï¼Œç»™å‡ºæ—¶é—´å¤æ‚åº¦åˆ†æã€‚æ–¹æ¡ˆ1ï¼šè¿™é¢˜æ˜¯è€ƒè™‘æ—¶é—´æ•ˆç‡ã€‚ç”¨trieæ ‘ç»Ÿè®¡æ¯ä¸ªè¯å‡ºç°çš„æ¬¡æ•°ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(n _ le)ï¼ˆleè¡¨ç¤ºå•è¯çš„å¹³å‡†é•¿åº¦ï¼‰ã€‚ç„¶åæ˜¯æ‰¾å‡ºå‡ºç°æœ€é¢‘ç¹çš„å‰10ä¸ªè¯ï¼Œå¯ä»¥ç”¨å †æ¥å®ç°ï¼Œå‰é¢çš„é¢˜ä¸­å·²ç»è®²åˆ°äº†ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(n _ lg10)ã€‚æ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦ï¼Œæ˜¯O(n _ le)ä¸O(n _ lg10)ä¸­è¾ƒå¤§çš„å“ªä¸€ä¸ªã€‚ ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œæ‰¾å‡ºå‰10ä¸ªç»å¸¸å‡ºç°çš„è¯ï¼Œä½†è¿™æ¬¡æ–‡ä»¶æ¯”è¾ƒé•¿ï¼Œè¯´æ˜¯ä¸Šäº¿è¡Œæˆ–åäº¿è¡Œï¼Œæ€»ä¹‹æ— æ³•ä¸€æ¬¡è¯»å…¥å†…å­˜ï¼Œé—®æœ€ä¼˜è§£ã€‚æ–¹æ¡ˆ1ï¼šé¦–å…ˆæ ¹æ®ç”¨hashå¹¶æ±‚æ¨¡ï¼Œå°†æ–‡ä»¶åˆ†è§£ä¸ºå¤šä¸ªå°æ–‡ä»¶ï¼Œå¯¹äºå•ä¸ªæ–‡ä»¶åˆ©ç”¨ä¸Šé¢˜çš„æ–¹æ³•æ±‚å‡ºæ¯ä¸ªæ–‡ä»¶ä»¶ä¸­10ä¸ªæœ€å¸¸å‡ºç°çš„è¯ã€‚ç„¶åå†è¿›è¡Œå½’å¹¶å¤„ç†ï¼Œæ‰¾å‡ºæœ€ç»ˆçš„10ä¸ªæœ€å¸¸å‡ºç°çš„è¯ã€‚ 100wä¸ªæ•°ä¸­æ‰¾å‡ºæœ€å¤§çš„100ä¸ªæ•°ã€‚æ–¹æ¡ˆ1ï¼šåœ¨å‰é¢çš„é¢˜ä¸­ï¼Œæˆ‘ä»¬å·²ç»æåˆ°äº†ï¼Œç”¨ä¸€ä¸ªå«100ä¸ªå…ƒç´ çš„æœ€å°å †å®Œæˆã€‚å¤æ‚åº¦ä¸ºO(100w _ lg100)ã€‚æ–¹æ¡ˆ2ï¼šé‡‡ç”¨å¿«é€Ÿæ’åºçš„æ€æƒ³ï¼Œæ¯æ¬¡åˆ†å‰²ä¹‹ååªè€ƒè™‘æ¯”è½´å¤§çš„ä¸€éƒ¨åˆ†ï¼ŒçŸ¥é“æ¯”è½´å¤§çš„ä¸€éƒ¨åˆ†åœ¨æ¯”100å¤šçš„æ—¶å€™ï¼Œé‡‡ç”¨ä¼ ç»Ÿæ’åºç®—æ³•æ’åºï¼Œå–å‰100ä¸ªã€‚å¤æ‚åº¦ä¸ºO(100w_ 100)ã€‚æ–¹æ¡ˆ3ï¼šé‡‡ç”¨å±€éƒ¨æ·˜æ±°æ³•ã€‚é€‰å–å‰100ä¸ªå…ƒç´ ï¼Œå¹¶æ’åºï¼Œè®°ä¸ºåºåˆ—Lã€‚ç„¶åä¸€æ¬¡æ‰«æå‰©ä½™çš„å…ƒç´ xï¼Œä¸æ’å¥½åºçš„100ä¸ªå…ƒç´ ä¸­æœ€å°çš„å…ƒç´ æ¯”ï¼Œå¦‚æœæ¯”è¿™ä¸ªæœ€å°çš„è¦å¤§ï¼Œé‚£ä¹ˆæŠŠè¿™ä¸ªæœ€å°çš„å…ƒç´ åˆ é™¤ï¼Œå¹¶æŠŠxåˆ©ç”¨æ’å…¥æ’åºçš„æ€æƒ³ï¼Œæ’å…¥åˆ°åºåˆ—Lä¸­ã€‚ä¾æ¬¡å¾ªç¯ï¼ŒçŸ¥é“æ‰«æäº†æ‰€æœ‰çš„å…ƒç´ ã€‚å¤æ‚åº¦ä¸ºO(100w*100)ã€‚ å¯»æ‰¾çƒ­é—¨æŸ¥è¯¢ï¼šæœç´¢å¼•æ“ä¼šé€šè¿‡æ—¥å¿—æ–‡ä»¶æŠŠç”¨æˆ·æ¯æ¬¡æ£€ç´¢ä½¿ç”¨çš„æ‰€æœ‰æ£€ç´¢ä¸²éƒ½è®°å½•ä¸‹æ¥ï¼Œæ¯ä¸ªæŸ¥è¯¢ä¸²çš„é•¿åº¦ä¸º1-255å­—èŠ‚ã€‚å‡è®¾ç›®å‰æœ‰ä¸€åƒä¸‡ä¸ªè®°å½•ï¼Œè¿™äº›æŸ¥è¯¢ä¸²çš„é‡å¤è¯»æ¯”è¾ƒé«˜ï¼Œè™½ç„¶æ€»æ•°æ˜¯1åƒä¸‡ï¼Œä½†æ˜¯å¦‚æœå»é™¤é‡å¤å’Œï¼Œä¸è¶…è¿‡3ç™¾ä¸‡ä¸ªã€‚ä¸€ä¸ªæŸ¥è¯¢ä¸²çš„é‡å¤åº¦è¶Šé«˜ï¼Œè¯´æ˜æŸ¥è¯¢å®ƒçš„ç”¨æˆ·è¶Šå¤šï¼Œä¹Ÿå°±è¶Šçƒ­é—¨ã€‚è¯·ä½ ç»Ÿè®¡æœ€çƒ­é—¨çš„10ä¸ªæŸ¥è¯¢ä¸²ï¼Œè¦æ±‚ä½¿ç”¨çš„å†…å­˜ä¸èƒ½è¶…è¿‡1Gã€‚(1) è¯·æè¿°ä½ è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯ï¼›(2) è¯·ç»™å‡ºä¸»è¦çš„å¤„ç†æµç¨‹ï¼Œç®—æ³•ï¼Œä»¥åŠç®—æ³•çš„å¤æ‚åº¦ã€‚æ–¹æ¡ˆ1ï¼šé‡‡ç”¨trieæ ‘ï¼Œå…³é”®å­—åŸŸå­˜è¯¥æŸ¥è¯¢ä¸²å‡ºç°çš„æ¬¡æ•°ï¼Œæ²¡æœ‰å‡ºç°ä¸º0ã€‚æœ€åç”¨10ä¸ªå…ƒç´ çš„æœ€å°æ¨æ¥å¯¹å‡ºç°é¢‘ç‡è¿›è¡Œæ’åºã€‚ ä¸€å…±æœ‰Nä¸ªæœºå™¨ï¼Œæ¯ä¸ªæœºå™¨ä¸Šæœ‰Nä¸ªæ•°ã€‚æ¯ä¸ªæœºå™¨æœ€å¤šå­˜O(N)ä¸ªæ•°å¹¶å¯¹å®ƒä»¬æ“ä½œã€‚å¦‚ä½•æ‰¾åˆ° ä¸ªæ•°ä¸­çš„ä¸­æ•°ï¼Ÿæ–¹æ¡ˆ1ï¼šå…ˆå¤§ä½“ä¼°è®¡ä¸€ä¸‹è¿™äº›æ•°çš„èŒƒå›´ï¼Œæ¯”å¦‚è¿™é‡Œå‡è®¾è¿™äº›æ•°éƒ½æ˜¯32ä½æ— ç¬¦å·æ•´æ•°ï¼ˆå…±æœ‰ ä¸ªï¼‰ã€‚æˆ‘ä»¬æŠŠ0åˆ° çš„æ•´æ•°åˆ’åˆ†ä¸ºNä¸ªèŒƒå›´æ®µï¼Œæ¯ä¸ªæ®µåŒ…å«ä¸ªæ•´æ•°ã€‚æ¯”å¦‚ï¼Œç¬¬ä¸€ä¸ªæ®µä½0åˆ° ï¼Œç¬¬äºŒæ®µä¸º åˆ° ï¼Œâ€¦ï¼Œç¬¬Nä¸ªæ®µä¸º åˆ° ã€‚ç„¶åï¼Œæ‰«ææ¯ä¸ªæœºå™¨ä¸Šçš„Nä¸ªæ•°ï¼ŒæŠŠå±äºç¬¬ä¸€ä¸ªåŒºæ®µçš„æ•°æ”¾åˆ°ç¬¬ä¸€ä¸ªæœºå™¨ä¸Šï¼Œå±äºç¬¬äºŒä¸ªåŒºæ®µçš„æ•°æ”¾åˆ°ç¬¬äºŒä¸ªæœºå™¨ä¸Šï¼Œâ€¦ï¼Œå±äºç¬¬Nä¸ªåŒºæ®µçš„æ•°æ”¾åˆ°ç¬¬Nä¸ªæœºå™¨ä¸Šã€‚æ³¨æ„è¿™ä¸ªè¿‡ç¨‹æ¯ä¸ªæœºå™¨ä¸Šå­˜å‚¨çš„æ•°åº”è¯¥æ˜¯O(N)çš„ã€‚ä¸‹é¢æˆ‘ä»¬ä¾æ¬¡ç»Ÿè®¡æ¯ä¸ªæœºå™¨ä¸Šæ•°çš„ä¸ªæ•°ï¼Œä¸€æ¬¡ç´¯åŠ ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¬kä¸ªæœºå™¨ï¼Œåœ¨è¯¥æœºå™¨ä¸Šç´¯åŠ çš„æ•°å¤§äºæˆ–ç­‰äº ï¼Œè€Œåœ¨ç¬¬k-1ä¸ªæœºå™¨ä¸Šçš„ç´¯åŠ æ•°å°äº ï¼Œå¹¶æŠŠè¿™ä¸ªæ•°è®°ä¸ºxã€‚é‚£ä¹ˆæˆ‘ä»¬è¦æ‰¾çš„ä¸­ä½æ•°åœ¨ç¬¬kä¸ªæœºå™¨ä¸­ï¼Œæ’åœ¨ç¬¬ ä½ã€‚ç„¶åæˆ‘ä»¬å¯¹ç¬¬kä¸ªæœºå™¨çš„æ•°æ’åºï¼Œå¹¶æ‰¾å‡ºç¬¬ä¸ªæ•°ï¼Œå³ä¸ºæ‰€æ±‚çš„ä¸­ä½æ•°ã€‚å¤æ‚åº¦æ˜¯ çš„ã€‚æ–¹æ¡ˆ2ï¼šå…ˆå¯¹æ¯å°æœºå™¨ä¸Šçš„æ•°è¿›è¡Œæ’åºã€‚æ’å¥½åºåï¼Œæˆ‘ä»¬é‡‡ç”¨å½’å¹¶æ’åºçš„æ€æƒ³ï¼Œå°†è¿™Nä¸ªæœºå™¨ä¸Šçš„æ•°å½’å¹¶èµ·æ¥å¾—åˆ°æœ€ç»ˆçš„æ’åºã€‚æ‰¾åˆ°ç¬¬nä¸ªä¾¿æ˜¯æ‰€æ±‚ã€‚å¤æ‚åº¦æ˜¯n(i)çš„ã€‚ æœ€å¤§é—´éš™é—®é¢˜ç»™å®šnä¸ªå®æ•° ï¼Œæ±‚ç€nä¸ªå®æ•°åœ¨å®è½´ä¸Šå‘é‡2ä¸ªæ•°ä¹‹é—´çš„æœ€å¤§å·®å€¼ï¼Œè¦æ±‚çº¿æ€§çš„æ—¶é—´ç®—æ³•ã€‚æ–¹æ¡ˆ1ï¼šæœ€å…ˆæƒ³åˆ°çš„æ–¹æ³•å°±æ˜¯å…ˆå¯¹è¿™nä¸ªæ•°æ®è¿›è¡Œæ’åºï¼Œç„¶åä¸€éæ‰«æå³å¯ç¡®å®šç›¸é‚»çš„æœ€å¤§é—´éš™ã€‚ä½†è¯¥æ–¹æ³•ä¸èƒ½æ»¡è¶³çº¿æ€§æ—¶é—´çš„è¦æ±‚ã€‚æ•…é‡‡å–å¦‚ä¸‹æ–¹æ³•ï¼šs æ‰¾åˆ°nä¸ªæ•°æ®ä¸­æœ€å¤§å’Œæœ€å°æ•°æ®maxå’Œminã€‚s ç”¨n-2ä¸ªç‚¹ç­‰åˆ†åŒºé—´[min, max]ï¼Œå³å°†[min, max]ç­‰åˆ†ä¸ºn-1ä¸ªåŒºé—´ï¼ˆå‰é—­åå¼€åŒºé—´ï¼‰ï¼Œå°†è¿™äº›åŒºé—´çœ‹ä½œæ¡¶ï¼Œç¼–å·ä¸º ï¼Œä¸”æ¡¶çš„ä¸Šç•Œå’Œæ¡¶i+1çš„ä¸‹å±Šç›¸åŒï¼Œå³æ¯ä¸ªæ¡¶çš„å¤§å°ç›¸åŒã€‚æ¯ä¸ªæ¡¶çš„å¤§å°ä¸ºï¼š ã€‚å®é™…ä¸Šï¼Œè¿™äº›æ¡¶çš„è¾¹ç•Œæ„æˆäº†ä¸€ä¸ªç­‰å·®æ•°åˆ—ï¼ˆé¦–é¡¹ä¸ºminï¼Œå…¬å·®ä¸ºï¼‰ï¼Œä¸”è®¤ä¸ºå°†minæ”¾å…¥ç¬¬ä¸€ä¸ªæ¡¶ï¼Œå°†maxæ”¾å…¥ç¬¬n-1ä¸ªæ¡¶ã€‚s å°†nä¸ªæ•°æ”¾å…¥n-1ä¸ªæ¡¶ä¸­ï¼šå°†æ¯ä¸ªå…ƒç´  åˆ†é…åˆ°æŸä¸ªæ¡¶ï¼ˆç¼–å·ä¸ºindexï¼‰ï¼Œå…¶ä¸­ ï¼Œå¹¶æ±‚å‡ºåˆ†åˆ°æ¯ä¸ªæ¡¶çš„æœ€å¤§æœ€å°æ•°æ®ã€‚s æœ€å¤§é—´éš™ï¼šé™¤æœ€å¤§æœ€å°æ•°æ®maxå’Œminä»¥å¤–çš„n-2ä¸ªæ•°æ®æ”¾å…¥n-1ä¸ªæ¡¶ä¸­ï¼Œç”±æŠ½å±‰åŸç†å¯çŸ¥è‡³å°‘æœ‰ä¸€ä¸ªæ¡¶æ˜¯ç©ºçš„ï¼Œåˆå› ä¸ºæ¯ä¸ªæ¡¶çš„å¤§å°ç›¸åŒï¼Œæ‰€ä»¥æœ€å¤§é—´éš™ä¸ä¼šåœ¨åŒä¸€æ¡¶ä¸­å‡ºç°ï¼Œä¸€å®šæ˜¯æŸä¸ªæ¡¶çš„ä¸Šç•Œå’Œæ°”å€™æŸä¸ªæ¡¶çš„ä¸‹ç•Œä¹‹é—´éš™ï¼Œä¸”è¯¥é‡ç­’ä¹‹é—´çš„æ¡¶ï¼ˆå³ä¾¿å¥½åœ¨è¯¥è¿ä¸ªä¾¿å¥½ä¹‹é—´çš„æ¡¶ï¼‰ä¸€å®šæ˜¯ç©ºæ¡¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€å¤§é—´éš™åœ¨æ¡¶içš„ä¸Šç•Œå’Œæ¡¶jçš„ä¸‹ç•Œä¹‹é—´äº§ç”Ÿ ã€‚ä¸€éæ‰«æå³å¯å®Œæˆã€‚ å°†å¤šä¸ªé›†åˆåˆå¹¶æˆæ²¡æœ‰äº¤é›†çš„é›†åˆï¼šç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²çš„é›†åˆï¼Œæ ¼å¼å¦‚ï¼š ã€‚è¦æ±‚å°†å…¶ä¸­äº¤é›†ä¸ä¸ºç©ºçš„é›†åˆåˆå¹¶ï¼Œè¦æ±‚åˆå¹¶å®Œæˆçš„é›†åˆä¹‹é—´æ— äº¤é›†ï¼Œä¾‹å¦‚ä¸Šä¾‹åº”è¾“å‡º ã€‚(1) è¯·æè¿°ä½ è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯ï¼›(2) ç»™å‡ºä¸»è¦çš„å¤„ç†æµç¨‹ï¼Œç®—æ³•ï¼Œä»¥åŠç®—æ³•çš„å¤æ‚åº¦ï¼›(3) è¯·æè¿°å¯èƒ½çš„æ”¹è¿›ã€‚æ–¹æ¡ˆ1ï¼šé‡‡ç”¨å¹¶æŸ¥é›†ã€‚é¦–å…ˆæ‰€æœ‰çš„å­—ç¬¦ä¸²éƒ½åœ¨å•ç‹¬çš„å¹¶æŸ¥é›†ä¸­ã€‚ç„¶åä¾æ‰«ææ¯ä¸ªé›†åˆï¼Œé¡ºåºåˆå¹¶å°†ä¸¤ä¸ªç›¸é‚»å…ƒç´ åˆå¹¶ã€‚ä¾‹å¦‚ï¼Œå¯¹äº ï¼Œé¦–å…ˆæŸ¥çœ‹aaaå’Œbbbæ˜¯å¦åœ¨åŒä¸€ä¸ªå¹¶æŸ¥é›†ä¸­ï¼Œå¦‚æœä¸åœ¨ï¼Œé‚£ä¹ˆæŠŠå®ƒä»¬æ‰€åœ¨çš„å¹¶æŸ¥é›†åˆå¹¶ï¼Œç„¶åå†çœ‹bbbå’Œcccæ˜¯å¦åœ¨åŒä¸€ä¸ªå¹¶æŸ¥é›†ä¸­ï¼Œå¦‚æœä¸åœ¨ï¼Œé‚£ä¹ˆä¹ŸæŠŠå®ƒä»¬æ‰€åœ¨çš„å¹¶æŸ¥é›†åˆå¹¶ã€‚æ¥ä¸‹æ¥å†æ‰«æå…¶ä»–çš„é›†åˆï¼Œå½“æ‰€æœ‰çš„é›†åˆéƒ½æ‰«æå®Œäº†ï¼Œå¹¶æŸ¥é›†ä»£è¡¨çš„é›†åˆä¾¿æ˜¯æ‰€æ±‚ã€‚å¤æ‚åº¦åº”è¯¥æ˜¯O(NlgN)çš„ã€‚æ”¹è¿›çš„è¯ï¼Œé¦–å…ˆå¯ä»¥è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„æ ¹ç»“ç‚¹ï¼Œæ”¹è¿›æŸ¥è¯¢ã€‚åˆå¹¶çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå¤§çš„å’Œå°çš„è¿›è¡Œåˆï¼Œè¿™æ ·ä¹Ÿå‡å°‘å¤æ‚åº¦ã€‚ æœ€å¤§å­åºåˆ—ä¸æœ€å¤§å­çŸ©é˜µé—®é¢˜æ•°ç»„çš„æœ€å¤§å­åºåˆ—é—®é¢˜ï¼šç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­å…ƒç´ æœ‰æ­£ï¼Œä¹Ÿæœ‰è´Ÿï¼Œæ‰¾å‡ºå…¶ä¸­ä¸€ä¸ªè¿ç»­å­åºåˆ—ï¼Œä½¿å’Œæœ€å¤§ã€‚æ–¹æ¡ˆ1ï¼šè¿™ä¸ªé—®é¢˜å¯ä»¥åŠ¨æ€è§„åˆ’çš„æ€æƒ³è§£å†³ã€‚è®¾ è¡¨ç¤ºä»¥ç¬¬iä¸ªå…ƒç´  ç»“å°¾çš„æœ€å¤§å­åºåˆ—ï¼Œé‚£ä¹ˆæ˜¾ç„¶ ã€‚åŸºäºè¿™ä¸€ç‚¹å¯ä»¥å¾ˆå¿«ç”¨ä»£ç å®ç°ã€‚æœ€å¤§å­çŸ©é˜µé—®é¢˜ï¼šç»™å®šä¸€ä¸ªçŸ©é˜µï¼ˆäºŒç»´æ•°ç»„ï¼‰ï¼Œå…¶ä¸­æ•°æ®æœ‰å¤§æœ‰å°ï¼Œè¯·æ‰¾ä¸€ä¸ªå­çŸ©é˜µï¼Œä½¿å¾—å­çŸ©é˜µçš„å’Œæœ€å¤§ï¼Œå¹¶è¾“å‡ºè¿™ä¸ªå’Œã€‚æ–¹æ¡ˆ1ï¼šå¯ä»¥é‡‡ç”¨ä¸æœ€å¤§å­åºåˆ—ç±»ä¼¼çš„æ€æƒ³æ¥è§£å†³ã€‚å¦‚æœæˆ‘ä»¬ç¡®å®šäº†é€‰æ‹©ç¬¬iåˆ—å’Œç¬¬jåˆ—ä¹‹é—´çš„å…ƒç´ ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªèŒƒå›´å†…ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæœ€å¤§å­åºåˆ—é—®é¢˜ã€‚å¦‚ä½•ç¡®å®šç¬¬iåˆ—å’Œç¬¬jåˆ—å¯ä»¥è¯ç”¨æš´æœçš„æ–¹æ³•è¿›è¡Œã€‚ è½¬è‡ªï¼š https://sunjia-704471770-qq-com.iteye.com/blog/1628359]]></content>
      <categories>
        <category>å¤§æ•°æ®é‡</category>
      </categories>
      <tags>
        <tag>æµ·é‡æ•°æ®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Arrays.asList()çš„å‘]]></title>
    <url>%2F2018%2F12%2F18%2FArrays.asList()%E7%9A%84%E5%9D%91%2F</url>
    <content type="text"><![CDATA[é¿å…ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹æ•°ç»„è½¬æ¢ä¸ºåˆ—è¡¨123public static &lt;T&gt; List&lt;T&gt; asList(T... a) &#123; return new ArrayList&lt;&gt;(a);&#125; asListæ¥æ”¶çš„å‚æ•°æ˜¯ä¸€ä¸ªæ³›å‹çš„å˜é•¿å‚æ•°ï¼Œå› ä¸ºåŸºæœ¬æ•°æ®ç±»å‹æ˜¯æ— æ³•æ³›å‹åŒ–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´8ä¸ªåŸºæœ¬ç±»å‹æ— æ³•ä½œä¸ºasListçš„å‚æ•°ï¼Œè¦æƒ³ä½œä¸ºæ³›å‹å‚æ•°å¿…é¡»ä½¿ç”¨å¯¹åº”çš„åŒ…è£…ç±»å‹ asListäº§ç”Ÿçš„åˆ—è¡¨ä¸å¯æ“ä½œå¯¹asListäº§ç”Ÿçš„åˆ—è¡¨ä¸å¯æ“ä½œï¼Œå¦‚add,removeç­‰æ“ä½œï¼Œå¦åˆ™ä¼šæŠ›å‡ºUnsupportedOperationExceptionå¼‚å¸¸ï¼ˆè¡¨ç¤ºlistä¸æ”¯æŒè¯¥æ“ä½œï¼‰ 123public static &lt;T&gt; List&lt;T&gt; asList(T... a) &#123; return new ArrayList&lt;&gt;(a);&#125; æ³¨æ„ï¼š è¿™é‡ŒasListè¿”å›çš„ArrayListå…¶å®ä¸æ˜¯java.util.ArrayListï¼Œè€Œæ˜¯Arraysçš„ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œè¯¥å†…éƒ¨ç±»æä¾›äº†sizeã€toArrayã€getã€setã€indexOfã€contains æ–¹æ³•ï¼Œè€Œåƒ addã€remove ç­‰æ”¹å˜ list ç»“æœçš„æ–¹æ³•ä» AbstractListçˆ¶ç±»ç»§æ‰¿è¿‡æ¥ï¼Œè€Œä¸”AbstractList çˆ¶ç±»çš„add,removeç­‰æ–¹æ³•ä¼šç›´æ¥æŠ›å‡ºUnsupportedOperationExceptionå¼‚å¸¸ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192private static class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements RandomAccess, java.io.Serializable &#123; private static final long serialVersionUID = -2764017481108945198L; private final E[] a; ArrayList(E[] array) &#123; a = Objects.requireNonNull(array); &#125; @Override public int size() &#123; return a.length; &#125; @Override public Object[] toArray() &#123; return a.clone(); &#125; @Override @SuppressWarnings("unchecked") public &lt;T&gt; T[] toArray(T[] a) &#123; int size = size(); if (a.length &lt; size) return Arrays.copyOf(this.a, size, (Class&lt;? extends T[]&gt;) a.getClass()); System.arraycopy(this.a, 0, a, 0, size); if (a.length &gt; size) a[size] = null; return a; &#125; @Override public E get(int index) &#123; return a[index]; &#125; @Override public E set(int index, E element) &#123; E oldValue = a[index]; a[index] = element; return oldValue; &#125; @Override public int indexOf(Object o) &#123; E[] a = this.a; if (o == null) &#123; for (int i = 0; i &lt; a.length; i++) if (a[i] == null) return i; &#125; else &#123; for (int i = 0; i &lt; a.length; i++) if (o.equals(a[i])) return i; &#125; return -1; &#125; @Override public boolean contains(Object o) &#123; return indexOf(o) != -1; &#125; @Override public Spliterator&lt;E&gt; spliterator() &#123; return Spliterators.spliterator(a, Spliterator.ORDERED); &#125; @Override public void forEach(Consumer&lt;? super E&gt; action) &#123; Objects.requireNonNull(action); for (E e : a) &#123; action.accept(e); &#125; &#125; @Override public void replaceAll(UnaryOperator&lt;E&gt; operator) &#123; Objects.requireNonNull(operator); E[] a = this.a; for (int i = 0; i &lt; a.length; i++) &#123; a[i] = operator.apply(a[i]); &#125; &#125; @Override public void sort(Comparator&lt;? super E&gt; c) &#123; Arrays.sort(a, c); &#125; &#125; å‚è€ƒæ–‡ç« ï¼š http://wiki.jikexueyuan.com/project/java-enhancement/java-thirtysix.html]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>javaå®¹å™¨</tag>
        <tag>ArrayList</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Vectorä¸ArrayList]]></title>
    <url>%2F2018%2F12%2F18%2FVector%E4%B8%8EArrayList%2F</url>
    <content type="text"><![CDATA[Vectorçš„å®ç° ä¸ArrayListçš„å®ç°ç±»ä¼¼ï¼Œä½†æ˜¯ä½¿ç”¨äº†synchronizedè¿›è¡ŒåŒæ­¥ã€‚ ArrayListçš„å®ç° 12345678910111213public synchronized boolean add(E e) &#123; modCount++; ensureCapacityHelper(elementCount + 1); elementData[elementCount++] = e; return true;&#125;public synchronized E get(int index) &#123; if (index &gt;= elementCount) throw new ArrayIndexOutOfBoundsException(index); return elementData(index);&#125; ä¸ArrayListçš„æ¯”è¾ƒ Vectoræ˜¯åŒæ­¥çš„ï¼Œå› æ­¤å¼€é”€å°±æ¯”ArrayListè¦å¤§ï¼Œè®¿é—®é€Ÿåº¦æ›´æ…¢ã€‚æœ€å¥½ä½¿ç”¨ArrayListï¼Œå› ä¸ºåŒæ­¥æ“ä½œå®Œå…¨å¯ä»¥ç”±ç¨‹åºå‘˜è‡ªå·±æ§åˆ¶ã€‚ Vectoræ¯æ¬¡æ‰©å®¹è¯·æ±‚å…¶å¤§å°çš„2å€ç©ºé—´ï¼Œè€ŒArrayListæ˜¯1.5å€ã€‚ æ›¿ä»£æ–¹æ¡ˆ å¯ä»¥ä½¿ç”¨ Collections.synchronizedList()ï¼›å¾—åˆ°ä¸€iä¸ªçº¿ç¨‹å®‰å…¨çš„ArrayList 12List&lt;String&gt; list = new ArrayList&lt;&gt;();List&lt;String&gt; synList = Collections.synchronizedList(list); ä¹Ÿå¯ä»¥ä½¿ç”¨concurrentå¹¶å‘åŒ…ä¸‹çš„CopyOnWriteArrayListç±» 1List&lt;String&gt; list = new CopyOnWriteArrayList&lt;&gt;();]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>javaå®¹å™¨</tag>
        <tag>ArrayList</tag>
        <tag>Vector</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ArrayListæºç åˆ†æ]]></title>
    <url>%2F2018%2F12%2F18%2FArrayList%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[ArrayListç±»çš„å®šä¹‰ï¼Œçˆ¶ç±»åŠå®ç°çš„æ¥å£ï¼š123public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable ç»§æ‰¿AbstractListç±»ï¼Œè¯¥ç±»ä¸­å®ç°äº†getï¼Œaddï¼Œremoveï¼Œclearï¼ŒindexOfï¼ŒlastIndexOfï¼Œå’Œè·å–è¿­ä»£å™¨ç­‰æ–¹æ³•ï¼Œå…¶ä¸­indexOfå’ŒlastIndexOfæŸ¥æ‰¾å…ƒç´ æ˜¯ç”¨ListIteratorå®ç°çš„ï¼› å®ç°RandomAccessæ¥å£ï¼Œè¯¥æ¥å£ç©ºçš„ï¼Œå³æ ‡è®°æ¥å£ï¼Œé‚£ä¹ˆå®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ * Marker interface used by List implementations to indicate that * they support fast (generally constant time) random access. The primary * purpose of this interface is to allow generic algorithms to alter their * behavior to provide good performance when applied to either random or * sequential access lists. * ä»¥ä¸Šæ˜¯jdkå®˜æ–¹æ–‡æ¡£çš„è§£é‡Šï¼Œå³RandomAccessæ˜¯Listå®ç°é”ä½¿ç”¨çš„æ ‡è®°æ¥å£ï¼Œ * ç”¨æ¥è¡¨æ˜å…¶æ”¯æŒå¿«é€Ÿï¼ˆé€šå¸¸æ˜¯å›ºå®šæ—¶é—´ï¼‰éšæœºè®¿é—®ã€‚ * æ­¤æ¥å£çš„ä¸»è¦ç›®çš„æ˜¯å…è®¸ä¸€èˆ¬çš„ç®—æ³•æ›´æ”¹å…¶è¡Œä¸ºï¼Œ * ä»è€Œåœ¨å°†å…¶åº”ç”¨åˆ°éšæœºæˆ–è¿ç»­è®¿é—®åˆ—è¡¨æ—¶èƒ½æä¾›è‰¯å¥½çš„æ€§èƒ½ RandomAccess è¿™ä¸ªæ ‡è®°æ¥å£å°±æ˜¯æ ‡è®°èƒ½å¤Ÿéšæœºè®¿é—®å…ƒç´ çš„é›†åˆï¼Œ ç®€å•æ¥è¯´å°±æ˜¯åº•å±‚æ˜¯æ•°ç»„å®ç°çš„é›†åˆã€‚æ›´å…·ä½“çš„å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼š https://juejin.im/post/5a26134af265da43085de060 å®ç°äº† Cloneable æ¥å£ï¼Œä»¥æŒ‡ç¤º Object.clone() æ–¹æ³•å¯ä»¥åˆæ³•åœ°å¯¹è¯¥ç±»å®ä¾‹è¿›è¡ŒæŒ‰å­—æ®µå¤åˆ¶ã€‚ å¦‚æœåœ¨æ²¡æœ‰å®ç° Cloneableæ¥å£çš„å®ä¾‹ä¸Šè°ƒç”¨ Object çš„ clone æ–¹æ³•ï¼Œåˆ™ä¼šå¯¼è‡´æŠ›å‡ºCloneNotSupportedExceptionå¼‚å¸¸ã€‚ ç±»é€šè¿‡å®ç° java.io.Serializable æ¥å£ä»¥å¯ç”¨å…¶åºåˆ—åŒ–åŠŸèƒ½ã€‚æœªå®ç°æ­¤æ¥å£çš„ç±»å°†æ— æ³•ä½¿å…¶ä»»ä½•çŠ¶æ€åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–ã€‚ æ‰©å®¹ æ•°ç»„çš„é»˜è®¤å¤§å°ä¸º10 1private static final int DEFAULT_CAPACITY = 10; æ·»åŠ å…ƒç´ æ—¶ä½¿ç”¨ensureCapacityInternal()æ–¹æ³•æ¥ä¿è¯å®¹é‡è¶³å¤Ÿï¼Œå¦‚æœä¸å¤Ÿæ—¶ï¼Œéœ€è¦ä½¿ç”¨grow()æ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼Œæ–°å®¹é‡çš„å¤§å°ä¸ºoldCapacity + (oldCapacity &gt;&gt; 1) ï¼Œä¹Ÿå°±æ˜¯æ—§å®¹é‡çš„1.5å€ã€‚ æ‰©å®¹æ“ä½œéœ€è¦è°ƒç”¨ Array.copyOf()æŠŠåŸæ•°ç»„æ•´ä¸ªå¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ï¼Œè¿™ä¸ªæ“ä½œä»£ä»·å¾ˆé«˜ï¼Œå› æ­¤æœ€å¥½åœ¨åˆ›å»ºArrayListå¯¹è±¡æ—¶å°±æŒ‡å®šå¤§æ¦‚å®¹é‡å¤§å°ï¼Œå‡å°‘æ‰©å®¹æ“ä½œçš„æ¬¡æ•°ã€‚ 12345678910111213141516171819202122232425262728293031public boolean add(E e)&#123; ensureCapacityInternal(size + 1); //increments modCount!! elementData[size++] = e; return true;&#125;public void ensureCapacityInternal(int minCapacity)&#123; if(elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA)&#123; minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity); &#125; ensureExplicitCapacity(minCapacity);&#125;public void ensureExplicitCapacity(int minCapacity)&#123; modCount++; //overflow-conscious code if(minCapacity - elementData.length &gt; 0) grow(minCapacity);&#125;public void grow(int minCapacity)&#123; //overflow-conscious code int oldCapacity = elementData.length; int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); if(newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; if(newCapacity - MAX_ARRAAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); //minCapacity is usually close to size, so this is a win elementData = Arrays.copyOf(elementData, newCapacity);;&#125; åˆ é™¤å…ƒç´  éœ€è¦è°ƒç”¨System.arraycopy()å°†index+1åé¢çš„å…ƒç´ éƒ½å¤åˆ¶åˆ°indexä½ç½®ä¸Šï¼Œè¯¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼Œå¯ä»¥çœ‹å‡ºArrayListåˆ é™¤å…ƒç´ çš„ä»£ä»·æ˜¯éå¸¸é«˜çš„ã€‚ 12345678910public E remove(int index)&#123; rangeCheck(index); modCount++; E oldValue = elementData(index); int numMoved = size - index -1;; if(numMoved &gt; 0) System.arraycopy(elementData, index+1, elementData, index, numMoved) elementData[--size] = null; //clear to let GC do its work return oldValue;&#125; éƒ¨åˆ†åºåˆ—åŒ– ArrayListåŸºäºæ•°ç»„å®ç°ï¼Œå¹¶ä¸”å…·æœ‰åŠ¨æ€æ‰©å®¹ç‰¹æ€§ï¼Œå› æ­¤ä¿å­˜å…ƒç´ çš„æ•°ç»„ä¸ä¸€å®šéƒ½ä¼šè¢«ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±æ²¡å¿…è¦å…¨éƒ¨è¿›è¡Œåºåˆ—åŒ–ã€‚ä¿å­˜å…ƒç´ çš„æ•°ç»„elementDataä½¿ç”¨transientä¿®é¥°ï¼Œè¯¥å…³é”®è¯å£°æ˜æ•°ç»„é»˜è®¤ä¸ä¼šè¢«åºåˆ—åŒ–ã€‚ 1transient Object[] elementData; // non-private to simplify nested class access ArrayListå®ç°äº†writeObject()å’ŒreadObject()æ¥æ§åˆ¶åªåºåˆ—åŒ–æ•°ç»„ä¸­æœ‰å…ƒç´ å¡«å……é‚£éƒ¨åˆ†å†…å®¹ 12345678910111213141516171819202122232425262728293031323334353637383940private void writeObject(java.io.ObjectOutputStream s) throws java.io.Exception&#123; //write out element count, and any hidden stuff int expectedModCount = modCount; s.defaultWriteObject(); //write out size as capacity for behavioural compatibility with clone() s.writeInt(size); //write out all elements in the proper order for(int i=0; i&lt;size; i++)&#123; s.writeObject(elementData[i]) &#125; if(modCount != expectedModCount)&#123; throw new ConcurrentModificationException(); &#125;&#125;private void readObject(java.io.ObjectInputStream s) throws java.io.IOException, ClassNotFoundException &#123; elementData = EMPTY_ELEMENTDATA; // Read in size, and any hidden stuff s.defaultReadObject(); // Read in capacity s.readInt(); // ignored if (size &gt; 0) &#123; // be like clone(), allocate array based upon size not capacity ensureCapacityInternal(size); Object[] a = elementData; // Read in all elements in the proper order. for (int i=0; i&lt;size; i++) &#123; a[i] = s.readObject(); &#125; &#125;&#125; * åºåˆ—åŒ–æ—¶éœ€è¦è¦ä½¿ç”¨`ObjectOutputStream`çš„`writeObject()`å°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµå¹¶è¾“å‡ºã€‚è€Œ`writeObject()`æ–¹æ³•åœ¨ä¼ å…¥çš„å¯¹è±¡å­˜åœ¨`writeObject()`å­˜åœ¨`writeObject()`çš„æ—¶å€™ä¼šå»åå°„è°ƒç”¨è¯¥å¯¹è±¡çš„`writeObject()`æ¥å®ç°åºåˆ—åŒ–ã€‚ * ååºåˆ—åŒ–ä½¿ç”¨çš„æ˜¯`ObjectInputStream`çš„`readObject()`æ–¹æ³•ï¼ŒåŸç†ç±»ä¼¼ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œoosçš„`writeObject(list)`æ–¹æ³•ï¼Œä¼ å…¥çš„å¯¹è±¡listå­˜åœ¨è‡ªå·±çš„`writeObject()`æ–¹æ³•ï¼Œåˆ™åå°„è°ƒç”¨listå¯¹è±¡çš„`writeObject()`æ–¹æ³•æ¥å®ç°éƒ¨åˆ†åºåˆ—åŒ–ï¼ˆæœ‰å†…å®¹çš„æ•°ç»„éƒ¨åˆ†ï¼‰ 123ArrayList list = new ArrayList();ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(file));oos.writeObject(list); Fail-Fast fail-fastï¼Œå¿«é€Ÿå¤±è´¥ï¼Œæ˜¯Javaé›†åˆçš„ä¸€ç§é”™è¯¯æ£€æµ‹æœºåˆ¶ã€‚è¿­ä»£å™¨çš„å¿«é€Ÿå¤±è´¥è¡Œä¸ºæ— æ³•å¾—åˆ°ä¿è¯ï¼Œå› ä¸ºä¸€èˆ¬æ¥è¯´ï¼Œä¸å¯èƒ½å¯¹æ˜¯å¦å‡ºç°ä¸åŒæ­¥å¹¶å‘ä¿®æ”¹åšå‡ºä»»ä½•ç¡¬æ€§ä¿è¯ã€‚å¿«é€Ÿå¤±è´¥è¿­ä»£å™¨ä¼šå°½æœ€å¤§åŠªåŠ›æŠ›å‡º ConcurrentModificationExceptionã€‚å› æ­¤ï¼Œä¸ºæé«˜è¿™ç±»è¿­ä»£å™¨çš„æ­£ç¡®æ€§è€Œç¼–å†™ä¸€ä¸ªä¾èµ–äºæ­¤å¼‚å¸¸çš„ç¨‹åºæ˜¯é”™è¯¯çš„åšæ³•ï¼šè¿­ä»£å™¨çš„å¿«é€Ÿå¤±è´¥è¡Œä¸ºåº”è¯¥ä»…ç”¨äºæ£€æµ‹ bugã€‚ è¯¦ç»†å¯è§ï¼š https://blog.csdn.net/chenssy/article/details/38151189 modCountç”¨æ¥è®°å½•ArrayListç»“æ„å‘ç”Ÿå˜åŒ–çš„æ¬¡æ•°ï¼Œç»“æ„å‘ç”Ÿå˜åŒ–æ˜¯æŒ‡æ·»åŠ æˆ–è€…åˆ é™¤è‡³å°‘ä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰æ“ä½œï¼Œæˆ–è€…æ˜¯è°ƒæ•´å†…éƒ¨æ•°ç»„å¤§å°ï¼Œä»…ä»…åªæ˜¯è®¾ç½®å…ƒç´ çš„å€¼ä¸ç®—ç»“æ„å‘ç”Ÿå˜åŒ–ã€‚ åœ¨è¿›è¡Œåºåˆ—åŒ–æˆ–è€…è¿­ä»£ç­‰æ“ä½œæ—¶ï¼Œéœ€è¦æ¯”è¾ƒæ“ä½œå‰åmodCountæ˜¯å¦æ”¹å˜ï¼Œå¦‚æœæ”¹å˜äº†éœ€è¦æŠ›å‡ºConcurrentModificationExceptionã€‚ toArray()å¼‚å¸¸é—®é¢˜ ArrayListä¸­æä¾›äº†2ä¸ªtoArray()æ–¹æ³•ï¼š 12Object[] toArray()&lt;T&gt; T[] toArray(T[] contents) è°ƒç”¨toArray()å‡½æ•°ä¼šæŠ›å‡ºâ€java.lang.ClassCastExceptionâ€å¼‚å¸¸ï¼Œä½†æ˜¯è°ƒç”¨toArray(T[] contents)èƒ½æ­£å¸¸è¿”å›T[]ã€‚toArray()ä¼šæŠ›å‡ºå¼‚å¸¸æ˜¯å› ä¸ºtoArray()è¿”å›çš„æ˜¯Object[]æ•°ç»„ï¼Œå°†Object[]è½¬æ¢ä¸ºå…¶å®ƒç±»å‹ï¼ˆæ¯”å¦‚å°†Object[]è½¬æ¢ä¸ºInteger[]ï¼‰åˆ™ä¼šæŠ›å‡ºâ€java.lang.ClassCastExceptionâ€å¼‚å¸¸ï¼Œå› ä¸ºjavaä¸æ”¯æŒå‘ä¸‹è½¬å‹ã€‚è§£å†³è¯¥é—®é¢˜çš„åŠæ³•æ˜¯è°ƒç”¨T[] toArray(T[] contents)ï¼Œè€Œä¸æ˜¯Object[] toArray()ã€‚]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>javaå®¹å™¨</tag>
        <tag>ArrayList</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¿­ä»£å™¨æ¨¡å¼ä¸Javaå®¹å™¨]]></title>
    <url>%2F2018%2F12%2F18%2F%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F%E4%B8%8EJava%E5%AE%B9%E5%99%A8%2F</url>
    <content type="text"><![CDATA[è¿­ä»£å™¨æ¨¡å¼è¿­ä»£å™¨æ¨¡å¼ï¼Œæä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­å„ä¸ªå…ƒç´ , è€Œåˆæ— é¡»æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºï¼Œå±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚æŠŠåœ¨å…ƒç´ ä¹‹é—´æ¸¸èµ°åœ°è´£ä»»äº¤ç»™è¿­ä»£å™¨ï¼Œè€Œä¸æ˜¯èšåˆå¯¹è±¡ï¼Œå¹¶å¯ä»¥ä»¥ä¸åŒæ–¹å¼æ¥éå†æ•´ä¸ªèšåˆå¯¹è±¡ã€‚ ä¼˜ç‚¹ï¼š æ”¯æŒä»¥ä¸åŒæ–¹å¼éå†ä¸€ä¸ªèšåˆå¯¹è±¡ï¼› å°†å­˜å‚¨æ•°æ®å’Œéå†æ•°æ®åœ°èŒè´£åˆ†ç¦»ï¼Œç®€åŒ–äº†èšåˆç±»ï¼› åœ¨åŒä¸€èšåˆä¸Šå¯ä»¥æ‹¥æœ‰å¤šä¸ªéå†ã€‚ ç¼ºç‚¹ï¼š å°†å­˜å‚¨æ•°æ®å’Œéå†æ•°æ®åœ°èŒè´£åˆ†ç¦»ï¼Œå¢åŠ æ–°åœ°èšåˆç±»æ—¶ï¼Œéœ€è¦å¢åŠ å¯¹åº”çš„è¿­ä»£å™¨ï¼Œç±»çš„ä¸ªæ•°æˆå¯¹å¢åŠ ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚ å®ç° æ€è·¯ï¼š åˆ›å»ºä¸€ä¸ªå™è¿°å¯¼èˆªæ–¹æ³•çš„Iteratoræ¥å£å’Œä¸€ä¸ªè¿”å›è¿­ä»£å™¨çš„Containeræ¥å£ï¼›å®ç°äº†Containeræ¥å£çš„å®ä½“ç±»è´Ÿè´£å®ç°Iteratoræ¥å£; IteratorPatternDemoï¼Œæˆ‘ä»¬çš„æ¼”ç¤ºç±»ä½¿ç”¨å®ä½“ç±» NamesRepository æ¥æ‰“å° NamesRepository ä¸­å­˜å‚¨ä¸ºé›†åˆçš„Namesã€‚ Iteratoræ¥å£ï¼š 1234public interface Iterator &#123; public boolean hasNext(); public Object next();&#125; Containeræ¥å£ 123public interface Container &#123; public Iterator getIterator();&#125; åˆ›å»ºå®ç°äº† Container æ¥å£çš„å®ä½“ç±»ã€‚è¯¥ç±»æœ‰å®ç°äº† Iterator æ¥å£çš„å†…éƒ¨ç±» NameIterator 1234567891011121314151617181920212223242526272829public class NameRepository implements Container &#123; public String names[] = &#123;"Robert" , "John" ,"Julie" , "Lora"&#125;; @Override public Iterator getIterator() &#123; return new NameIterator(); &#125; private class NameIterator implements Iterator &#123; int index; @Override public boolean hasNext() &#123; if(index &lt; names.length)&#123; return true; &#125; return false; &#125; @Override public Object next() &#123; if(this.hasNext())&#123; return names[index++]; &#125; return null; &#125; &#125;&#125; ä½¿ç”¨ NameRepository æ¥è·å–è¿­ä»£å™¨ï¼Œå¹¶æ‰“å°åå­— 1234567891011public class IteratorPatternDemo &#123; public static void main(String[] args) &#123; NameRepository namesRepository = new NameRepository(); for(Iterator iter = namesRepository.getIterator(); iter.hasNext();)&#123; String name = (String)iter.next(); System.out.println("Name : " + name); &#125; &#125;&#125; æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š Name : Robert Name : John Name : Julie Name : Lora javaå®¹å™¨ä¸­çš„è¿­ä»£å™¨æ¨¡å¼ å…¶ä¸­ListIteratorå’ŒIterableæ¥å£ä¸­å®šä¹‰äº†è·å–è¿­ä»£å™¨çš„æ–¹æ³•iterator()ï¼› Collectionæ¥å£ç»§æ‰¿äº†Iterableæ¥å£ï¼Œå…¶ä¸­çš„ iterator() æ–¹æ³•èƒ½å¤Ÿäº§ç”Ÿä¸€ä¸ª Iterator å¯¹è±¡ï¼Œé€šè¿‡è¿™ä¸ªå¯¹è±¡å°±å¯ä»¥è¿­ä»£éå†Collection ä¸­çš„å…ƒç´ ï¼› å…³äºListIteratorå’ŒIteratorçš„å¼‚åŒç‚¹ï¼š ä¸€ï¼ç›¸åŒç‚¹ éƒ½æ˜¯è¿­ä»£å™¨ï¼Œå½“éœ€è¦å¯¹é›†åˆä¸­å…ƒç´ è¿›è¡Œéå†ä¸éœ€è¦å¹²æ¶‰å…¶éå†è¿‡ç¨‹æ—¶ï¼Œè¿™ä¸¤ç§è¿­ä»£å™¨éƒ½å¯ä»¥ä½¿ç”¨ã€‚ 1 äºŒï¼ä¸åŒç‚¹ ä½¿ç”¨èŒƒå›´ä¸åŒï¼ŒIteratorå¯ä»¥åº”ç”¨äºæ‰€æœ‰çš„é›†åˆï¼ŒSetã€Listå’ŒMapå’Œè¿™äº›é›†åˆçš„å­ç±»å‹ã€‚è€ŒListIteratoråªèƒ½ ç”¨äºListåŠå…¶å­ç±»å‹ã€‚ ListIteratoræœ‰addæ–¹æ³•ï¼Œå¯ä»¥å‘Listä¸­æ·»åŠ å¯¹è±¡ï¼Œè€ŒIteratorä¸èƒ½ã€‚ ListIteratorå’ŒIteratoréƒ½æœ‰hasNext()å’Œnext()æ–¹æ³•ï¼Œå¯ä»¥å®ç°é¡ºåºå‘åéå†ï¼Œä½†æ˜¯ListIteratoræœ‰hasPrevi ous()å’Œprevious()æ–¹æ³•ï¼Œå¯ä»¥å®ç°é€†å‘ï¼ˆé¡ºåºå‘å‰ï¼‰éå†ã€‚Iteratorä¸å¯ä»¥ã€‚ ListIteratorå¯ä»¥å®šä½å½“å‰ç´¢å¼•çš„ä½ç½®ï¼ŒnextIndex()å’ŒpreviousIndex()å¯ä»¥å®ç°ã€‚Iteratoræ²¡æœ‰æ­¤åŠŸèƒ½ã€‚ éƒ½å¯å®ç°åˆ é™¤æ“ä½œï¼Œä½†æ˜¯ListIteratorå¯ä»¥å®ç°å¯¹è±¡çš„ä¿®æ”¹ï¼Œset()æ–¹æ³•å¯ä»¥å®ç°ã€‚Iteratorä»…èƒ½éå†ï¼Œä¸èƒ½ä¿®æ”¹ã€‚ è¯¦ç»†å¯å»ï¼š https://www.cnblogs.com/a842297171/p/5379130.html]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>è¡Œä¸ºå‹æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è¡Œä¸ºå‹æ¨¡å¼</tag>
        <tag>è¿­ä»£å™¨æ¨¡å¼</tag>
        <tag>Javaå®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UMLå„ç§çº¿çš„å«ä¹‰]]></title>
    <url>%2F2018%2F12%2F18%2FUML%E5%90%84%E7%A7%8D%E7%BA%BF%E7%9A%84%E5%90%AB%E4%B9%89%2F</url>
    <content type="text"><![CDATA[ç‚¹å‡»åŸæ–‡ï¼š http://www.cnblogs.com/me115/p/4092632.html å†…å®¹ç›®å½•ï¼š ä»ä¸€ä¸ªç¤ºä¾‹å¼€å§‹ ç±»ä¹‹é—´çš„å…³ç³» æ—¶åºå›¾ é™„å½•ï¼šã€Šå›¾è¯´è®¾è®¡æ¨¡å¼ã€‹ çœ‹æ‡‚UMLç±»å›¾å’Œæ—¶åºå›¾è¿™é‡Œä¸ä¼šå°†UMLçš„å„ç§å…ƒç´ éƒ½æåˆ°ï¼Œæˆ‘åªæƒ³è®²è®²ç±»å›¾ä¸­å„ä¸ªç±»ä¹‹é—´çš„å…³ç³»ï¼› èƒ½çœ‹æ‡‚ç±»å›¾ä¸­å„ä¸ªç±»ä¹‹é—´çš„çº¿æ¡ã€ç®­å¤´ä»£è¡¨ä»€ä¹ˆæ„æ€åï¼Œä¹Ÿå°±è¶³å¤Ÿåº”å¯¹ æ—¥å¸¸çš„å·¥ä½œå’Œäº¤æµï¼›åŒæ—¶ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½å°†ç±»å›¾æ‰€è¡¨è¾¾çš„å«ä¹‰å’Œæœ€ç»ˆçš„ä»£ç å¯¹åº”èµ·æ¥ï¼› æœ‰äº†è¿™äº›çŸ¥è¯†ï¼Œçœ‹åé¢ç« èŠ‚çš„è®¾è®¡æ¨¡å¼ç»“æ„å›¾å°±æ²¡æœ‰ä»€ä¹ˆé—®é¢˜äº†ï¼› æœ¬ç« æ‰€æœ‰å›¾å½¢ä½¿ç”¨Enterprise Architect 9.2æ¥ç”»,æ‰€æœ‰ç¤ºä¾‹è¯¦è§æ ¹ç›®å½•ä¸‹çš„design_patterns.EAP ä»ä¸€ä¸ªç¤ºä¾‹å¼€å§‹è¯·çœ‹ä»¥ä¸‹è¿™ä¸ªç±»å›¾ï¼Œç±»ä¹‹é—´çš„å…³ç³»æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„ï¼š è½¦çš„ç±»å›¾ç»“æ„ä¸º&lt;&gt;ï¼Œè¡¨ç¤ºè½¦æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼› å®ƒæœ‰ä¸¤ä¸ªç»§æ‰¿ç±»ï¼šå°æ±½è½¦å’Œè‡ªè¡Œè½¦ï¼›å®ƒä»¬ä¹‹é—´çš„å…³ç³»ä¸ºå®ç°å…³ç³»ï¼Œä½¿ç”¨å¸¦ç©ºå¿ƒç®­å¤´çš„è™šçº¿è¡¨ç¤ºï¼› å°æ±½è½¦ä¸ºä¸SUVä¹‹é—´ä¹Ÿæ˜¯ç»§æ‰¿å…³ç³»ï¼Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»ä¸ºæ³›åŒ–å…³ç³»ï¼Œä½¿ç”¨å¸¦ç©ºå¿ƒç®­å¤´çš„å®çº¿è¡¨ç¤ºï¼› å°æ±½è½¦ä¸å‘åŠ¨æœºä¹‹é—´æ˜¯ç»„åˆå…³ç³»ï¼Œä½¿ç”¨å¸¦å®å¿ƒç®­å¤´çš„å®çº¿è¡¨ç¤ºï¼› å­¦ç”Ÿä¸ç­çº§ä¹‹é—´æ˜¯èšåˆå…³ç³»ï¼Œä½¿ç”¨å¸¦ç©ºå¿ƒç®­å¤´çš„å®çº¿è¡¨ç¤ºï¼› å­¦ç”Ÿä¸èº«ä»½è¯ä¹‹é—´ä¸ºå…³è”å…³ç³»ï¼Œä½¿ç”¨ä¸€æ ¹å®çº¿è¡¨ç¤ºï¼› å­¦ç”Ÿä¸Šå­¦éœ€è¦ç”¨åˆ°è‡ªè¡Œè½¦ï¼Œä¸è‡ªè¡Œè½¦æ˜¯ä¸€ç§ä¾èµ–å…³ç³»ï¼Œä½¿ç”¨å¸¦ç®­å¤´çš„è™šçº¿è¡¨ç¤ºï¼› ä¸‹é¢è¯¦ç»†ä»‹ç»è¿™å…­ç§å…³ç³»ï¼› ç±»ä¹‹é—´çš„å…³ç³»æ³›åŒ–å…³ç³»(generalization)ç±»çš„ç»§æ‰¿ç»“æ„è¡¨ç°åœ¨UMLä¸­ä¸ºï¼šæ³›åŒ–(generalize)ä¸å®ç°(realize)ï¼š ç»§æ‰¿å…³ç³»ä¸º is-açš„å…³ç³»ï¼›ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´å¦‚æœå¯ä»¥ç”¨ is-a æ¥è¡¨ç¤ºï¼Œå°±æ˜¯ç»§æ‰¿å…³ç³»ï¼šï¼ˆ..æ˜¯..) egï¼šè‡ªè¡Œè½¦æ˜¯è½¦ã€çŒ«æ˜¯åŠ¨ç‰© æ³›åŒ–å…³ç³»ç”¨ä¸€æ¡å¸¦ç©ºå¿ƒç®­å¤´çš„ç›´æ¥è¡¨ç¤ºï¼›å¦‚ä¸‹å›¾è¡¨ç¤ºï¼ˆAç»§æ‰¿è‡ªBï¼‰ï¼› egï¼šæ±½è½¦åœ¨ç°å®ä¸­æœ‰å®ç°ï¼Œå¯ç”¨æ±½è½¦å®šä¹‰å…·ä½“çš„å¯¹è±¡ï¼›æ±½è½¦ä¸SUVä¹‹é—´ä¸ºæ³›åŒ–å…³ç³»ï¼› æ³¨ï¼šæœ€ç»ˆä»£ç ä¸­ï¼Œæ³›åŒ–å…³ç³»è¡¨ç°ä¸ºç»§æ‰¿éæŠ½è±¡ç±»ï¼› å®ç°å…³ç³»(realize)å®ç°å…³ç³»ç”¨ä¸€æ¡å¸¦ç©ºå¿ƒç®­å¤´çš„è™šçº¿è¡¨ç¤ºï¼› egï¼šâ€è½¦â€ä¸ºä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œåœ¨ç°å®ä¸­å¹¶æ— æ³•ç›´æ¥ç”¨æ¥å®šä¹‰å¯¹è±¡ï¼›åªæœ‰æŒ‡æ˜å…·ä½“çš„å­ç±»(æ±½è½¦è¿˜æ˜¯è‡ªè¡Œè½¦)ï¼Œæ‰å¯ä»¥ç”¨æ¥å®šä¹‰å¯¹è±¡ï¼ˆâ€è½¦â€è¿™ä¸ªç±»åœ¨C++ä¸­ç”¨æŠ½è±¡ç±»è¡¨ç¤ºï¼Œåœ¨JAVAä¸­æœ‰æ¥å£è¿™ä¸ªæ¦‚å¿µï¼Œæ›´å®¹æ˜“ç†è§£ï¼‰ æ³¨ï¼šæœ€ç»ˆä»£ç ä¸­ï¼Œå®ç°å…³ç³»è¡¨ç°ä¸ºç»§æ‰¿æŠ½è±¡ç±»ï¼› èšåˆå…³ç³»(aggregation)èšåˆå…³ç³»ç”¨ä¸€æ¡å¸¦ç©ºå¿ƒè±å½¢ç®­å¤´çš„ç›´çº¿è¡¨ç¤ºï¼Œå¦‚ä¸‹å›¾è¡¨ç¤ºAèšåˆåˆ°Bä¸Šï¼Œæˆ–è€…è¯´Bç”±Aç»„æˆï¼› èšåˆå…³ç³»ç”¨äºè¡¨ç¤ºå®ä½“å¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œè¡¨ç¤ºæ•´ä½“ç”±éƒ¨åˆ†æ„æˆçš„è¯­ä¹‰ï¼›ä¾‹å¦‚ä¸€ä¸ªéƒ¨é—¨ç”±å¤šä¸ªå‘˜å·¥ç»„æˆï¼› ä¸ç»„åˆå…³ç³»ä¸åŒçš„æ˜¯ï¼Œæ•´ä½“å’Œéƒ¨åˆ†ä¸æ˜¯å¼ºä¾èµ–çš„ï¼Œå³ä½¿æ•´ä½“ä¸å­˜åœ¨äº†ï¼Œéƒ¨åˆ†ä»ç„¶å­˜åœ¨ï¼›ä¾‹å¦‚ï¼Œ éƒ¨é—¨æ’¤é”€äº†ï¼Œäººå‘˜ä¸ä¼šæ¶ˆå¤±ï¼Œä»–ä»¬ä¾ç„¶å­˜åœ¨ï¼› ç»„åˆå…³ç³»(composition)ç»„åˆå…³ç³»ç”¨ä¸€æ¡å¸¦å®å¿ƒè±å½¢ç®­å¤´ç›´çº¿è¡¨ç¤ºï¼Œå¦‚ä¸‹å›¾è¡¨ç¤ºAç»„æˆBï¼Œæˆ–è€…Bç”±Aç»„æˆï¼› ä¸èšåˆå…³ç³»ä¸€æ ·ï¼Œç»„åˆå…³ç³»åŒæ ·è¡¨ç¤ºæ•´ä½“ç”±éƒ¨åˆ†æ„æˆçš„è¯­ä¹‰ï¼›æ¯”å¦‚å…¬å¸ç”±å¤šä¸ªéƒ¨é—¨ç»„æˆï¼› ä½†ç»„åˆå…³ç³»æ˜¯ä¸€ç§å¼ºä¾èµ–çš„ç‰¹æ®Šèšåˆå…³ç³»ï¼Œå¦‚æœæ•´ä½“ä¸å­˜åœ¨äº†ï¼Œåˆ™éƒ¨åˆ†ä¹Ÿä¸å­˜åœ¨äº†ï¼›ä¾‹å¦‚ï¼Œ å…¬å¸ä¸å­˜åœ¨äº†ï¼Œéƒ¨é—¨ä¹Ÿå°†ä¸å­˜åœ¨äº†ï¼› å…³è”å…³ç³»(association)å…³è”å…³ç³»æ˜¯ç”¨ä¸€æ¡ç›´çº¿è¡¨ç¤ºçš„ï¼›å®ƒæè¿°ä¸åŒç±»çš„å¯¹è±¡ä¹‹é—´çš„ç»“æ„å…³ç³»ï¼›å®ƒæ˜¯ä¸€ç§é™æ€å…³ç³»ï¼Œé€šå¸¸ä¸è¿è¡ŒçŠ¶æ€æ— å…³ï¼Œä¸€èˆ¬ç”±å¸¸è¯†ç­‰å› ç´ å†³å®šçš„ï¼›å®ƒä¸€èˆ¬ç”¨æ¥å®šä¹‰å¯¹è±¡ä¹‹é—´é™æ€çš„ã€å¤©ç„¶çš„ç»“æ„ï¼› æ‰€ä»¥ï¼Œå…³è”å…³ç³»æ˜¯ä¸€ç§â€œå¼ºå…³è”â€çš„å…³ç³»ï¼› æ¯”å¦‚ï¼Œä¹˜è½¦äººå’Œè½¦ç¥¨ä¹‹é—´å°±æ˜¯ä¸€ç§å…³è”å…³ç³»ï¼›å­¦ç”Ÿå’Œå­¦æ ¡å°±æ˜¯ä¸€ç§å…³è”å…³ç³»ï¼› å…³è”å…³ç³»é»˜è®¤ä¸å¼ºè°ƒæ–¹å‘ï¼Œè¡¨ç¤ºå¯¹è±¡é—´ç›¸äº’çŸ¥é“ï¼›å¦‚æœç‰¹åˆ«å¼ºè°ƒæ–¹å‘ï¼Œå¦‚ä¸‹å›¾ï¼Œè¡¨ç¤ºAçŸ¥é“Bï¼Œä½† Bä¸çŸ¥é“Aï¼› æ³¨ï¼šåœ¨æœ€ç»ˆä»£ç ä¸­ï¼Œå…³è”å¯¹è±¡é€šå¸¸æ˜¯ä»¥æˆå‘˜å˜é‡çš„å½¢å¼å®ç°çš„ï¼› ä¾èµ–å…³ç³»(dependency)ä¾èµ–å…³ç³»æ˜¯ç”¨ä¸€å¥—å¸¦ç®­å¤´çš„è™šçº¿è¡¨ç¤ºçš„ï¼›å¦‚ä¸‹å›¾è¡¨ç¤ºAä¾èµ–äºBï¼›ä»–æè¿°ä¸€ä¸ªå¯¹è±¡åœ¨è¿è¡ŒæœŸé—´ä¼šç”¨åˆ°å¦ä¸€ä¸ªå¯¹è±¡çš„å…³ç³»ï¼› ä¸å…³è”å…³ç³»ä¸åŒçš„æ˜¯ï¼Œå®ƒæ˜¯ä¸€ç§ä¸´æ—¶æ€§çš„å…³ç³»ï¼Œé€šå¸¸åœ¨è¿è¡ŒæœŸé—´äº§ç”Ÿï¼Œå¹¶ä¸”éšç€è¿è¡Œæ—¶çš„å˜åŒ–ï¼› ä¾èµ–å…³ç³»ä¹Ÿå¯èƒ½å‘ç”Ÿå˜åŒ–ï¼› æ˜¾ç„¶ï¼Œä¾èµ–ä¹Ÿæœ‰æ–¹å‘ï¼ŒåŒå‘ä¾èµ–æ˜¯ä¸€ç§éå¸¸ç³Ÿç³•çš„ç»“æ„ï¼Œæˆ‘ä»¬æ€»æ˜¯åº”è¯¥ä¿æŒå•å‘ä¾èµ–ï¼Œæœç»åŒå‘ä¾èµ–çš„äº§ç”Ÿï¼› æ³¨ï¼šåœ¨æœ€ç»ˆä»£ç ä¸­ï¼Œä¾èµ–å…³ç³»ä½“ç°ä¸ºç±»æ„é€ æ–¹æ³•åŠç±»æ–¹æ³•çš„ä¼ å…¥å‚æ•°ï¼Œç®­å¤´çš„æŒ‡å‘ä¸ºè°ƒç”¨å…³ç³»ï¼›ä¾èµ–å…³ç³»å¤„ç†ä¸´æ—¶çŸ¥é“å¯¹æ–¹å¤–ï¼Œè¿˜æ˜¯â€œä½¿ç”¨â€å¯¹æ–¹çš„æ–¹æ³•å’Œå±æ€§ï¼› æ—¶åºå›¾ä¸ºäº†å±•ç¤ºå¯¹è±¡ä¹‹é—´çš„äº¤äº’ç»†èŠ‚ï¼Œåç»­ç« èŠ‚å¯¹è®¾è®¡æ¨¡å¼ä¸­æ¯ä¸ªæ¨¡å¼çš„ä»‹ç»ï¼Œéƒ½ä¼šç”¨åˆ°æ—¶åºå›¾ï¼› æ—¶åºå›¾ï¼ˆSequence Diagramï¼‰æ˜¯æ˜¾ç¤ºå¯¹è±¡ä¹‹é—´äº¤äº’çš„å›¾ï¼Œè¿™äº›å¯¹è±¡æ˜¯æŒ‰æ—¶é—´é¡ºåºæ’åˆ—çš„ã€‚æ—¶åºå›¾ä¸­æ˜¾ç¤ºçš„æ˜¯å‚ä¸äº¤äº’çš„å¯¹è±¡åŠå…¶å¯¹è±¡ä¹‹é—´æ¶ˆæ¯äº¤äº’çš„é¡ºåºã€‚ æ—¶åºå›¾åŒ…æ‹¬çš„å»ºæ¨¡å…ƒç´ ä¸»è¦æœ‰ï¼šå¯¹è±¡ï¼ˆActorï¼‰ã€ç”Ÿå‘½çº¿ï¼ˆLifelineï¼‰ã€æ§åˆ¶ç„¦ç‚¹ï¼ˆFocus of controlï¼‰ã€æ¶ˆæ¯ï¼ˆMessageï¼‰ç­‰ç­‰ã€‚ å…³äºæ—¶åºå›¾ï¼Œä»¥ä¸‹è¿™ç¯‡æ–‡ç« å°†æ¦‚å¿µä»‹ç»çš„æ¯”è¾ƒè¯¦ç»†ï¼Œæ›´å¤šå®ä¾‹åº”ç”¨ï¼Œå‚åŠ åç»­ç« èŠ‚ä¸­çš„æ¨¡å¼ä¸­çš„æ—¶åºå›¾ï¼› http://smartlife.blog.51cto.com/1146871/284874 é™„å½•ï¼šã€Šå›¾è¯´è®¾è®¡æ¨¡å¼ã€‹æœ¬æ–‡ä¸ºå¼€æºä¹¦ç± ã€Šå›¾è¯´è®¾è®¡æ¨¡å¼ã€‹ çš„ç¬¬ä¸€ç¯‡ï¼Œç›®å‰è¿™æœ¬ä¹¦åŸºæœ¬å®Œæˆï¼› è¿™æœ¬ä¹¦ä½¿ç”¨å›¾å½¢å’Œä»£ç ç»“åˆçš„æ–¹å¼æ¥è§£æè®¾è®¡æ¨¡å¼ï¼›æ¯ä¸ªæ¨¡å¼éƒ½æœ‰ç›¸åº”çš„å¯¹è±¡ç»“æ„å›¾ï¼ŒåŒæ—¶ä¸ºäº†å±•ç¤ºå¯¹è±¡é—´çš„äº¤äº’ç»†èŠ‚ï¼Œ æˆ‘ä¼šç”¨åˆ°æ—¶åºå›¾æ¥ä»‹ç»å…¶å¦‚ä½•è¿è¡Œï¼›ï¼ˆåœ¨çŠ¶æ€æ¨¡å¼ä¸­ï¼Œè¿˜ä¼šç”¨åˆ°çŠ¶æ€å›¾ï¼Œè¿™ç§å›¾çš„ä½¿ç”¨å¯¹äºç†è§£çŠ¶æ€çš„è½¬æ¢éå¸¸ç›´è§‚ï¼‰ è¯¦æƒ…è¯·è§ï¼š https://github.com/me115/design_patterns ï¼ˆgithubä¸­åŒ…å«ä¹¦ä¸­æ‰€æœ‰æºä»£ç åŠå„ä¸ªæ¨¡å¼çš„ç±»å›¾ï¼‰]]></content>
      <categories>
        <category>java</category>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>uml</tag>
        <tag>ç±»å…³ç³»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä»‹ç»åŠåˆ†ç±»]]></title>
    <url>%2F2018%2F12%2F18%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D%E5%8F%8A%E5%88%86%E7%B1%BB%2F</url>
    <content type="text"><![CDATA[æ¦‚è¿°è®¾è®¡æ¨¡å¼æ˜¯é’ˆå¯¹æŸä¸€ç±»é—®é¢˜çš„æœ€ä¼˜è§£å†³æ–¹æ¡ˆï¼Œæ˜¯ä»è®¸å¤šä¼˜ç§€çš„è½¯ä»¶ç³»ç»Ÿæ€»ç»“å‡ºæ¥çš„ã€‚Javaä¸­è®¾è®¡æ¨¡å¼é€šå¸¸æœ‰23ç§ã€‚æ¨¡å¼å¯ä»¥åˆ†æˆ3å¤§ç±»ï¼š åˆ›å»ºå‹ã€è¡Œä¸ºå‹ã€ç»“æ„å‹ åˆ›å»ºå‹æ¨¡å¼åˆ›å»ºå‹æ¨¡å¼æ¶‰åŠ å¯¹è±¡çš„å®ä¾‹åŒ– ï¼Œç‰¹ç‚¹æ˜¯ä¸è®©ç”¨æˆ·ä»£ç ä¾èµ–äºå¯¹è±¡çš„åˆ›å»ºæˆ–æ’åˆ—æ–¹å¼ï¼Œé¿å…ç”¨æˆ·ç›´æ¥ä½¿ç”¨newåˆ›å»ºå¯¹è±¡åˆ›å»ºå‹æ¨¡å¼æœ‰ä»¥ä¸‹5ç§ï¼š å·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ–¹æ³•æ¨¡å¼ã€ç”Ÿæˆå™¨æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€‚ è¡Œä¸ºå‹æ¨¡å¼è¡Œä¸ºå‹æ¨¡å¼æ¶‰åŠæ€æ ·åˆç†çš„è®¾è®¡å¯¹è±¡ä¹‹é—´çš„ äº¤äº’é€šä¿¡ ï¼Œä»¥åŠæ€æ ·åˆç†ä¸ºå¯¹è±¡ åˆ†é…èŒè´£ ï¼Œè®©è®¾è®¡å¯Œæœ‰å¼¹æ€§ï¼Œæ˜“ç»´æŠ¤ï¼Œæ˜“å¤ç”¨è¡Œä¸ºå‹æ¨¡å¼æœ‰ä»¥ä¸‹11ç§ï¼š è´£ä»»é“¾æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€è§£é‡Šå™¨æ¨¡å¼ã€è¿­ä»£å™¨æ¨¡å¼ã€ä¸­ä»‹è€…æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€è®¿é—®è€…æ¨¡å¼ã€‚ ç»“æ„å‹æ¨¡å¼ç»“æ„å‹æ¨¡å¼æ¶‰åŠå¦‚ä½• ç»„åˆç±»å’Œå¯¹è±¡ä»¥å½¢æˆæ›´å¤§çš„ç»“æ„ ï¼Œå’Œç±»æœ‰å…³çš„ç»“æ„å‹æ¨¡å¼æ¶‰åŠå¦‚ä½• åˆç†ä½¿ç”¨ç»§æ‰¿æœºåˆ¶ ï¼Œå’Œå¯¹è±¡æœ‰å…³çš„ç»“æ„å‹æ¨¡å¼æ¶‰åŠå¦‚ä½•åˆç†åœ°ä½¿ç”¨å¯¹è±¡ç»„åˆæœºåˆ¶ ã€‚ç»“æ„å‹æ¨¡å¼æœ‰ä»¥ä¸‹7ç§ï¼š é€‚é…å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€äº«å…ƒæ¨¡å¼ã€å¤–è§‚æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€è£…é¥°æ¨¡å¼ã€‚]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[é€‚é…å™¨æ¨¡å¼]]></title>
    <url>%2F2018%2F12%2F18%2F%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[å®šä¹‰é€‚é…å™¨æ¨¡å¼çš„å®šä¹‰ï¼šå°†æŸä¸ªç±»çš„æ¥å£è½¬æ¢ä¸ºæ¥å£å®¢æˆ·æ‰€éœ€ç±»å‹ï¼Œé€‚é…å™¨æ¨¡å¼è§£å†³çš„é—®é¢˜æ˜¯ï¼šä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œã€ä¸èƒ½ç»Ÿä¸€ç®¡ç†çš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€å¯ä»¥è¿›è¡ŒåŒæ„ç®¡ç†ã€‚ ä¸¾ä¾‹å®ç°è¿™é‡Œæœ‰æ•™å¸ˆæ¥å£ITeacherã€ç¨‹åºå‘˜æ¥å£IProgrammerï¼Œåˆ†åˆ«ç”¨äºå®šä¹‰ä»–ä»¬å„è‡ªå·¥ç§çš„å…·ä½“å·¥ä½œã€‚ç„¶åå®šä¹‰æ·±åœ³å¤§å­¦çš„æ•™å¸ˆSZUTeacherã€è…¾è®¯çš„ç¨‹åºå‘˜TcProgrammerã€‚è¿™äº›ä¸åŒçš„å·¥ç§æ‰€ä½œçš„å·¥ä½œéƒ½å„è‡ªä¸åŒï¼Œæ— æ³•è¿›è¡Œç»Ÿä¸€ç®¡ç†ï¼ŒååŒå·¥ä½œã€‚æˆ‘ä»¬è¦åšçš„æ˜¯å°†è¿™äº›ä¸åŒå·¥ç§çš„å·¥ä½œå†…å®¹å…¨éƒ¨è¾“å‡ºã€‚ ITeacheræ¥å£ 12345public interface ITeacher &#123; void teach();&#125; IProgrammeræ¥å£ 12345public interface IProgrammer &#123; void code();&#125; SZUTeacherå®ç°ç±» 1234567891011public class SZUTeacher implements ITeacher &#123; @Override public void teach() &#123; System.out.println("æ•™ç¦»æ•£æ•°å­¦ï¼");; &#125;&#125; TcProgrammerå®ç°ç±» 1234567891011public class TcProgrammer implements IProgrammer &#123; @Override public void code() &#123; System.out.println("ç¼–phpç¨‹åºï¼");; &#125;&#125; ä¸ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ä¸ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ï¼Œè°ƒç”¨è€…éœ€è¦å®šä¹‰å‡ºæ‰€æœ‰å·¥ä½œçš„å¯¹è±¡ï¼Œç„¶åé€ä¸ªå¯¹è±¡è°ƒç”¨è‡ªå·±çš„å·¥ä½œæ–¹æ³•ã€‚ â€‹123456789public class Test1 &#123; public static void main(String[] args) &#123; ITeacher teacher = new SZUTeacher(); IProgrammer programmer = new TcProgrammer(); //é€ä¸ªå¯¹è±¡è°ƒç”¨è‡ªå·±çš„å·¥ä½œæ–¹æ³• teacher.teach(); programmer.code(); &#125;&#125; åªå®šä¹‰ä¸€ä¸ªé€‚é…å™¨å®ç°ç±»è¿™ç§æ–¹å¼ç±»ä¼¼ä¸å¤šåŠŸèƒ½å……ç”µå™¨ï¼Œä¸€ä¸ªç”µæºæ’å¤´ä¸Šæ¥ç€å¤šç§ç±»å‹çš„å……ç”µæ¥å£ã€‚ç”¨æˆ·ä½¿ç”¨å……ç”µå™¨å……ç”µæ—¶ï¼Œéœ€è¦ä½¿ç”¨ç”µå™¨æ¥å£ä¸å¤šåŠŸèƒ½å……ç”µå™¨çš„å……ç”µæ’å£é€ä¸ªå¯¹æ¯”ï¼Œæ¥å£åŒ¹é…åˆ™å¯ä»¥å¼€å§‹å……ç”µã€‚ é€‚é…å™¨æ¥å£ 1234567public interface IWorkerAdapter &#123; //ä¸ºäº†å…¼å®¹æ‰€æœ‰å·¥ç§å‘˜å·¥ï¼Œè¿™é‡Œçš„å‚æ•°å¿…é¡»æ˜¯Objectç±»å‹ void work(Object worker);&#125; å•ä¸ªé€‚é…å™¨å®ç°ç±» 1234567891011121314151617181920public class WorkerAdapter implements IWorkerAdapter &#123; @Override public void work(Object worker) &#123; if(worker instanceof ITeacher)&#123; ((ITeacher) worker).teach(); &#125; if(worker instanceof IProgrammer)&#123; ((IProgrammer) worker).code(); &#125; &#125;&#125; è°ƒç”¨è€… 123456789101112131415161718192021public class Test2 &#123; public static void main(String[] args) &#123; ITeacher teacher = new SZUTeacher(); IProgrammer programmer = new TcProgrammer(); Object[] workers = &#123;teacher, programmer&#125;; IWorkerAdapter workerAdapter = new WorkerAdapter(); for(Object worker:workers)&#123; workerAdapter.work(worker); &#125; &#125;&#125; ä¸ºæ¯ä¸€ä¸ªå·¥ç§å®šä¹‰ä¸€ä¸ªé€‚é…å™¨ä¸ºæ¯ä¸€ä¸ªå·¥ç§å®šä¹‰ä¸€ä¸ªé€‚é…å™¨ é€‚é…å™¨æ¥å£ 123456789public interface IWorkerAdapter2 &#123; void work(Object worker); //åˆ¤æ–­å½“å‰é€‚é…å™¨æ˜¯å¦æ”¯æŒæŒ‡å®šå·¥ç§å¯¹è±¡ boolean supprots(Object worker);&#125; Teacheré€‚é…å™¨å®ç°ç±» 123456789101112131415public class TeacherAdapter implements IWorkerAdapter2 &#123; @Override public void work(Object worker) &#123; ((ITeacher)worker).teach(); &#125; @Override public boolean supprots(Object worker) &#123; return (worker instanceof ITeacher); &#125;&#125; Programmeré€‚é…å™¨å®ç°ç±» 123456789101112131415public class ProgrammerAdapter implements IWorkerAdapter2 &#123; @Override public void work(Object worker) &#123; ((IProgrammer)worker).code(); &#125; @Override public boolean supprots(Object worker) &#123; return (worker instanceof IProgrammer); &#125;&#125; è°ƒç”¨è€… 1234567891011121314151617181920212223242526272829303132333435public class Test3 &#123; public static void main(String[] args) &#123; ITeacher teacher = new SZUTeacher(); IProgrammer programmer = new TcProgrammer(); Object[] workers = &#123;teacher, programmer&#125;; for(Object worker:workers)&#123; IWorkerAdapter2 adapter = getAdapter(worker); adapter.work(worker); &#125; &#125; private static IWorkerAdapter2 getAdapter(Object worker) &#123; IWorkerAdapter2 teacherAdapter = new TeacherAdapter(); IWorkerAdapter2 programmerAdapter = new ProgrammerAdapter(); //è·å–æ‰€æœ‰å·¥ç§é€‚é…å™¨ IWorkerAdapter2[] allAdapter = &#123;teacherAdapter, programmerAdapter&#125;; //éå†æ¯ä¸€ä¸ªé€‚é…å™¨ï¼Œå°è¯•å“ªä¸€ä¸ªé€‚é…å™¨æ˜¯å¯¹åº”å·¥ç§ for(IWorkerAdapter2 adapter:allAdapter)&#123; if(adapter.supprots(worker))&#123; return adapter; &#125; &#125; return null; &#125;&#125; è¡¥å……ï¼šç¼ºçœé€‚é…å™¨æ¨¡å¼ ç¼ºçœé€‚é…å™¨æ¨¡å¼æ˜¯ç”±é€‚é…å™¨æ¨¡å¼ç®€åŒ–è€Œæ¥ï¼Œçœç•¥äº†é€‚é…å™¨æ¨¡å¼ä¸­ç›®æ ‡æ¥å£ï¼Œä¹Ÿå°±æ˜¯æºæ¥å£å’Œç›®æ ‡æ¥å£ç›¸åŒï¼ŒåŸæ¥å£ä¸ºæ¥å£ï¼Œç›®æ ‡æ¥å£ä¸ºç±» å…¸å‹çš„ç¼ºçœé€‚é…å™¨æ¨¡å¼æ˜¯JavaEEè§„èŒƒä¸­çš„Servletæ¥å£ä¸GenericServletæŠ½è±¡ç±» Servletæ¥å£ä¸­åŒ…å«äº”ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œè€Œå…¶ä¸­çš„service()æ–¹æ³•æ‰æ˜¯ç”¨äºå®ç°ä¸šåŠ¡é€»è¾‘çš„ã€å¿…é¡»è¦å®ç°çš„æ–¹æ³•ï¼Œå¦å¤–å››ä¸ªæ–¹æ³•ä¸€èˆ¬éƒ½æ˜¯ç©ºå®ç°ï¼Œæˆ–ç®€å•å®ç° GenericServletæŠ½è±¡ç±»å®ç°äº†Servletæ¥å£çš„service()æ–¹æ³•ä»¥å¤–çš„å¦å¤–å››ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥è‡ªå®šä¹‰çš„Servletåªéœ€è¦ç»§æ‰¿GenericServletæŠ½è±¡ç±»ï¼Œå®ç°service()æ–¹æ³•å³å¯ï¼Œæ— éœ€å†å®ç°Servletæ¥å£ã€‚]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>ç»“æ„å‹æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>ç»“æ„å‹æ¨¡å¼</tag>
        <tag>é€‚é…å™¨æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»£ç†æ¨¡å¼]]></title>
    <url>%2F2018%2F12%2F17%2F%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[1.å¯¹ä»£ç†æ¨¡å¼çš„ç†è§£ ä»£ç†æ¨¡å¼çš„å®šä¹‰ï¼šä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå¯¹è±¡ä¸é€‚åˆæˆ–è€…ä¸èƒ½ç›´æ¥å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä»£ç†å¯¹è±¡å¯ä»¥åœ¨å®¢æˆ·ç±»å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹ä½œç”¨ã€‚ ç™¾åº¦ç™¾ç§‘ã€Šä»£ç†æ¨¡å¼ã€‹ ä½¿ç”¨ä»£ç†å¯¹è±¡ï¼Œæ˜¯ä¸ºäº†åœ¨ä¸ä¿®æ”¹ç›®æ ‡å¯¹è±¡çš„åŸºç¡€ä¸Šï¼Œå¢å¼ºä¸»ä¸šåŠ¡é€»è¾‘ï¼›å®¢æˆ·ç±»çœŸæ­£æƒ³è¦è®¿é—®çš„æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œä½†å®¢æˆ·ç±»çœŸæ­£å¯ä»¥è®¿é—®çš„å¯¹è±¡æ˜¯ä»£ç†å¯¹è±¡ã€‚å®¢æˆ·ç±»å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®æ˜¯é€šè¿‡è®¿é—®ä»£ç†å¯¹è±¡æ¥å®ç°çš„ã€‚ æˆ‘ä»¬å¯ä»¥ç”¨ç”Ÿæ´»ä¸­çš„â€œä»£ç†å¾‹å¸ˆâ€æ¥ç†è§£â€œä»£ç†æ¨¡å¼â€ï¼š å½“äº‹äººæ‰“å®˜å¸ï¼Œç”±äºå½“äº‹äººå¹¶ä¸éå¸¸äº†è§£å®˜å¸è¿‡ç¨‹ï¼Œéœ€è¦è˜è¯·å¾‹å¸ˆæ¥æ›¿ä»–å®Œæˆæ•´ä¸ªæ‰“å®˜å¸çš„æ‰€æœ‰äº‹åŠ¡ã€‚æ‰€ä»¥æ•´ä¸ªæ‰“å®˜å¸çš„è¿‡ç¨‹ï¼Œå…¶å®éƒ½æ˜¯ç”±å¾‹å¸ˆå®Œæˆï¼Œå½“äº‹äººå‡å¯ä¸å‡ºç°ï¼› æ‰“å®˜å¸ï¼ˆä¸»ä¸šåŠ¡ï¼‰ï¼Œå½“äº‹äººï¼ˆç›®æ ‡å¯¹è±¡ï¼‰ï¼Œå¾‹å¸ˆï¼ˆä»£ç†å¯¹è±¡ï¼‰ï¼›å¾‹å¸ˆç”¨è‡ªå·±çš„ä¸“ä¸šçŸ¥è¯†å¢å¼ºä¸»ä¸šåŠ¡ï¼› éœ€è¦æ³¨æ„çš„ç‚¹ï¼š1.å½“äº‹äººä¸ä»£ç†å¾‹å¸ˆæ˜¯ä¸ºåŒä¸€ä»¶äº‹åŠªåŠ›â€”â€”ä»£ç†ç±»å’Œç›®æ ‡ç±»è¦å®ç°åŒä¸€æ¥å£ï¼Œå³ä¸šåŠ¡æ¥å£ï¼›2.æ‰“å®˜å¸æ‰€æœ‰çš„å…·ä½“äº‹åŠ¡éƒ½æ˜¯é€šè¿‡å¾‹å¸ˆå®Œæˆâ€”â€”å®¢æˆ·ç±»å¯¹ç›®æ ‡ç±»çš„è°ƒç”¨å‡æ˜¯é€šè¿‡ä»£ç†ç±»å®Œæˆçš„ï¼›3.åœ¨æ‰“å®˜å¸è¿‡ç¨‹ä¸­éœ€è¦å½“äº‹äººå®ŒæˆæŸäº›å·¥ä½œæ—¶ï¼Œå¾‹å¸ˆé€šçŸ¥å½“äº‹äººï¼Œå¹¶å‡ºè°‹åˆ’ç­–â€”â€”ä»£ç†ç±»çš„æ‰§è¡Œæ—¢æ‰§è¡Œäº†å¯¹ç›®æ ‡ç±»çš„å¢å¼ºä¸šåŠ¡é€»è¾‘ï¼Œåˆè°ƒç”¨äº†ç›®æ ‡ç±»çš„ä¸»ä¸šåŠ¡é€»è¾‘ã€‚ 2.ä»£ç†æ¨¡å¼åˆ†ç±»æ ¹æ®ä»£ç†å…³ç³»å»ºç«‹çš„æ—¶é—´ä¸åŒï¼Œå¯ä»¥å°†ä»£ç†åˆ†ä¸ºä¸¤ç±»ï¼šé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ï¼›å¦‚åŒæ³•å¾‹é¡¾é—®å’Œä»£ç†å¾‹å¸ˆã€‚ é™æ€ä»£ç†ï¼šé™æ€ä»£ç†ï¼Œä»£ç†ç±»æ˜¯åœ¨ç¨‹åºè¿è¡Œä¹‹å‰å°±å®šä¹‰å¥½çš„ï¼›ç±»ä¼¼äºä¼ä¸šä¸ä¼ä¸šçš„æ³•å¾‹é¡¾é—®ï¼Œæ³•å¾‹é¡¾é—®æ˜¯åœ¨ä¼ä¸šæ‰“å®˜å¸ä¹‹å‰å°±å·²ç»å­˜åœ¨çš„ã€‚ é™æ€ä»£ç† åŠ¨æ€ä»£ç†ï¼šåŠ¨æ€ä»£ç†ï¼Œç¨‹åºåœ¨æ•´ä¸ªè¿è¡Œè¿‡ç¨‹ä¸­æ ¹æœ¬ä¸å­˜åœ¨ç›®æ ‡ç±»çš„ä»£ç†ç±»ï¼Œç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶ç”±jvmæ ¹æ®åå°„ç­‰æœºåˆ¶ç”±ä»£ç†ç”Ÿæˆå·¥å…·ï¼ˆå¦‚ä»£ç†å·¥å‚ç±»ï¼‰åŠ¨æ€ç”Ÿæˆçš„ï¼›ç±»ä¼¼äºå½“äº‹äººéœ€è¦æ‰“å®˜å¸æ—¶ä¸´æ—¶è˜è¯·ä»£ç†å¾‹å¸ˆã€‚å¸¸ç”¨çš„åŠ¨æ€ä»£ç†ï¼š JDKåŠ¨æ€ä»£ç† CGLIBåŠ¨æ€ä»£ç†]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>ç»“æ„å‹æ¨¡å¼</category>
        <category>ä»£ç†æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>ç»“æ„å‹æ¨¡å¼</tag>
        <tag>ä»£ç†æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CGLIBåŠ¨æ€ä»£ç†]]></title>
    <url>%2F2018%2F12%2F17%2FCGLIB%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%2F</url>
    <content type="text"><![CDATA[åŸç† ä¸ç®¡æ˜¯é™æ€ä»£ç†è¿˜æ˜¯jdkåŠ¨æ€ä»£ç†ï¼Œä»£ç†çš„æ¡ä»¶ä¹‹ä¸€å°±æ˜¯è¦æ±‚ç›®æ ‡ç±»å’Œä»£ç†ç±»å®ç°åŒä¸€ä¸šåŠ¡æ¥å£ï¼›æ‰€ä»¥ï¼Œå¯¹äºæ— æ¥å£ç±»çš„ä»£ç†ï¼Œæˆ‘ä»¬å°±ä¸èƒ½å†ç”¨ä¹‹å‰çš„ä»£ç†æ–¹å¼ï¼› CGLIBåŠ¨æ€ä»£ç†çš„ç”ŸæˆåŸç†æ˜¯ ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»ï¼Œè€Œå­ç±»æ˜¯å¢å¼ºè¿‡çš„ï¼Œå³å­ç±»å°±æ˜¯ç›®æ ‡ç±»çš„ä»£ç†ç±» ã€‚æ‰€ä»¥ï¼Œä½¿ç”¨CGLIBåŠ¨æ€ä»£ç†ï¼Œè¦æ±‚ç›®æ ‡ç±»å¿…é¡»èƒ½å¤Ÿè¢«ç»§æ‰¿ï¼Œå³ä¸èƒ½æ˜¯finalçš„ç±» å®ç° å¯¼å…¥CDLIBçš„jaråŒ…ï¼šcglib-full.jar å®šä¹‰ç›®æ ‡ç±»ï¼Œä¸ç”¨å®ç°ä»»ä½•æ¥å£ 1234567891011public class AccountService &#123; //ç›®æ ‡æ–¹æ³• public void transfer()&#123; System.out.println("è½¬è´¦ï¼"); &#125;&#125; åˆ›å»ºä»£ç†ç±»çš„å·¥å‚ï¼Œè¯¥ç±»éœ€å®ç°MethodInterceptoræ¥å£ å£°æ˜ç›®æ ‡ç±»çš„æˆå‘˜å˜é‡ï¼Œå¹¶åˆ›å»ºæ¥å—è¯¥å‚æ•°çš„æ„é€ å™¨ å®šä¹‰ä»£ç†ç”Ÿæˆæ–¹æ³•ï¼Œç”¨äºåˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå³ç›®æ ‡ç±»çš„å­ç±» å®šä¹‰å›è°ƒæ¥å£æ–¹æ³•ï¼Œåœ¨è¿™é‡Œå¯¹ç›®æ ‡ç±»è¿›è¡Œå¢å¼º 12345678910111213141516171819202122232425262728293031323334353637383940public class AccountServiceCglibProxyFactory implements MethodInterceptor &#123; //1. å£°æ˜ç›®æ ‡ç±»çš„æˆå‘˜å˜é‡ï¼Œå¹¶åˆ›å»ºæ¥å—è¯¥å‚æ•°çš„æ„é€ å™¨ private AccountService targer; public AccountServiceCglibProxyFactory(AccountService targer) &#123; this.targer = targer; &#125; public AccountServiceCglibProxyFactory() &#123; &#125; //2. å®šä¹‰ä»£ç†ç”Ÿæˆæ–¹æ³•ï¼Œç”¨äºåˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå³ç›®æ ‡ç±»çš„å­ç±» public AccountService createProxy()&#123; //åˆ›å»ºå¢å¼ºå™¨ Enhancer enhancer = new Enhancer(); //åˆå§‹åŒ–å¢å¼ºå™¨ï¼Œå°†ç›®æ ‡ç±»æŒ‡å®šä¸ºçˆ¶ç±» enhancer.setSuperclass(AccountService.class); //åˆå§‹åŒ–å¢å¼ºå™¨ï¼Œè®¾ç½®å›è°ƒæ–¹æ³•,å› ä¸ºMethodInterceptoræ¥å£ç»§æ‰¿è‡ªCallbackï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨this enhancer.setCallback(this); //ä½¿ç”¨å¢å¼ºå™¨åˆ›å»ºä»£ç†å¯¹è±¡ return (AccountService) enhancer.create(); &#125; //3. å®šä¹‰å›è°ƒæ¥å£æ–¹æ³•ï¼Œåœ¨è¿™é‡Œå¯¹ç›®æ ‡ç±»è¿›è¡Œå¢å¼ºï¼› //æœ¬ç±»ä¸­è°ƒç”¨äº†Enhanceç±»çš„setCallback(this)æ–¹æ³•ï¼Œå¹¶å°†å›è°ƒå¯¹è±¡thisä½œä¸ºå®å‚ä¼ é€’ç»™äº†Enhancerç±»ï¼› //Enhancerç±»åœ¨åç»­çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šè°ƒç”¨æœ¬ç±»çš„interceptæ–¹æ³•ï¼› //è¿™ä¸ªintercept()æ–¹æ³•å°±æ˜¯å›è°ƒæ–¹æ³• @Override public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable &#123; //è‹¥ä¸ºtransferæ–¹æ³•ï¼Œåˆ™è¿›è¡Œå¢å¼º if("transfer".equals(method.getName()))&#123; //ç›´æ¥è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œ Object result = method.invoke(targer, objects); return result; &#125; return method.invoke(targer, objects); &#125;&#125; å®šä¹‰å®¢æˆ·ç±» 12345678910public class Client &#123; public static void main(String[] args) &#123; //åˆ›å»ºç›®æ ‡å¯¹è±¡ AccountService target = new AccountService(); //åˆ›å»ºä»£ç†å¯¹è±¡ AccountService proxy = new AccountServiceCglibProxyFactory(target).createProxy(); //æ‰§è¡Œå¢å¼ºåçš„ä¸šåŠ¡æ–¹æ³• proxy.transfer(); &#125;&#125;]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼ï¼Œç»“æ„å‹æ¨¡å¼</category>
        <category>ä»£ç†æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>ç»“æ„å‹æ¨¡å¼</tag>
        <tag>ä»£ç†æ¨¡å¼</tag>
        <tag>åŠ¨æ€ä»£ç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JDKåŠ¨æ€ä»£ç†]]></title>
    <url>%2F2018%2F12%2F17%2FJDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%2F</url>
    <content type="text"><![CDATA[åŸç† é€šè¿‡JDKçš„java.lang.reflect.Proxyç±»å®ç°åŠ¨æ€ä»£ç†ï¼Œä½¿ç”¨å…¶é™æ€æ–¹æ³•newProxyInstance()ï¼Œä¾æ®ç›®æ ‡å¯¹è±¡ï¼Œä¸šåŠ¡æ¥å£å’Œä¸šåŠ¡é€»è¾‘å¢å¼ºä¸‰è€…åŠ¨æ€ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚ 12345678910111213141516/**- @param loader the class loader to define the proxy class - ç›®æ ‡ç±»çš„ç±»åŠ è½½å™¨ï¼Œé€šè¿‡ç›®æ ‡å¯¹è±¡çš„å‘å°„å¯è·å–- @param interfaces the list of interfaces for the proxy class- to implement - ç›®æ ‡ç±»å®ç°çš„æ¥å£æ•°ç»„ï¼Œé€šè¿‡åå°„å¯è·å–- @param h the invocation handler to dispatch method invocations to - ä¸šåŠ¡å¢å¼ºé€»è¾‘ï¼Œéœ€è¦å†å®šä¹‰- @return a proxy instance with the specified invocation handler of a- proxy class that is defined by the specified class loader- and that implements the specified interfaces */ public static Object newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h) InvocationHandleræ˜¯ä¸ªæ¥å£ï¼Œå®ç°è¯¥æ¥å£çš„ç±»ç”¨äºå¢å¼ºç›®æ ‡ç±»çš„ä¸»ä¸šåŠ¡é€»è¾‘ã€‚æ¥å£ä¸­å®šä¹‰äº†ä¸€ä¸ªinvoke()æ–¹æ³•ï¼Œå…·ä½“åŠ å¼ºçš„ä»£ç é€»è¾‘å®šä¹‰åœ¨è¯¥æ–¹æ³•ä¸­ã€‚ç¨‹åºåœ¨è°ƒç”¨ä¸»ä¸šåŠ¡é€»è¾‘æ—¶è‡ªåŠ¨è°ƒç”¨invoke()æ–¹æ³•ã€‚ 12345678910111213141516171819202122232425262728293031323334353637/** * @param proxy the proxy instance that the method was invoked on * ç”Ÿæˆçš„ä»£ç†å¯¹è±¡ * @param method the &#123;@code Method&#125; instance corresponding to * the interface method invoked on the proxy instance. The declaring * class of the &#123;@code Method&#125; object will be the interface that * the method was declared in, which may be a superinterface of the * proxy interface that the proxy class inherits the method through. * ç›®æ ‡æ–¹æ³• * @param args an array of objects containing the values of the * arguments passed in the method invocation on the proxy instance, * or &#123;@code null&#125; if interface method takes no arguments. * Arguments of primitive types are wrapped in instances of the * appropriate primitive wrapper class, such as * &#123;@code java.lang.Integer&#125; or &#123;@code java.lang.Boolean&#125;. * ç›®æ ‡æ–¹æ³•çš„å‚æ•° */ public Object invoke(Object proxy, Method method, Object[] args) throws Throwable; ç”±äºè¯¥æ–¹æ³•æ˜¯ç”±ä»£ç†å¯¹è±¡è‡ªåŠ¨è°ƒç”¨ï¼Œæ‰€ä»¥ä¸‰ä¸ªå‚æ•°ä¸éœ€ç¨‹åºå‘˜ç»™å‡ºï¼› ç¬¬äºŒä¸ªå‚æ•°Methodç±»å¯¹è±¡ï¼Œè¯¥ç±»ä¸­ä¹Ÿæœ‰ä¸€ä¸ªæ–¹æ³•invoke()ï¼Œå¯ä»¥ è°ƒç”¨ç›®æ ‡ç±»çš„ç›®æ ‡æ–¹æ³• ï¼Œè¯¥æ–¹æ³•çš„å…·ä½“ä½œç”¨æ˜¯ï¼šè°ƒç”¨æ‰§è¡Œobjå¯¹è±¡æ‰€å±ç±»çš„æ–¹æ³•ã€‚ å®ç° å®šä¹‰ä¸šåŠ¡æ¥å£ï¼Œç®€å•çš„è½¬è´¦ä¸šåŠ¡ 1234567public interface IAccountService &#123; //ä¸»ä¸šåŠ¡é€»è¾‘ï¼Œè½¬è´¦ void transfer();&#125; å®šä¹‰ç›®æ ‡ç±»ï¼Œè¯¥ç±»å®ç°ä¸šåŠ¡æ¥å£ï¼Œå¹¶å®ç°æ¥å£å®šä¹‰çš„ç›®æ ‡æ–¹æ³•ï¼ˆåªå®ç°ä¸»ä¸šåŠ¡é€»è¾‘è½¬è´¦ï¼‰ 12345678910111213public class AccountServiceImpl implements IAccountService &#123; //ç›®æ ‡æ–¹æ³• @Override public void transfer() &#123; System.out.println("å®Œæˆè½¬è´¦åŠŸèƒ½"); &#125;&#125; å®šä¹‰ä¸»ä¸šåŠ¡å¢å¼ºé€»è¾‘ç±»ï¼Œè¯¥ç±»éœ€å®ç°InvokeHandleræ¥å£ï¼Œåœ¨invoke()æ–¹æ³•ä¸­å¢åŠ å¢å¼ºä¸šåŠ¡çš„ä»£ç  123456789101112131415161718192021public class MyExtension implements InvocationHandler &#123; //ç›®æ ‡å¯¹è±¡ private Object target; //å°†ç›®æ ‡å¯¹è±¡å¼•å…¥ï¼Œä»¥ä¾¿åœ¨invoke()ä¸­è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„ç›®æ ‡æ–¹æ³• public MyExtension(Object target) &#123; this.target = target; &#125; public MyExtension() &#123; &#125; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; //å¢å¼ºä¸šåŠ¡é€»è¾‘çš„ä»£ç  System.out.println("å¯¹è½¬è´¦äººèº«ä»½è¿›è¡Œäº†éªŒè¯ï¼"); //æ— è®ºä¸»ä¸šåŠ¡æ–¹æ³•æœ‰æ— å‚æ•°ï¼Œæœ‰æ— è¿”å›å€¼ï¼Œä¸‹é¢çš„å†™æ³•å‡å¯å…¼é¡¾åˆ° return method.invoke(target, args); &#125;&#125; å®šä¹‰å®¢æˆ·ç±» 1234567891011121314151617181920212223242526public class Client &#123; public static void main(String[] args) &#123; //å®šä¹‰ç›®æ ‡å¯¹è±¡ IAccountService target = new AccountServiceImpl(); //åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ç›®æ ‡å¯¹è±¡å¯¹å…¶åˆå§‹åŒ– IAccountService proxy = (IAccountService) Proxy.newProxyInstance( target.getClass().getClassLoader(), target.getClass().getInterfaces(), new MyExtension(target) ); //æ‰§è¡Œå¢å¼ºä¸šåŠ¡ä¹‹åçš„æ–¹æ³• proxy.transfer(); &#125;&#125;]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>ç»“æ„å‹æ¨¡å¼</category>
        <category>ä»£ç†æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>ç»“æ„å‹æ¨¡å¼</tag>
        <tag>ä»£ç†æ¨¡å¼</tag>
        <tag>åŠ¨æ€ä»£ç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é™æ€ä»£ç†]]></title>
    <url>%2F2018%2F12%2F17%2F%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86%2F</url>
    <content type="text"><![CDATA[é™æ€ä»£ç†ï¼Œä»£ç†ç±»æ˜¯åœ¨ç¨‹åºè¿è¡Œä¹‹å‰å°±å®šä¹‰å¥½çš„ å®šä¹‰ä¸šåŠ¡æ¥å£ï¼Œç®€å•çš„è½¬è´¦ä¸šåŠ¡ 1234567public interface IAccountService &#123; //ä¸»ä¸šåŠ¡é€»è¾‘ï¼Œè½¬è´¦ void transfer();&#125; å®šä¹‰ç›®æ ‡ç±»ï¼Œè¯¥ç±»å®ç°ä¸šåŠ¡æ¥å£ï¼Œå¹¶å®ç°æ¥å£å®šä¹‰çš„ç›®æ ‡æ–¹æ³•ï¼ˆåªå®ç°ä¸»ä¸šåŠ¡é€»è¾‘è½¬è´¦ï¼‰ 12345678910111213public class AccountServiceImpl implements IAccountService &#123; //ç›®æ ‡æ–¹æ³• @Override public void transfer() &#123; System.out.println("å®Œæˆè½¬è´¦åŠŸèƒ½"); &#125;&#125; å®šä¹‰ä»£ç†ç±»ï¼Œè¯¥ç±»å®ç°ä¸šåŠ¡æ¥å£ã€‚å¹¶ä¸”å°†æ¥å£å¯¹è±¡ä½œä¸ºä¸€ä¸ªæˆå‘˜å˜é‡ï¼Œè¿˜è¦å®šä¹‰ä¸€ä¸ªå¸¦å‚æ•°ï¼ˆæ¥å£å¯¹è±¡ï¼‰çš„æ„é€ å™¨ï¼Œå› ä¸ºè¦å°†ç›®æ ‡å¯¹è±¡å¼•å…¥ä»£ç†ç±»ï¼Œä»¥ä¾¿ä»£ç†ç±»è°ƒç”¨ç›®æ ‡ç±»çš„ç›®æ ‡æ–¹æ³• 123456789101112131415161718192021public class AccountProxy implements IAccountService &#123; //å£°æ˜ä¸šåŠ¡æ¥å£å¯¹è±¡ private IAccountService target; public AccountProxy() &#123; &#125; // ä¸šåŠ¡æ¥å£å¯¹è±¡ä½œä¸ºæ„é€ å™¨å‚æ•° public AccountProxy(IAccountService target) &#123; this.target = target; &#125; /** * ä»£ç†æ–¹æ³•ï¼Œå®ç°å¯¹ç›®æ ‡æ–¹æ³•çš„åŠŸèƒ½å¢å¼º */ @Override public void transfer() &#123; //å¯¹ç›®æ ‡æ–¹æ³•çš„å¢å¼º System.out.println("å¯¹è½¬è´¦äººèº«ä»½è¿›è¡Œäº†éªŒè¯ï¼ï¼"); target.transfer(); &#125;&#125; å®šä¹‰å®¢æˆ·ç±»å®ç°ä½¿ç”¨ä»£ç†ç±»è½¬è´¦ã€‚ 123456789101. public class Client &#123; public static void main(String[] args) &#123; //åˆ›å»ºç›®æ ‡å¯¹è±¡ IAccountService target = new AccountServiceImpl(); //åˆ›å»ºä»£ç†å¯¹è±¡ IAccountService proxy = new AccountProxy(target); //æ‰§è¡Œå¢å¼ºè¿‡çš„ä¸šåŠ¡ proxy.transfer(); &#125; &#125;]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼ï¼Œç»“æ„å‹æ¨¡å¼</category>
        <category>ä»£ç†æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>ç»“æ„å‹æ¨¡å¼</tag>
        <tag>ä»£ç†æ¨¡å¼</tag>
        <tag>é™æ€ä»£ç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitè¿œç¨‹ä»“åº“ä¸æœ¬åœ°ä»“åº“å…³è”é”™äº†ï¼Ÿ]]></title>
    <url>%2F2018%2F10%2F29%2Fgit%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E4%B8%8E%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E5%85%B3%E8%81%94%E9%94%99%E4%BA%86%EF%BC%9F%2F</url>
    <content type="text"><![CDATA[è¿œç¨‹ä»“åº“ä¸æœ¬åœ°ä»“åº“å…³è” 1.git remote add origin git@github.com:github_username/reposity_name.git 2.git remote add origin https://github.com:github_username/reposity_name.git è¿œç¨‹ä»“åº“ä¸æœ¬åœ°ä»“åº“å–æ¶ˆ git remote remove origin]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[logback]]></title>
    <url>%2F2018%2F10%2F24%2Flogback%2F</url>
    <content type="text"><![CDATA[logbackä»‹ç» ä½¿ç”¨logbackçš„ç›®çš„ æ•…éšœå®šä½ æ˜¾ç¤ºç¨‹åºè¿è¡ŒçŠ¶æ€ï¼Œå®šä½ä¸ºé¢˜çš„ä¾æ® ä¸‰å¤§æ¨¡å— logback-access ä¸servletå®¹å™¨é›†æˆï¼Œæä¾›é€šè¿‡httpè®¿é—®æ—¥å¿—åŠŸèƒ½ï¼Œæ„æ€å°±æ˜¯ç¬¬ä¸‰æ–¹è½¯ä»¶å¯ä»¥é€šè¿‡è¿™ä¸ªæ¨¡å—æ¥è®¿é—®logbackè®°å½•çš„æ—¥å¿— logback-classic log4jçš„æ”¹è‰¯ç‰ˆæœ¬ï¼Œå®Œæ•´å®ç°äº†slf4jçš„APIï¼Œå¯ä»¥è®©æˆ‘ä»¬å¾ˆæ–¹ä¾¿åœ°æ›´æ¢æˆå…¶ä»–æ—¥å¿—ç³»ç»Ÿï¼Œæ¯”å¦‚è¯´log4jç­‰ï¼› logback-core ä¸ºå‰é¢ä¸¤ä¸ªæ¨¡å—æä¾›åŸºç¡€æ¨¡å— logbacké…ç½® å½“æˆ‘ä»¬ä½¿ç”¨logback-classic.jaræ—¶ï¼Œåº”ç”¨å¯åŠ¨ï¼ŒlogbackåŠ è½½é¡ºåºï¼š åœ¨ç³»ç»Ÿé…ç½®æ–‡ä»¶System Propertiesä¸­å¯»æ‰¾æ˜¯å¦æœ‰logback.configurationFileå¯¹åº”çš„value åœ¨classpathä¸‹å¯»æ‰¾æ˜¯å¦æœ‰logback.groovyï¼ˆå³logbackæ”¯æŒgroovyä¸xmlä¸¤ç§é…ç½®æ–¹å¼ï¼‰ åœ¨classpathä¸‹å¯»æ‰¾æ˜¯å¦æœ‰logback-test.xml åœ¨classpathä¸‹å¯»æ‰¾æ˜¯å¦æœ‰logback.xml logbackä¸»è¦æ ‡ç­¾ä»‹ç» &lt;configuration&gt;ï¼Œåªæœ‰ä¸‰ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯ï¼š scanï¼šå½“scanè¢«è®¾ç½®ä¸ºtrueæ—¶ï¼Œå½“é…ç½®æ–‡ä»¶å‘ç”Ÿæ”¹å˜ï¼Œå°†ä¼šè¢«é‡æ–°åŠ è½½ï¼Œé»˜è®¤ä¸ºtrue scanPeriodï¼šæ£€æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹çš„æ—¶é—´é—´éš”ï¼Œå¦‚æœæ²¡æœ‰ç»™å‡ºæ—¶é—´å•ä½ï¼Œé»˜è®¤ä¸ºæ¯«ç§’ï¼Œå½“scan=trueæ—¶è¿™ä¸ªå€¼ç”Ÿæ•ˆï¼Œé»˜è®¤æ—¶é—´é—´éš”ä¸º1åˆ†é’Ÿ debugï¼šå½“è¢«è®¾ç½®ä¸ºtrueæ—¶ï¼Œå°†æ‰“å°å‡ºlogbackå†…éƒ¨æ—¥å¿—ä¿¡æ¯ï¼Œå®æ—¶æŸ¥çœ‹logbackè¿è¡Œä¿¡æ¯ï¼Œé»˜è®¤ä¸ºfalseï¼› &lt;appender&gt;ï¼ŒæŒ‡å®šæ—¥å¿—è¾“å‡ºç›®çš„åœ°ï¼Œå³æ—¥å¿—è¾“å‡ºçš„åª’ä»‹ï¼Œå¯ä»¥æ˜¯æ§åˆ¶å°ã€æ–‡ä»¶ã€è¿œç¨‹å¥—æ¥å­—æœåŠ¡å™¨ç­‰ ConsoleAppenderï¼Œå°†æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å° 123456&lt;!-- æ§åˆ¶å°è®¾ç½® --&gt;&lt;appender name="consoleAppender" class="ch.qos.logback.core.ConsoleAppender"&gt; &lt;encoder&gt; &lt;pattern&gt;$&#123;log.pattern&#125;&lt;/pattern&gt; &lt;/encoder&gt;&lt;/appender&gt; FileAppenderï¼Œå°†æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶ä¸­ 1234567&lt;appender name="FILE" class="ch.qos.logback.core.FileAppender"&gt; &lt;file&gt;D:/123.log&lt;/file&gt; &lt;append&gt;true&lt;/append&gt; &lt;encoder&gt; &lt;pattern&gt;%-4relative [%thread] %-5level %logger&#123;35&#125; - %msg%n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; RollingFileAppenderï¼Œæ»šåŠ¨è®°å½•æ–‡ä»¶ï¼Œå…ˆå°†æ—¥å¿—è®°å½•åˆ°æŒ‡å®šæ–‡ä»¶ï¼Œå½“ç¬¦åˆæŸä¸ªæ¡ä»¶æ—¶å†è®²æ—¥å¿—è®°å½•åˆ°å…¶ä»–æ–‡ä»¶ 1234567891011121314151617181920212223&lt;!-- DEBUG --&gt;&lt;appender name="debugAppender" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;!-- æ–‡ä»¶è·¯å¾„ --&gt; &lt;file&gt;$&#123;log.filePath&#125;/debug.log&lt;/file&gt; &lt;!-- &lt;rollingPolicy&gt;çš„ä½œç”¨æ˜¯å½“å‘ç”Ÿæ»šåŠ¨æ—¶ï¼Œå®šä¹‰RollingFileAppenderçš„è¡Œä¸ºï¼Œå…¶ä¸­ä¸Šé¢çš„TimeBasedRollingPolicyæ˜¯æœ€å¸¸ç”¨çš„æ»šåŠ¨ç­–ç•¥ï¼Œå®ƒæ ¹æ®æ—¶é—´æŒ‡å®šæ»šåŠ¨ç­–ç•¥ï¼Œæ—¢è´Ÿè´£æ»šåŠ¨ä¹Ÿè´Ÿè´£è§¦å‘æ»šåŠ¨ --&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;!-- æ–‡ä»¶åç§° --&gt; &lt;fileNamePattern&gt;$&#123;log.filePath&#125;/debug/debug.%d&#123;yyyy-MM-dd&#125;.log.gz &lt;/fileNamePattern&gt; &lt;!-- æ–‡ä»¶æœ€å¤§ä¿å­˜å†å²æ•°é‡ --&gt; &lt;maxHistory&gt;$&#123;log.maxHistory&#125;&lt;/maxHistory&gt; &lt;/rollingPolicy&gt; &lt;!-- è¾“å‡ºæ ¼å¼ --&gt; &lt;encoder&gt; &lt;pattern&gt;$&#123;log.pattern&#125;&lt;/pattern&gt; &lt;/encoder&gt; &lt;!-- åœ¨å½“å‰ç»™åˆ°çš„æ—¥å¿—çº§åˆ«ä¸‹å†è¿›è¡Œä¸€æ¬¡è¿‡æ»¤ --&gt; &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt; &lt;level&gt;DEBUG&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt;&lt;/appender&gt; &lt;logger&gt;ï¼Œä½œä¸ºæ—¥å¿—çš„è®°å½•å™¨ï¼Œä¸»è¦ç”¨äºå­˜æ”¾æ—¥å¿—å¯¹è±¡ï¼Œè¿˜å¯ä»¥å®šä¹‰æ—¥å¿—ç±»å‹ã€çº§åˆ«ç­‰ï¼›å…¶ä¸­æœ‰&lt;root&gt;æ ‡ç­¾ï¼Œä¹Ÿæ˜¯&lt;logger&gt;å…ƒç´ ï¼Œæ˜¯æ ¹loggerï¼Œåªæœ‰ä¸€ä¸ªlevelå±æ€§ï¼›loggeræœ‰ä¸‰ä¸ªå±æ€§ï¼š 123456789&lt;logger name="com.enpong.o2o" level="$&#123;log.level&#125;" additivity="true"&gt;&lt;appender-ref ref="debugAppender"/&gt;&lt;appender-ref ref="infoAppender"/&gt;&lt;appender-ref ref="errorAppender"/&gt;&lt;/logger&gt;&lt;root level="info"&gt;&lt;appender-ref ref="consoleAppender"/&gt;&lt;/root&gt; nameï¼šç”¨æ¥æŒ‡å®šå—æ­¤loggerçº¦æŸçš„æŸä¸€ä¸ªåŒ…æˆ–è€…å…·ä½“çš„æŸä¸€ä¸ªç±» levelï¼ˆå¯é€‰ï¼‰ï¼šç”¨æ¥è®¾ç½®æ‰“å°çº§åˆ«ï¼Œäº”ä¸ªå¸¸ç”¨æ‰“å°çº§åˆ«ä»ä½è‡³é«˜ä¾æ¬¡ä¸ºTRACEã€DEBUGã€INFOã€WARNã€ERRORï¼Œå¦‚æœæœªè®¾ç½®æ­¤çº§åˆ«ï¼Œé‚£ä¹ˆå½“å‰loggerä¼šç»§æ‰¿ä¸Šçº§çš„çº§åˆ« additivityï¼ˆå¯é€‰ï¼‰ï¼šæ˜¯å¦å‘ä¸Šçº§loggerä¼ é€’æ‰“å°ä¿¡æ¯ï¼Œé»˜è®¤ä¸ºtrue å…¨éƒ¨é…ç½® 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;configuration scan="true" scanPeriod="60 seconds" debug="false"&gt; &lt;!-- å®šä¹‰å‚æ•°å¸¸é‡ --&gt; &lt;!-- TRACE&lt;DEBUG&lt;INFO&lt;WARN&lt;ERROR --&gt; &lt;!-- logger.trace("msg") logger.debug... --&gt; &lt;property name="log.level" value="debug" /&gt; &lt;property name="log.maxHistory" value="30" /&gt; &lt;property name="log.filePath" value="$&#123;catalina.base&#125;/logs/webapps" /&gt; &lt;property name="log.pattern" value="%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n" /&gt; &lt;!-- æ§åˆ¶å°è®¾ç½® --&gt; &lt;appender name="consoleAppender" class="ch.qos.logback.core.ConsoleAppender"&gt; &lt;encoder&gt; &lt;pattern&gt;$&#123;log.pattern&#125;&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;!-- DEBUG --&gt; &lt;appender name="debugAppender" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;!-- æ–‡ä»¶è·¯å¾„ --&gt; &lt;file&gt;$&#123;log.filePath&#125;/debug.log&lt;/file&gt; &lt;!-- &lt;rollingPolicy&gt;çš„ä½œç”¨æ˜¯å½“å‘ç”Ÿæ»šåŠ¨æ—¶ï¼Œå®šä¹‰RollingFileAppenderçš„è¡Œä¸ºï¼Œå…¶ä¸­ä¸Šé¢çš„TimeBasedRollingPolicyæ˜¯æœ€å¸¸ç”¨çš„æ»šåŠ¨ç­–ç•¥ï¼Œå®ƒæ ¹æ®æ—¶é—´æŒ‡å®šæ»šåŠ¨ç­–ç•¥ï¼Œæ—¢è´Ÿè´£æ»šåŠ¨ä¹Ÿè´Ÿè´£è§¦å‘æ»šåŠ¨ --&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;!-- æ–‡ä»¶åç§° --&gt; &lt;fileNamePattern&gt;$&#123;log.filePath&#125;/debug/debug.%d&#123;yyyy-MM-dd&#125;.log.gz &lt;/fileNamePattern&gt; &lt;!-- æ–‡ä»¶æœ€å¤§ä¿å­˜å†å²æ•°é‡ --&gt; &lt;maxHistory&gt;$&#123;log.maxHistory&#125;&lt;/maxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;pattern&gt;$&#123;log.pattern&#125;&lt;/pattern&gt; &lt;/encoder&gt; &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt; &lt;level&gt;DEBUG&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt; &lt;/appender&gt; &lt;!-- INFO --&gt; &lt;appender name="infoAppender" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;!-- æ–‡ä»¶è·¯å¾„ --&gt; &lt;file&gt;$&#123;log.filePath&#125;/info.log&lt;/file&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;!-- æ–‡ä»¶åç§° --&gt; &lt;fileNamePattern&gt;$&#123;log.filePath&#125;/info/info.%d&#123;yyyy-MM-dd&#125;.log.gz &lt;/fileNamePattern&gt; &lt;!-- æ–‡ä»¶æœ€å¤§ä¿å­˜å†å²æ•°é‡ --&gt; &lt;maxHistory&gt;$&#123;log.maxHistory&#125;&lt;/maxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;pattern&gt;$&#123;log.pattern&#125;&lt;/pattern&gt; &lt;/encoder&gt; &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt; &lt;level&gt;INFO&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt; &lt;/appender&gt; &lt;!-- ERROR --&gt; &lt;appender name="errorAppender" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;!-- æ–‡ä»¶è·¯å¾„ --&gt; &lt;file&gt;$&#123;log.filePath&#125;/erorr.log&lt;/file&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;!-- æ–‡ä»¶åç§° --&gt; &lt;fileNamePattern&gt;$&#123;log.filePath&#125;/error/error.%d&#123;yyyy-MM-dd&#125;.log.gz &lt;/fileNamePattern&gt; &lt;!-- æ–‡ä»¶æœ€å¤§ä¿å­˜å†å²æ•°é‡ --&gt; &lt;maxHistory&gt;$&#123;log.maxHistory&#125;&lt;/maxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;pattern&gt;$&#123;log.pattern&#125;&lt;/pattern&gt; &lt;/encoder&gt; &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt; &lt;level&gt;ERROR&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt; &lt;/appender&gt; &lt;logger name="com.enpong.o2o" level="$&#123;log.level&#125;" additivity="true"&gt; &lt;appender-ref ref="debugAppender"/&gt; &lt;appender-ref ref="infoAppender"/&gt; &lt;appender-ref ref="errorAppender"/&gt; &lt;/logger&gt; &lt;root level="info"&gt; &lt;appender-ref ref="consoleAppender"/&gt; &lt;/root&gt;&lt;/configuration&gt;]]></content>
      <categories>
        <category>æ—¥å¿—</category>
      </categories>
      <tags>
        <tag>logback</tag>
        <tag>é…ç½®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ssmæ³¨è§£å¼å¼€å‘]]></title>
    <url>%2F2018%2F10%2F24%2Fssm%E6%B3%A8%E8%A7%A3%E5%BC%8F%E5%BC%80%E5%8F%91%2F</url>
    <content type="text"><![CDATA[å°†spring-mvcæ”¹ä¸ºæ³¨è§£ ä¿®æ”¹spring-mvc.xmlï¼Œå°†å¤„ç†å™¨çš„æ³¨å†Œæ–¹å¼ç”±åŸæ¥çš„æ³¨å†Œæ–¹å¼æ”¹ä¸ºç»„ä»¶æ‰«æå™¨ 12345678910111213141516&lt;beans xmlns="http://www.springframework.org/schema/beans"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"xmlns:context="http://www.springframework.org/schema/context"xmlns:mvc="http://www.springframework.org/schema/mvc"xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"&gt;&lt;!--&lt;bean id="/test/register.do" class="com.enpong.web.StudentController"&gt; &lt;property name="studentService" ref="studentService"&gt;&lt;/property&gt;&lt;/bean&gt;--&gt; &lt;context:component-scan base-package="com.enpong.web"&gt;&lt;/context:component-scan&gt;&lt;/beans&gt; 2. ä¿®æ”¹å¤„ç†å™¨ç±»ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œæ— æ³•å†é€šè¿‡é…ç½®æ–‡ä»¶å®Œæˆserviceçš„æ³¨å…¥ï¼Œéœ€è¦åœ¨å¤„ç†å™¨ä¸­ä»¥æ³¨è§£æ–¹å¼å®ŒæˆServiceçš„æ³¨å…¥ 123456789101112131415161718192021222324252627282930313233package com.enpong.web;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Qualifier;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.servlet.ModelAndView;import com.enpong.beans.Student;import com.enpong.service.IStudentService;@Controller@RequestMapping("/test")public class StudentController&#123; @Autowired @Qualifier("studentService") //ByNameæ–¹å¼æ³¨å…¥ private IStudentService studentService; @RequestMapping("/regiter.do") public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception &#123; //æ¥æ”¶è¯·æ±‚å‚æ•° String name = request.getParameter("name"); String ageStr = request.getParameter("age"); Integer age = Integer.valueOf(ageStr); Student student = new Student(name, age); studentService.addStudent(student); return new ModelAndView("/WEB-INF/jsp/welcome.jsp"); &#125;&#125; å°†springæ”¹ä¸ºæ³¨è§£ å°†serviceæ”¹ä¸ºæ³¨è§£ï¼Œå®ŒæˆDaoçš„æ³¨å…¥ ä¿®æ”¹spring-service.xml 1234567891011121314151617&lt;beans xmlns="http://www.springframework.org/schema/beans"xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p"xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsdhttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsdhttp://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsdhttp://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"&gt; &lt;!--&lt;bean id="studentService" class="com.enpong.service.impl.StudentServiceImpl"&gt; &lt;property name="studentDao" ref="IStudentDao"&gt;&lt;/property&gt;&lt;/bean&gt;--&gt; &lt;context:component-scan base-package="com.enpong.service.impl"/&gt; &lt;/beans&gt; * ä¿®æ”¹Serviceå®ç°ç±»ï¼Œå¯¹daoæ³¨å…¥æ—¶å¯ä»¥ç”¨ByTypeæ–¹å¼æˆ–è€…ByNameæ–¹å¼æ³¨å…¥ 1234567891011121314151617181920package com.enpong.service.impl;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;import com.enpong.beans.Student;import com.enpong.dao.IStudentDao;import com.enpong.service.IStudentService;@Servicepublic class StudentServiceImpl implements IStudentService &#123; @Autowired //ByTypeæ–¹å¼æ³¨å…¥ private IStudentDao studentDao; @Override @Transactional public void addStudent(Student student) &#123; studentDao.insertStudent(student); &#125;&#125; 2. å°†äº‹åŠ¡ä»¥æ³¨è§£æ–¹å¼ç»‡å…¥åˆ°Serviceå±‚ * ä¿®æ”¹spring-tx.xml 1234567891011121314151617&lt;beans xmlns="http://www.springframework.org/schema/beans"xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p"xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsdhttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsdhttp://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsdhttp://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"&gt; &lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt; &lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; &lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- æ³¨å†Œäº‹åŠ¡é€šçŸ¥ --&gt; &lt;tx:annotation-driven transaction-manager="transactionManager"/&gt;&lt;/beans&gt; * åœ¨serviceå®ç°ç±»ä¸­åŠ å…¥@Transactional ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè€ƒè™‘æ€§èƒ½é—®é¢˜ï¼Œå¯¹äºmybatisä¸å»ºè®®ä½¿ç”¨æ³¨è§£å¼å¼€å‘]]></content>
      <categories>
        <category>ssm</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>springMVC</tag>
        <tag>mybatis</tag>
        <tag>æ³¨è§£</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ­å»ºSSMå¼€å‘ç¯å¢ƒ]]></title>
    <url>%2F2018%2F10%2F24%2F%E6%90%AD%E5%BB%BASSM%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%2F</url>
    <content type="text"><![CDATA[å¯¼å…¥jaråŒ… åˆ©ç”¨mavenè¿›è¡ŒåŒ…ç®¡ç†ï¼Œä¸ç”¨æ‰‹åŠ¨ä¸€ä¸ªä¸ªæ·»åŠ éœ€è¦çš„jaråŒ…ï¼Œå¼€å‘ä¾¿åˆ©å¿«æ· pom.xmlï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265&lt;project xmlns="http://maven.apache.org/POM/4.0.0"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.enpong&lt;/groupId&gt; &lt;artifactId&gt;ssm&lt;/artifactId&gt; &lt;packaging&gt;war&lt;/packaging&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;ssm Maven Webapp&lt;/name&gt; &lt;url&gt;http://maven.apache.org&lt;/url&gt; &lt;properties&gt; &lt;spring.version&gt;5.1.1.RELEASE&lt;/spring.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;3.8.1&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/ch.qos.logback/logback-classic --&gt; &lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-classic&lt;/artifactId&gt; &lt;version&gt;1.2.3&lt;/version&gt; &lt;/dependency&gt; &lt;!-- Spring --&gt; &lt;!-- 1)åŒ…å«Spring æ¡†æ¶åŸºæœ¬çš„æ ¸å¿ƒå·¥å…·ç±»ã€‚Spring å…¶å®ƒç»„ä»¶è¦éƒ½è¦ä½¿ç”¨åˆ°è¿™ä¸ªåŒ…é‡Œçš„ç±»ï¼Œæ˜¯å…¶å®ƒç»„ä»¶çš„åŸºæœ¬æ ¸å¿ƒ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-core&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 2)è¿™ä¸ªjar æ–‡ä»¶æ˜¯æ‰€æœ‰åº”ç”¨éƒ½è¦ç”¨åˆ°çš„ï¼Œå®ƒåŒ…å«è®¿é—®é…ç½®æ–‡ä»¶ã€åˆ›å»ºå’Œç®¡ç†bean ä»¥åŠè¿›è¡ŒInversion of Control / Dependency Injectionï¼ˆIoC/DIï¼‰æ“ä½œç›¸å…³çš„æ‰€æœ‰ç±»ã€‚å¦‚æœåº”ç”¨åªéœ€åŸºæœ¬çš„IoC/DI æ”¯æŒï¼Œå¼•å…¥spring-core.jar åŠspring-beans.jar æ–‡ä»¶å°±å¯ä»¥äº†ã€‚ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-beans&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 3)è¿™ä¸ªjar æ–‡ä»¶ä¸ºSpring æ ¸å¿ƒæä¾›äº†å¤§é‡æ‰©å±•ã€‚å¯ä»¥æ‰¾åˆ°ä½¿ç”¨Spring ApplicationContextç‰¹æ€§æ—¶æ‰€éœ€çš„å…¨éƒ¨ç±»ï¼ŒJDNI æ‰€éœ€çš„å…¨éƒ¨ç±»ï¼Œinstrumentationç»„ä»¶ä»¥åŠæ ¡éªŒValidation æ–¹é¢çš„ç›¸å…³ç±»ã€‚ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 4) è¿™ä¸ªjar æ–‡ä»¶åŒ…å«å¯¹Spring å¯¹JDBC æ•°æ®è®¿é—®è¿›è¡Œå°è£…çš„æ‰€æœ‰ç±»ã€‚ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 5) ä¸ºJDBCã€Hibernateã€JDOã€JPAç­‰æä¾›çš„ä¸€è‡´çš„å£°æ˜å¼å’Œç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ã€‚ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-tx&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 6)Spring web åŒ…å«Webåº”ç”¨å¼€å‘æ—¶ï¼Œç”¨åˆ°Springæ¡†æ¶æ—¶æ‰€éœ€çš„æ ¸å¿ƒç±»ï¼ŒåŒ…æ‹¬è‡ªåŠ¨è½½å…¥WebApplicationContextç‰¹æ€§çš„ç±»ã€Strutsä¸JSFé›†æˆç±»ã€æ–‡ä»¶ä¸Šä¼ çš„æ”¯æŒç±»ã€Filterç±»å’Œå¤§é‡å·¥å…·è¾…åŠ©ç±»ã€‚ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-web&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 7)åŒ…å«SpringMVCæ¡†æ¶ç›¸å…³çš„æ‰€æœ‰ç±»ã€‚ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 8)Spring test å¯¹JUNITç­‰æµ‹è¯•æ¡†æ¶çš„ç®€å•å°è£… --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- springä¾èµ–çš„å…¶ä»–é…ç½® --&gt; &lt;!-- Servlet web --&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt; &lt;version&gt;4.0.1&lt;/version&gt; &lt;/dependency&gt; &lt;!-- jsonè§£æ --&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.9.7&lt;/version&gt; &lt;/dependency&gt; &lt;!-- Mapå·¥å…·ç±» å¯¹æ ‡å‡†java Collectionçš„æ‰©å±• spring-core.jaréœ€commons-collections.jar --&gt; &lt;dependency&gt; &lt;groupId&gt;commons-collections&lt;/groupId&gt; &lt;artifactId&gt;commons-collections&lt;/artifactId&gt; &lt;version&gt;3.2.2&lt;/version&gt; &lt;/dependency&gt; &lt;!-- Dao Mybatis --&gt; &lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.4.6&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt; &lt;version&gt;1.3.2&lt;/version&gt; &lt;/dependency&gt; &lt;!-- æ•°æ®åº“ --&gt; &lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;8.0.12&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/com.mchange/c3p0 --&gt; &lt;dependency&gt; &lt;groupId&gt;com.mchange&lt;/groupId&gt; &lt;artifactId&gt;c3p0&lt;/artifactId&gt; &lt;version&gt;0.9.5.2&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;finalName&gt;ssm&lt;/finalName&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-compiler-plugin --&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;3.8.0&lt;/version&gt; &lt;configuration&gt; &lt;source&gt;1.8&lt;/source&gt; &lt;target&gt;1.8&lt;/target&gt; &lt;encoding&gt;UTF8&lt;/encoding&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt; â€‹ é…ç½®Web.xml web.xml: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd"&gt;&lt;web-app&gt; &lt;!-- æŒ‡å®šspringé…ç½®æ–‡ä»¶ä½ç½® --&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:spring-*.xml&lt;/param-value&gt; &lt;/context-param&gt; &lt;!-- æ³¨å†Œå­—ç¬¦é›†è¿‡æ»¤å™¨ --&gt; &lt;filter&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;utf-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;init-param&gt; &lt;param-name&gt;forceEncoding&lt;/param-name&gt; &lt;param-value&gt;true&lt;/param-value&gt; &lt;/init-param&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt; &lt;!-- æ³¨å†ŒServletContext ç›‘å¬å™¨ --&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt; &lt;!-- æ³¨å†Œä¸­å¤®è°ƒåº¦å™¨ --&gt; &lt;servlet&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:spring-mvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;url-pattern&gt;*.do&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;/web-app&gt; * æŒ‡å®šspringé…ç½®æ–‡ä»¶ä½ç½® * è¿™é‡ŒæŒ‡å®šçš„é…ç½®æ–‡ä»¶ï¼Œè®©tomcatåœ¨å¯åŠ¨æ—¶æ ¹æ®springé…ç½®æ–‡ä»¶åˆ›å»ºspringå®¹å™¨ï¼› * ç”±äºspringé…ç½®æ–‡ä»¶æ ¹æ®åŠŸèƒ½æ¨¡å—åˆ’åˆ†ï¼Œæ‹†åˆ†ä¸ºå¤šä¸ªé…ç½®æ–‡ä»¶ï¼ˆspring-*.xmlï¼‰ * æ³¨å†ŒServletContextç›‘å¬å™¨ * æ³¨å†ŒServletContextç›‘å¬å™¨çš„å®ç°ç±»ContextLoaderListenerï¼›ç”¨äºåˆ›å»ºspringå®¹å™¨ä»¥åŠå°†åˆ›å»ºå¥½çš„springå®¹å™¨å¯¹è±¡æ”¾å…¥åˆ°ServletContextçš„åŸŸå±æ€§ç©ºé—´ï¼Œä¿è¯springå®¹å™¨çš„å”¯ä¸€æ€§ã€‚ * æ³¨å†Œå­—ç¬¦é›†è¿‡æ»¤å™¨ * ç”¨äºè§£å†³è¯·æ±‚å‚æ•°ä¸­æºå¸¦çš„ä¸­æ–‡ä¹±ç é—®é¢˜ * æ³¨å†Œä¸­å¤®è°ƒåº¦å™¨ï¼ˆDispatcherï¼‰]]></content>
      <categories>
        <category>ssm</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>springMVC</tag>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ssmé…ç½®å¼å¼€å‘]]></title>
    <url>%2F2018%2F10%2F24%2Fssm%E9%85%8D%E7%BD%AE%E5%BC%8F%E5%BC%80%E5%8F%91%2F</url>
    <content type="text"><![CDATA[å®Œæˆç®€å•çš„è¡¨å•æ³¨å†ŒåŠŸèƒ½ å®šä¹‰å®ä½“ç±»å’Œå¯¹åº”çš„æ•°æ®è¡¨ Studentå®ä½“ç±» Studentè¡¨ å®šä¹‰é¡µé¢å’Œå¤„ç†å™¨ indexé¡µé¢ 123456789&lt;html&gt; &lt;body&gt; &lt;form action="test/register.do" method="POST"&gt; å§“åï¼š&lt;input type="text" name="name"/&gt;&lt;br&gt; å¹´é¾„ï¼š&lt;input type="text" name="age"/&gt;&lt;br&gt; &lt;input type="submit" value="æ³¨å†Œ"/&gt; &lt;/form&gt; &lt;/body&gt;&lt;/html&gt; å¤„ç†å™¨ï¼ˆå®ç°Controlleræ¥å£ï¼‰ 1234567891011121314151617181920212223242526272829package com.enpong.web;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import org.springframework.web.servlet.ModelAndView;import org.springframework.web.servlet.mvc.Controller;import com.enpong.beans.Student;import com.enpong.service.IStudentService;public class StudentController implements Controller &#123; private IStudentService studentService; public void setStudentService(IStudentService studentService) &#123; this.studentService = studentService; &#125; @Override public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception &#123; //æ¥æ”¶è¯·æ±‚å‚æ•° String name = request.getParameter("name"); String ageStr = request.getParameter("age"); Integer age = Integer.valueOf(ageStr); Student student = new Student(name, age); studentService.addStudent(student); return new ModelAndView("/WEB-INF/jsp/welcome.jsp"); &#125;&#125; å®šä¹‰Service å®šä¹‰ä¸šåŠ¡æ¥å£ 12345678package com.enpong.service;import com.enpong.beans.Student;public interface IStudentService &#123; void addStudent(Student student);&#125; å®ç°ç±» 12345678910111213141516171819package com.enpong.service.impl;import com.enpong.beans.Student;import com.enpong.dao.IStudentDao;import com.enpong.service.IStudentService;public class StudentServiceImpl implements IStudentService &#123; private IStudentDao studentDao; public void setStudentDao(IStudentDao studentDao) &#123; this.studentDao = studentDao; &#125; @Override public void addStudent(Student student) &#123; studentDao.insertStudent(student); &#125;&#125; å®šä¹‰Daoæ¥å£ï¼Œmapperé…ç½®æ–‡ä»¶ Daoæ¥å£ 123456package com.enpong.dao;import com.enpong.beans.Student;public interface IStudentDao &#123; void insertStudent(Student stu);&#125; åœ¨DaoåŒ…ä¸­å®šä¹‰MyBatisçš„æ˜ å°„æ–‡ä»¶IStudentDao.xmlï¼Œè¿™é‡Œæ˜ å°„æ–‡ä»¶åæœ€å¥½ä¸æ¥å£åä¸€æ ·ï¼Œè¿™æ˜¯ä¸ºäº†åé¢é…ç½®æ¥å£æ‰«ææ—¶çš„æ–¹ä¾¿ 12345678910&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt; &lt;mapper namespace="com.enpong.dao.IStudentDao"&gt; &lt;insert id="insertStudent"&gt; insert into student(name,age) value(#&#123;name&#125;, #&#123;age&#125;) &lt;/insert&gt;&lt;/mapper&gt; å®šä¹‰jdbc.properties åœ¨ç±»è·¯å¾„ä¸‹çš„resourcesç›®å½•ä¸­å®šä¹‰ 1234jdbc.driver=com.mysql.jdbc.Driverjdbc.url=jdbc:mysql://172.31.71.207:3306/testjdbc.user=jdbc.password= å®šä¹‰MyBatisçš„ä¸»é…ç½®æ–‡ä»¶ åœ¨ç±»è·¯å¾„ä¸‹çš„resourcesç›®å½•ä¸­å®šä¹‰ï¼Œè¯¥é…ç½®æ–‡ä»¶ä¸­ä¸»è¦æ³¨å†ŒMapperä¸­æ‰€ä½¿ç”¨çš„ç±»çš„åˆ«ååŠMapperçš„ä½ç½® 123456789101112131415&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;&lt;configuration&gt; &lt;!-- ç±»çš„åˆ«å --&gt; &lt;typeAliases&gt; &lt;package name="com.enpong.beans"/&gt; &lt;/typeAliases&gt; &lt;!-- æ˜ å°„æ–‡ä»¶ä½ç½® --&gt; &lt;mappers&gt; &lt;package name="com.enpong.dao"/&gt; &lt;/mappers&gt;&lt;/configuration&gt; å®šä¹‰springçš„é…ç½®æ–‡ä»¶ springçš„é…ç½®æ–‡ä»¶å‡åœ¨resourcesç›®å½•ä¸­å®šä¹‰ spring-db.xmlï¼Œè¯¥é…ç½®æ–‡ä»¶ä¸­ç”¨äºæ³¨å†Œæ•°æ®æºç›¸å…³bea n 12345678910111213141516171819 &lt;beans xmlns="http://www.springframework.org/schema/beans"xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p"xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsdhttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsdhttp://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsdhttp://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"&gt; &lt;!-- æ³¨å†Œæ•°æ®æºï¼ŒC3P0 --&gt; &lt;bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"&gt; &lt;property name="driverClass" value="$&#123;jdbc.driver&#125;"&gt;&lt;/property&gt; &lt;property name="jdbcUrl" value="$&#123;jdbc.url&#125;"&gt;&lt;/property&gt; &lt;property name="user" value="$&#123;jdbc.user&#125;"&gt;&lt;/property&gt; &lt;property name="password" value="$&#123;jdbc.password&#125;"&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- æ³¨å†Œjdbcå±æ€§æ–‡ä»¶ --&gt; &lt;context:property-placeholder location="classpath:jdbc.properties"/&gt;&lt;/beans&gt; spring-mybatis.xmlï¼Œä¸»è¦ç”¨äºæ³¨å†ŒSqlSessionFactoryBeanåŠMapperåŠ¨æ€ä»£ç†ç”Ÿæˆå™¨çš„bean 1234567891011121314151617181920212223&lt;beans xmlns="http://www.springframework.org/schema/beans"xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p"xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsdhttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsdhttp://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsdhttp://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"&gt; &lt;!-- æ³¨å†ŒSqlSessionFactory --&gt; &lt;bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"&gt; &lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt; &lt;!-- æŒ‡å®šmybatis.xmlæ–‡ä»¶ä½ç½® --&gt; &lt;property name="configLocation" value="classpath:mybatis.xml"&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- æ³¨å†ŒMapperæ‰«æé…ç½®å™¨ --&gt; &lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt; &lt;property name="sqlSessionFactoryBeanName" value="sqlSessionFactory"&gt;&lt;/property&gt; &lt;!-- æŒ‡å®šDaoæ¥å£æ‰«æåŒ… --&gt; &lt;property name="basePackage" value="com.enpong.dao"&gt;&lt;/property&gt; &lt;/bean&gt;&lt;/beans&gt; spring-service.xmlï¼Œç”¨äºè¿›è¡ŒServiceçš„beançš„æ³¨å†Œ,è¿™é‡Œæ³¨å…¥Daoå±æ€§æ—¶ç”¨çš„æ˜¯Mapperæ˜ å°„æ–‡ä»¶çš„åå­— 12345678910111213&lt;beans xmlns="http://www.springframework.org/schema/beans"xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p"xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsdhttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsdhttp://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsdhttp://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"&gt; &lt;bean id="studentService" class="com.enpong.service.impl.StudentServiceImpl"&gt; &lt;property name="studentDao" ref="IStudentDao"&gt;&lt;/property&gt; &lt;/bean&gt;&lt;/beans&gt; spring-tx.xmlï¼Œç”¨äºæ³¨å†Œäº‹åŠ¡ç›¸å…³bean 12345678910111213141516171819202122232425262728&lt;beans xmlns="http://www.springframework.org/schema/beans"xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p"xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsdhttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsdhttp://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsdhttp://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd"&gt; &lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt; &lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; &lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!-- æ³¨å†Œäº‹åŠ¡é€šçŸ¥ --&gt; &lt;tx:advice id="transactionAdvice" transaction-manager="transactionManager"&gt; &lt;tx:attributes&gt; &lt;!-- è¿æ¥ç‚¹ --&gt; &lt;tx:method name="add*" isolation="DEFAULT" propagation="REQUIRED"/&gt; &lt;/tx:attributes&gt; &lt;/tx:advice&gt; &lt;!-- aopé…ç½® åˆ‡é¢--&gt; &lt;aop:config&gt; &lt;!-- åˆ‡å…¥ç‚¹ --&gt; &lt;aop:pointcut expression="execution(* *..service.*.*(..))" id="myPointcut"/&gt; &lt;!-- é¡¾é—® --&gt; &lt;aop:advisor advice-ref="transactionAdvice" pointcut-ref="myPointcut"/&gt; &lt;/aop:config&gt;&lt;/beans&gt; spring-mvc.xmlï¼Œç”¨äºæ³¨å†ŒSpringMVCçš„å¤„ç†å™¨ï¼Œä¹Ÿå¯èƒ½éœ€è¦é…ç½®å¤„ç†å™¨æ˜ å°„å™¨ã€å¤„ç†å™¨é€‚é…å™¨ã€è§†å›¾è§£æå™¨ç­‰ä¸ä¸­å¤®è°ƒåº¦å™¨ï¼ˆDispatcherï¼‰æœ‰å…³çš„Bean 123456789101112&lt;beans xmlns="http://www.springframework.org/schema/beans"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"xmlns:context="http://www.springframework.org/schema/context"xmlns:mvc="http://www.springframework.org/schema/mvc"xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"&gt; &lt;bean id="/test/register.do" class="com.enpong.web.StudentController"&gt; &lt;property name="studentService" ref="studentService"&gt;&lt;/property&gt; &lt;/bean&gt;&lt;/beans&gt;]]></content>
      <categories>
        <category>ssm</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>springMVC</tag>
        <tag>mybatis</tag>
        <tag>é…ç½®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitå­¦ä¹ ]]></title>
    <url>%2F2018%2F10%2F23%2Fgit%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[å®‰è£…git åˆ›å»ºç‰ˆæœ¬åº“ å¤šäº†.gitç›®å½•ï¼Œè¿™ä¸ªç›®å½•æ˜¯gitæ¥è·Ÿè¸ªç®¡ç†ç‰ˆæœ¬åº“çš„ï¼Œåˆ‡è®°ä¸å¯ä¿®æ”¹é‡Œé¢çš„æ–‡ä»¶ï¼Œä»¥é˜²ç ´åä»“åº“ æŠŠæ–‡ä»¶æ”¾åˆ°gitä»“åº“ ç”¨å‘½ä»¤git addæŠŠæ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ ç”¨git commitæŠŠæ–‡ä»¶æäº¤åˆ°ä»“åº“ git commit -mï¼Œ-måé¢æ˜¯æœ¬æ¬¡æäº¤çš„è¯´æ˜ ç»§ç»­ä¿®æ”¹readme.txtæ–‡ä»¶ git statuså‘½ä»¤è®©æˆ‘ä»¬æŒæ¡ä»“åº“å½“å‰çš„çŠ¶æ€ï¼Œå¯ä»¥çŸ¥é“æŸäº›æ–‡ä»¶è¢«ä¿®æ”¹äº†ï¼Œä½†æ— æ³•çœ‹åˆ°ä¿®æ”¹çš„å…·ä½“å†…å®¹ ç”¨git diffå‘½ä»¤æŸ¥çœ‹ä¿®æ”¹çš„å…·ä½“å†…å®¹ æŸ¥çœ‹ä¿®æ”¹å†…å®¹åï¼Œæäº¤åˆ°ä»“åº“ï¼Œè°¨æ…çš„æ­¥éª¤ git add git statusæŸ¥çœ‹ git commit -m git status ç‰ˆæœ¬å›é€€ git logå‘½ä»¤æŸ¥çœ‹æäº¤è®°å½•ï¼Œè®°å½•ä»æœ€è¿‘åˆ°æœ€è¿œæ’åˆ— git reset HEAD^ï¼Œå›é€€åˆ°HEAD^ç‰ˆæœ¬ï¼ˆ^è¡¨ç¤ºä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œ^^è¡¨ç¤ºä¸Šä¸Šç‰ˆæœ¬ï¼Œâ€¦â€¦ï¼‰ git reset+ï¼ˆç‰ˆæœ¬å·ï¼‰ï¼Œå¯ä»¥æ‰¾åˆ°æŸä¸ªç‰ˆæœ¬ï¼Œè¿™æ˜¯åœ¨çª—å£æœªå…³é—­å‰çš„ å¦‚æœgitå…³é—­åï¼Œæƒ³æ‰¾åˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œè¿˜å¯ä»¥git reflogè·å–ä¹‹å‰æ¯ä¸€æ¬¡å‘½ä»¤ å·¥ä½œåŒºï¼Œæš‚å­˜åŒºï¼Œç‰ˆæœ¬åº“æ¦‚å¿µï¼Œåªæœ‰å…ˆæ”¾åœ¨æš‚å­˜åŒºçš„ä¿®æ”¹æ‰ä¼šè¢«æäº¤ æ’¤é”€ä¿®æ”¹ï¼ˆgit checkout â€“fileï¼Œè®©æ–‡ä»¶å›åˆ°æœ€è¿‘ä¸€æ¬¡git commitæˆ–git addæ—¶çš„çŠ¶æ€ï¼Œç”¨ç‰ˆæœ¬åº“é‡Œçš„ç‰ˆæœ¬æ›¿æ¢å·¥ä½œåŒºçš„ç‰ˆæœ¬ï¼‰ ä¸€ç§æ˜¯ readme.txt è‡ªä¿®æ”¹åè¿˜æ²¡æœ‰è¢«æ”¾åˆ°æš‚å­˜åŒºï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°å’Œç‰ˆæœ¬åº“ä¸€æ¨¡ä¸€æ ·çš„çŠ¶æ€ ä¸€ç§æ˜¯ readme.txt å·²ç»æ·»åŠ åˆ°æš‚å­˜åŒºåï¼Œåˆä½œäº†ä¿®æ”¹ï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°æ·»åŠ åˆ°æš‚å­˜åŒºåçš„çŠ¶æ€ã€‚ git resetå‘½ä»¤æ—¢å¯ä»¥å›é€€ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æ’¤é”€æ‰ï¼Œé‡æ–°è¿”å›å·¥ä½œåŒº è¿œç¨‹ä»“åº“ åˆ›å»ºSSH Keyã€‚åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰.sshç›®å½•ï¼Œå¦‚æœæœ‰ï¼Œå†çœ‹çœ‹è¿™ä¸ªç›®å½•ä¸‹æœ‰æ²¡æœ‰ id_rsa å’Œ id_rsa.pub è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚æœå·²ç»æœ‰äº†ï¼Œå¯ç›´æ¥è·³åˆ°ä¸‹ä¸€æ­¥ã€‚å¦‚æœæ²¡æœ‰ï¼Œæ‰“å¼€Shellï¼ˆWindowsä¸‹æ‰“å¼€Git Bashï¼‰ï¼Œåˆ›å»ºSSH Keyï¼š ç™»é™†GitHubï¼Œæ‰“å¼€â€œAccount settingsâ€ï¼Œâ€œSSH Keysâ€é¡µé¢ï¼š ç„¶åï¼Œç‚¹â€œAdd SSH Keyâ€ï¼Œå¡«ä¸Šä»»æ„Titleï¼Œåœ¨Keyæ–‡æœ¬æ¡†é‡Œç²˜è´´ id_rsa.pub æ–‡ä»¶çš„å†…å®¹ 3. æ·»åŠ è¿œç¨‹åº“ 1. åœ¨githubä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„gitä»“åº“ï¼ˆç›®å‰è¿˜æ˜¯ç©ºçš„ï¼Œå› ä¸ºæ²¡å…³è”åˆ°æœ¬åœ°ä»“åº“ï¼‰ 2. git remote add origin git@github.com:enpong/git.gitï¼ˆè¿œç¨‹ä»“åº“ä¸æœ¬åœ°ä»“åº“çš„å…³è”ï¼‰ 1. ![](https://img-blog.csdn.net/20181023172916608?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDA1OTUw/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70) 3. git push -u origin masterï¼ŒæŠŠå½“å‰åˆ†æ”¯masteræ¨é€åˆ°è¿œç¨‹ï¼Œ-uæŠŠæœ¬åœ°çš„masteråˆ†æ”¯ä¸è¿œç¨‹çš„masteråˆ†æ”¯å…³è”èµ·æ¥ï¼›åœ¨ä»¥åçš„æäº¤ä¸­ä¸éœ€-u åˆ†æ”¯ç®¡ç† åˆ›å»ºä¸åˆå¹¶åˆ†æ”¯ ï¼ˆgit checkout -b + åˆ†æ”¯ï¼‰æˆ– ï¼ˆgit branch + åˆ†æ”¯ï¼Œgit checkout + åˆ†æ”¯ï¼‰ï¼Œåˆ›å»ºå¹¶åˆ‡æ¢åˆ†æ”¯ ï¼ˆgit branchï¼‰æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼Œï¼ˆgit checkout + åˆ†æ”¯ï¼‰åˆ‡æ¢åˆ†æ”¯ ï¼ˆgit merge + åˆ†æ”¯ï¼‰ï¼ŒæŠŠæŒ‡å®šåˆ†æ”¯çš„å·¥ä½œåˆå¹¶åˆ°å½“å‰åˆ†æ”¯ ï¼ˆgit branch -d + åˆ†æ”¯ï¼‰ï¼Œåˆ é™¤æŒ‡å®šåˆ†æ”¯ è§£å†³å†²çª åˆ†æ”¯ç­–ç•¥ åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æŒ‰ç…§å‡ ä¸ªåŸºæœ¬åŸåˆ™è¿›è¡Œåˆ†æ”¯ç®¡ç†ï¼š é¦–å…ˆï¼Œ master åˆ†æ”¯åº”è¯¥æ˜¯éå¸¸ç¨³å®šçš„ï¼Œä¹Ÿå°±æ˜¯ä»…ç”¨æ¥å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œå¹³æ—¶ä¸èƒ½åœ¨ä¸Šé¢å¹²æ´»ï¼› é‚£åœ¨å“ªå¹²æ´»å‘¢ï¼Ÿå¹²æ´»éƒ½åœ¨ dev åˆ†æ”¯ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ dev åˆ†æ”¯æ˜¯ä¸ç¨³å®šçš„ï¼Œåˆ°æŸä¸ªæ—¶å€™ï¼Œæ¯”å¦‚1.0ç‰ˆæœ¬å‘å¸ƒæ—¶ï¼Œå†æŠŠ devåˆ†æ”¯åˆå¹¶åˆ° master ä¸Šï¼Œåœ¨ master åˆ†æ”¯å‘å¸ƒ1.0ç‰ˆæœ¬ï¼› ä½ å’Œä½ çš„å°ä¼™ä¼´ä»¬æ¯ä¸ªäººéƒ½åœ¨ dev åˆ†æ”¯ä¸Šå¹²æ´»ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„åˆ†æ”¯ï¼Œæ—¶ä¸æ—¶åœ°å¾€ dev åˆ†æ”¯ä¸Šåˆå¹¶å°±å¯ä»¥äº†ã€‚ æ‰€ä»¥ï¼Œå›¢é˜Ÿåˆä½œçš„åˆ†æ”¯çœ‹èµ·æ¥å°±åƒè¿™æ ·ï¼š ä¿å­˜å·¥ä½œç°åœºå»åšå…¶ä»–å·¥ä½œåæ¥ç€ç»§ç»­åŸæ¥çš„å·¥ä½œ ï¼ˆgit stashï¼‰ï¼ŒæŠŠå½“å‰å·¥ä½œç°åœºä¿å­˜èµ·æ¥ ï¼ˆgit stash listï¼‰ï¼ŒæŸ¥çœ‹ä¿å­˜çš„å·¥ä½œç°åœº æ¢å¤å·¥ä½œç°åœº ï¼ˆgit stash applyï¼‰æ¢å¤ï¼Œï¼ˆgit stash dropï¼‰åˆ é™¤ ï¼ˆgit stash popï¼‰ï¼Œæ¢å¤åŒæ—¶åˆ é™¤]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
</search>
